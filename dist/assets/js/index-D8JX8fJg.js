import{r as Cg,c as Ag,N as Gr,a as h,u as es,d as Dg,O as kg,e as mn,f as $x,h as Mg,i as Eg}from"./react-vendor-BURlF5S1.js";import{a as Tg,f as zg,u as Rg,i as Lg,P as _g}from"./redux-vendor-DcP-vYw-.js";import{M as Og,G as Fe,X as gn,L as Ug,a as Bg,b as It,U as De,B as wt,c as Ue,d as Tx,e as Kx,f as vd,F as Ss,C as Xr,S as qg,g as nt,h as Yg,i as Hg,j as Fx,T as Gg,k as Wt,l as Xg,E as Jx,m as Cs,I as Vg,n as Ws,o as rt,p as Pe,q as wa,r as Kr,s as Fr,t as Qg,P as Nd,u as zx,v as Zg,w as Px,x as Rx,y as xn,z as hn,A as ht,D as $g,H as Sa,K as Lx,J as _x,N as Na,O as Kg,Q as Ox,R as Vr,V as wd,W as Sd,Y as Cd,Z as Qr,_ as Fg,$ as Jg,a0 as Pg,a1 as Ig,a2 as Ix,a3 as Ux,a4 as Ps,a5 as Ad,a6 as fn,a7 as Wg,a8 as Wx,a9 as ef}from"./ui-vendor-DEhiy_FV.js";import{a as tf}from"./utils-vendor-Bu_id1U-.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))d(u);new MutationObserver(u=>{for(const b of u)if(b.type==="childList")for(const v of b.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&d(v)}).observe(document,{childList:!0,subtree:!0});function m(u){const b={};return u.integrity&&(b.integrity=u.integrity),u.referrerPolicy&&(b.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?b.credentials="include":u.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function d(u){if(u.ep)return;u.ep=!0;const b=m(u);fetch(u.href,b)}})();var hd={exports:{}},nn={};var Bx;function sf(){if(Bx)return nn;Bx=1;var i=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function m(d,u,b){var v=null;if(b!==void 0&&(v=""+b),u.key!==void 0&&(v=""+u.key),"key"in u){b={};for(var _ in u)_!=="key"&&(b[_]=u[_])}else b=u;return u=b.ref,{$$typeof:i,type:d,key:v,ref:u!==void 0?u:null,props:b}}return nn.Fragment=o,nn.jsx=m,nn.jsxs=m,nn}var qx;function af(){return qx||(qx=1,hd.exports=sf()),hd.exports}var e=af(),gd={exports:{}},rn={},fd={exports:{}},pd={};var Yx;function lf(){return Yx||(Yx=1,(function(i){function o(D,G){var z=D.length;D.push(G);e:for(;0<z;){var B=z-1>>>1,U=D[B];if(0<u(U,G))D[B]=G,D[z]=U,z=B;else break e}}function m(D){return D.length===0?null:D[0]}function d(D){if(D.length===0)return null;var G=D[0],z=D.pop();if(z!==G){D[0]=z;e:for(var B=0,U=D.length,ie=U>>>1;B<ie;){var me=2*(B+1)-1,xe=D[me],I=me+1,Q=D[I];if(0>u(xe,z))I<U&&0>u(Q,xe)?(D[B]=Q,D[I]=z,B=I):(D[B]=xe,D[me]=z,B=me);else if(I<U&&0>u(Q,z))D[B]=Q,D[I]=z,B=I;else break e}}return G}function u(D,G){var z=D.sortIndex-G.sortIndex;return z!==0?z:D.id-G.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var b=performance;i.unstable_now=function(){return b.now()}}else{var v=Date,_=v.now();i.unstable_now=function(){return v.now()-_}}var f=[],R=[],y=1,p=null,S=3,E=!1,k=!1,O=!1,w=!1,N=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function ae(D){for(var G=m(R);G!==null;){if(G.callback===null)d(R);else if(G.startTime<=D)d(R),G.sortIndex=G.expirationTime,o(f,G);else break;G=m(R)}}function te(D){if(O=!1,ae(D),!k)if(m(f)!==null)k=!0,A||(A=!0,W());else{var G=m(R);G!==null&&ne(te,G.startTime-D)}}var A=!1,X=-1,g=5,M=-1;function T(){return w?!0:!(i.unstable_now()-M<g)}function V(){if(w=!1,A){var D=i.unstable_now();M=D;var G=!0;try{e:{k=!1,O&&(O=!1,$(X),X=-1),E=!0;var z=S;try{t:{for(ae(D),p=m(f);p!==null&&!(p.expirationTime>D&&T());){var B=p.callback;if(typeof B=="function"){p.callback=null,S=p.priorityLevel;var U=B(p.expirationTime<=D);if(D=i.unstable_now(),typeof U=="function"){p.callback=U,ae(D),G=!0;break t}p===m(f)&&d(f),ae(D)}else d(f);p=m(f)}if(p!==null)G=!0;else{var ie=m(R);ie!==null&&ne(te,ie.startTime-D),G=!1}}break e}finally{p=null,S=z,E=!1}G=void 0}}finally{G?W():A=!1}}}var W;if(typeof P=="function")W=function(){P(V)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,le=se.port2;se.port1.onmessage=V,W=function(){le.postMessage(null)}}else W=function(){N(V,0)};function ne(D,G){X=N(function(){D(i.unstable_now())},G)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(D){D.callback=null},i.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<D?Math.floor(1e3/D):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(D){switch(S){case 1:case 2:case 3:var G=3;break;default:G=S}var z=S;S=G;try{return D()}finally{S=z}},i.unstable_requestPaint=function(){w=!0},i.unstable_runWithPriority=function(D,G){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var z=S;S=D;try{return G()}finally{S=z}},i.unstable_scheduleCallback=function(D,G,z){var B=i.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?B+z:B):z=B,D){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=z+U,D={id:y++,callback:G,priorityLevel:D,startTime:z,expirationTime:U,sortIndex:-1},z>B?(D.sortIndex=z,o(R,D),m(f)===null&&D===m(R)&&(O?($(X),X=-1):O=!0,ne(te,z-B))):(D.sortIndex=U,o(f,D),k||E||(k=!0,A||(A=!0,W()))),D},i.unstable_shouldYield=T,i.unstable_wrapCallback=function(D){var G=S;return function(){var z=S;S=G;try{return D.apply(this,arguments)}finally{S=z}}}})(pd)),pd}var Hx;function nf(){return Hx||(Hx=1,fd.exports=lf()),fd.exports}var Gx;function rf(){if(Gx)return rn;Gx=1;var i=nf(),o=Cg(),m=Ag();function d(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function b(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function v(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function _(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function f(t){if(b(t)!==t)throw Error(d(188))}function R(t){var s=t.alternate;if(!s){if(s=b(t),s===null)throw Error(d(188));return s!==t?null:t}for(var a=t,l=s;;){var n=a.return;if(n===null)break;var r=n.alternate;if(r===null){if(l=n.return,l!==null){a=l;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===a)return f(n),t;if(r===l)return f(n),s;r=r.sibling}throw Error(d(188))}if(a.return!==l.return)a=n,l=r;else{for(var c=!1,x=n.child;x;){if(x===a){c=!0,a=n,l=r;break}if(x===l){c=!0,l=n,a=r;break}x=x.sibling}if(!c){for(x=r.child;x;){if(x===a){c=!0,a=r,l=n;break}if(x===l){c=!0,l=r,a=n;break}x=x.sibling}if(!c)throw Error(d(189))}}if(a.alternate!==l)throw Error(d(190))}if(a.tag!==3)throw Error(d(188));return a.stateNode.current===a?t:s}function y(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=y(t),s!==null)return s;t=t.sibling}return null}var p=Object.assign,S=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),P=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),T=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function W(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var se=Symbol.for("react.client.reference");function le(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===se?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case O:return"Fragment";case N:return"Profiler";case w:return"StrictMode";case te:return"Suspense";case A:return"SuspenseList";case M:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case P:return t.displayName||"Context";case $:return(t._context.displayName||"Context")+".Consumer";case ae:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case X:return s=t.displayName||null,s!==null?s:le(t.type)||"Memo";case g:s=t._payload,t=t._init;try{return le(t(s))}catch{}}return null}var ne=Array.isArray,D=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=m.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},B=[],U=-1;function ie(t){return{current:t}}function me(t){0>U||(t.current=B[U],B[U]=null,U--)}function xe(t,s){U++,B[U]=t.current,t.current=s}var I=ie(null),Q=ie(null),he=ie(null),Ne=ie(null);function ut(t,s){switch(xe(he,s),xe(Q,t),xe(I,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?ex(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=ex(s),t=tx(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}me(I),xe(I,t)}function de(){me(I),me(Q),me(he)}function gt(t){t.memoizedState!==null&&xe(Ne,t);var s=I.current,a=tx(s,t.type);s!==a&&(xe(Q,t),xe(I,a))}function mt(t){Q.current===t&&(me(I),me(Q)),Ne.current===t&&(me(Ne),tn._currentValue=z)}var ml,Md;function ea(t){if(ml===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);ml=s&&s[1]||"",Md=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ml+t+Md}var Pr=!1;function Ir(t,s){if(!t||Pr)return"";Pr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(Z){var H=Z}Reflect.construct(t,[],J)}else{try{J.call()}catch(Z){H=Z}t.call(J.prototype)}}else{try{throw Error()}catch(Z){H=Z}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(Z){if(Z&&H&&typeof Z.stack=="string")return[Z.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=l.DetermineComponentFrameRoot(),c=r[0],x=r[1];if(c&&x){var j=c.split(`
`),Y=x.split(`
`);for(n=l=0;l<j.length&&!j[l].includes("DetermineComponentFrameRoot");)l++;for(;n<Y.length&&!Y[n].includes("DetermineComponentFrameRoot");)n++;if(l===j.length||n===Y.length)for(l=j.length-1,n=Y.length-1;1<=l&&0<=n&&j[l]!==Y[n];)n--;for(;1<=l&&0<=n;l--,n--)if(j[l]!==Y[n]){if(l!==1||n!==1)do if(l--,n--,0>n||j[l]!==Y[n]){var K=`
`+j[l].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=l&&0<=n);break}}}finally{Pr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ea(a):""}function s0(t,s){switch(t.tag){case 26:case 27:case 5:return ea(t.type);case 16:return ea("Lazy");case 13:return t.child!==s&&s!==null?ea("Suspense Fallback"):ea("Suspense");case 19:return ea("SuspenseList");case 0:case 15:return Ir(t.type,!1);case 11:return Ir(t.type.render,!1);case 1:return Ir(t.type,!0);case 31:return ea("Activity");default:return""}}function Ed(t){try{var s="",a=null;do s+=s0(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Wr=Object.prototype.hasOwnProperty,ei=i.unstable_scheduleCallback,ti=i.unstable_cancelCallback,a0=i.unstable_shouldYield,l0=i.unstable_requestPaint,St=i.unstable_now,n0=i.unstable_getCurrentPriorityLevel,Td=i.unstable_ImmediatePriority,zd=i.unstable_UserBlockingPriority,bn=i.unstable_NormalPriority,r0=i.unstable_LowPriority,Rd=i.unstable_IdlePriority,i0=i.log,c0=i.unstable_setDisableYieldValue,xl=null,Ct=null;function As(t){if(typeof i0=="function"&&c0(t),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(xl,t)}catch{}}var At=Math.clz32?Math.clz32:u0,d0=Math.log,o0=Math.LN2;function u0(t){return t>>>=0,t===0?32:31-(d0(t)/o0|0)|0}var yn=256,jn=262144,vn=4194304;function ta(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Nn(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var n=0,r=t.suspendedLanes,c=t.pingedLanes;t=t.warmLanes;var x=l&134217727;return x!==0?(l=x&~r,l!==0?n=ta(l):(c&=x,c!==0?n=ta(c):a||(a=x&~t,a!==0&&(n=ta(a))))):(x=l&~r,x!==0?n=ta(x):c!==0?n=ta(c):a||(a=l&~t,a!==0&&(n=ta(a)))),n===0?0:s!==0&&s!==n&&(s&r)===0&&(r=n&-n,a=s&-s,r>=a||r===32&&(a&4194048)!==0)?s:n}function hl(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function m0(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ld(){var t=vn;return vn<<=1,(vn&62914560)===0&&(vn=4194304),t}function si(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function gl(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function x0(t,s,a,l,n,r){var c=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var x=t.entanglements,j=t.expirationTimes,Y=t.hiddenUpdates;for(a=c&~a;0<a;){var K=31-At(a),J=1<<K;x[K]=0,j[K]=-1;var H=Y[K];if(H!==null)for(Y[K]=null,K=0;K<H.length;K++){var Z=H[K];Z!==null&&(Z.lane&=-536870913)}a&=~J}l!==0&&_d(t,l,0),r!==0&&n===0&&t.tag!==0&&(t.suspendedLanes|=r&~(c&~s))}function _d(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-At(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Od(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-At(a),n=1<<l;n&s|t[l]&s&&(t[l]|=s),a&=~n}}function Ud(t,s){var a=s&-s;return a=(a&42)!==0?1:ai(a),(a&(t.suspendedLanes|s))!==0?0:a}function ai(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function li(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Bd(){var t=G.p;return t!==0?t:(t=window.event,t===void 0?32:Sx(t.type))}function qd(t,s){var a=G.p;try{return G.p=t,s()}finally{G.p=a}}var Ds=Math.random().toString(36).slice(2),et="__reactFiber$"+Ds,ft="__reactProps$"+Ds,Ca="__reactContainer$"+Ds,ni="__reactEvents$"+Ds,h0="__reactListeners$"+Ds,g0="__reactHandles$"+Ds,Yd="__reactResources$"+Ds,fl="__reactMarker$"+Ds;function ri(t){delete t[et],delete t[ft],delete t[ni],delete t[h0],delete t[g0]}function Aa(t){var s=t[et];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Ca]||a[et]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=cx(t);t!==null;){if(a=t[et])return a;t=cx(t)}return s}t=a,a=t.parentNode}return null}function Da(t){if(t=t[et]||t[Ca]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function pl(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(d(33))}function ka(t){var s=t[Yd];return s||(s=t[Yd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ie(t){t[fl]=!0}var Hd=new Set,Gd={};function sa(t,s){Ma(t,s),Ma(t+"Capture",s)}function Ma(t,s){for(Gd[t]=s,t=0;t<s.length;t++)Hd.add(s[t])}var f0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xd={},Vd={};function p0(t){return Wr.call(Vd,t)?!0:Wr.call(Xd,t)?!1:f0.test(t)?Vd[t]=!0:(Xd[t]=!0,!1)}function wn(t,s,a){if(p0(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Sn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function ls(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function Lt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qd(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function b0(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var n=l.get,r=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(c){a=""+c,r.call(this,c)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(c){a=""+c},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ii(t){if(!t._valueTracker){var s=Qd(t)?"checked":"value";t._valueTracker=b0(t,s,""+t[s])}}function Zd(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=Qd(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function Cn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var y0=/[\n"\\]/g;function _t(t){return t.replace(y0,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ci(t,s,a,l,n,r,c,x){t.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?t.type=c:t.removeAttribute("type"),s!=null?c==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Lt(s)):t.value!==""+Lt(s)&&(t.value=""+Lt(s)):c!=="submit"&&c!=="reset"||t.removeAttribute("value"),s!=null?di(t,c,Lt(s)):a!=null?di(t,c,Lt(a)):l!=null&&t.removeAttribute("value"),n==null&&r!=null&&(t.defaultChecked=!!r),n!=null&&(t.checked=n&&typeof n!="function"&&typeof n!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.name=""+Lt(x):t.removeAttribute("name")}function $d(t,s,a,l,n,r,c,x){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),s!=null||a!=null){if(!(r!=="submit"&&r!=="reset"||s!=null)){ii(t);return}a=a!=null?""+Lt(a):"",s=s!=null?""+Lt(s):a,x||s===t.value||(t.value=s),t.defaultValue=s}l=l??n,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=x?t.checked:!!l,t.defaultChecked=!!l,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(t.name=c),ii(t)}function di(t,s,a){s==="number"&&Cn(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ea(t,s,a,l){if(t=t.options,s){s={};for(var n=0;n<a.length;n++)s["$"+a[n]]=!0;for(a=0;a<t.length;a++)n=s.hasOwnProperty("$"+t[a].value),t[a].selected!==n&&(t[a].selected=n),n&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Lt(a),s=null,n=0;n<t.length;n++){if(t[n].value===a){t[n].selected=!0,l&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function Kd(t,s,a){if(s!=null&&(s=""+Lt(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Lt(a):""}function Fd(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(d(92));if(ne(l)){if(1<l.length)throw Error(d(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=Lt(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),ii(t)}function Ta(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var j0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jd(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||j0.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function Pd(t,s,a){if(s!=null&&typeof s!="object")throw Error(d(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var n in s)l=s[n],s.hasOwnProperty(n)&&a[n]!==l&&Jd(t,n,l)}else for(var r in s)s.hasOwnProperty(r)&&Jd(t,r,s[r])}function oi(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var v0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),N0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function An(t){return N0.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ns(){}var ui=null;function mi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var za=null,Ra=null;function Id(t){var s=Da(t);if(s&&(t=s.stateNode)){var a=t[ft]||null;e:switch(t=s.stateNode,s.type){case"input":if(ci(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+_t(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var n=l[ft]||null;if(!n)throw Error(d(90));ci(l,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&Zd(l)}break e;case"textarea":Kd(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Ea(t,!!a.multiple,s,!1)}}}var xi=!1;function Wd(t,s,a){if(xi)return t(s,a);xi=!0;try{var l=t(s);return l}finally{if(xi=!1,(za!==null||Ra!==null)&&(xr(),za&&(s=za,t=Ra,Ra=za=null,Id(s),t)))for(s=0;s<t.length;s++)Id(t[s])}}function bl(t,s){var a=t.stateNode;if(a===null)return null;var l=a[ft]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(d(231,s,typeof a));return a}var rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hi=!1;if(rs)try{var yl={};Object.defineProperty(yl,"passive",{get:function(){hi=!0}}),window.addEventListener("test",yl,yl),window.removeEventListener("test",yl,yl)}catch{hi=!1}var ks=null,gi=null,Dn=null;function eo(){if(Dn)return Dn;var t,s=gi,a=s.length,l,n="value"in ks?ks.value:ks.textContent,r=n.length;for(t=0;t<a&&s[t]===n[t];t++);var c=a-t;for(l=1;l<=c&&s[a-l]===n[r-l];l++);return Dn=n.slice(t,1<l?1-l:void 0)}function kn(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Mn(){return!0}function to(){return!1}function pt(t){function s(a,l,n,r,c){this._reactName=a,this._targetInst=n,this.type=l,this.nativeEvent=r,this.target=c,this.currentTarget=null;for(var x in t)t.hasOwnProperty(x)&&(a=t[x],this[x]=a?a(r):r[x]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Mn:to,this.isPropagationStopped=to,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Mn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Mn)},persist:function(){},isPersistent:Mn}),s}var aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},En=pt(aa),jl=p({},aa,{view:0,detail:0}),w0=pt(jl),fi,pi,vl,Tn=p({},jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vl&&(vl&&t.type==="mousemove"?(fi=t.screenX-vl.screenX,pi=t.screenY-vl.screenY):pi=fi=0,vl=t),fi)},movementY:function(t){return"movementY"in t?t.movementY:pi}}),so=pt(Tn),S0=p({},Tn,{dataTransfer:0}),C0=pt(S0),A0=p({},jl,{relatedTarget:0}),bi=pt(A0),D0=p({},aa,{animationName:0,elapsedTime:0,pseudoElement:0}),k0=pt(D0),M0=p({},aa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),E0=pt(M0),T0=p({},aa,{data:0}),ao=pt(T0),z0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},L0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _0(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=L0[t])?!!s[t]:!1}function yi(){return _0}var O0=p({},jl,{key:function(t){if(t.key){var s=z0[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=kn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?R0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yi,charCode:function(t){return t.type==="keypress"?kn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),U0=pt(O0),B0=p({},Tn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lo=pt(B0),q0=p({},jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yi}),Y0=pt(q0),H0=p({},aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),G0=pt(H0),X0=p({},Tn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),V0=pt(X0),Q0=p({},aa,{newState:0,oldState:0}),Z0=pt(Q0),$0=[9,13,27,32],ji=rs&&"CompositionEvent"in window,Nl=null;rs&&"documentMode"in document&&(Nl=document.documentMode);var K0=rs&&"TextEvent"in window&&!Nl,no=rs&&(!ji||Nl&&8<Nl&&11>=Nl),ro=" ",io=!1;function co(t,s){switch(t){case"keyup":return $0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var La=!1;function F0(t,s){switch(t){case"compositionend":return oo(s);case"keypress":return s.which!==32?null:(io=!0,ro);case"textInput":return t=s.data,t===ro&&io?null:t;default:return null}}function J0(t,s){if(La)return t==="compositionend"||!ji&&co(t,s)?(t=eo(),Dn=gi=ks=null,La=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return no&&s.locale!=="ko"?null:s.data;default:return null}}var P0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uo(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!P0[t.type]:s==="textarea"}function mo(t,s,a,l){za?Ra?Ra.push(l):Ra=[l]:za=l,s=jr(s,"onChange"),0<s.length&&(a=new En("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var wl=null,Sl=null;function I0(t){Km(t,0)}function zn(t){var s=pl(t);if(Zd(s))return t}function xo(t,s){if(t==="change")return s}var ho=!1;if(rs){var vi;if(rs){var Ni="oninput"in document;if(!Ni){var go=document.createElement("div");go.setAttribute("oninput","return;"),Ni=typeof go.oninput=="function"}vi=Ni}else vi=!1;ho=vi&&(!document.documentMode||9<document.documentMode)}function fo(){wl&&(wl.detachEvent("onpropertychange",po),Sl=wl=null)}function po(t){if(t.propertyName==="value"&&zn(Sl)){var s=[];mo(s,Sl,t,mi(t)),Wd(I0,s)}}function W0(t,s,a){t==="focusin"?(fo(),wl=s,Sl=a,wl.attachEvent("onpropertychange",po)):t==="focusout"&&fo()}function eh(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zn(Sl)}function th(t,s){if(t==="click")return zn(s)}function sh(t,s){if(t==="input"||t==="change")return zn(s)}function ah(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Dt=typeof Object.is=="function"?Object.is:ah;function Cl(t,s){if(Dt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var n=a[l];if(!Wr.call(s,n)||!Dt(t[n],s[n]))return!1}return!0}function bo(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yo(t,s){var a=bo(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=bo(a)}}function jo(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?jo(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function vo(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Cn(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Cn(t.document)}return s}function wi(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var lh=rs&&"documentMode"in document&&11>=document.documentMode,_a=null,Si=null,Al=null,Ci=!1;function No(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ci||_a==null||_a!==Cn(l)||(l=_a,"selectionStart"in l&&wi(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Al&&Cl(Al,l)||(Al=l,l=jr(Si,"onSelect"),0<l.length&&(s=new En("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=_a)))}function la(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Oa={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},Ai={},wo={};rs&&(wo=document.createElement("div").style,"AnimationEvent"in window||(delete Oa.animationend.animation,delete Oa.animationiteration.animation,delete Oa.animationstart.animation),"TransitionEvent"in window||delete Oa.transitionend.transition);function na(t){if(Ai[t])return Ai[t];if(!Oa[t])return t;var s=Oa[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in wo)return Ai[t]=s[a];return t}var So=na("animationend"),Co=na("animationiteration"),Ao=na("animationstart"),nh=na("transitionrun"),rh=na("transitionstart"),ih=na("transitioncancel"),Do=na("transitionend"),ko=new Map,Di="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Di.push("scrollEnd");function Qt(t,s){ko.set(t,s),sa(s,[t])}var Rn=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ot=[],Ua=0,ki=0;function Ln(){for(var t=Ua,s=ki=Ua=0;s<t;){var a=Ot[s];Ot[s++]=null;var l=Ot[s];Ot[s++]=null;var n=Ot[s];Ot[s++]=null;var r=Ot[s];if(Ot[s++]=null,l!==null&&n!==null){var c=l.pending;c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n}r!==0&&Mo(a,n,r)}}function _n(t,s,a,l){Ot[Ua++]=t,Ot[Ua++]=s,Ot[Ua++]=a,Ot[Ua++]=l,ki|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Mi(t,s,a,l){return _n(t,s,a,l),On(t)}function ra(t,s){return _n(t,null,null,s),On(t)}function Mo(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var n=!1,r=t.return;r!==null;)r.childLanes|=a,l=r.alternate,l!==null&&(l.childLanes|=a),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(n=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,n&&s!==null&&(n=31-At(a),t=r.hiddenUpdates,l=t[n],l===null?t[n]=[s]:l.push(s),s.lane=a|536870912),r):null}function On(t){if(50<Kl)throw Kl=0,Bc=null,Error(d(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Ba={};function ch(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(t,s,a,l){return new ch(t,s,a,l)}function Ei(t){return t=t.prototype,!(!t||!t.isReactComponent)}function is(t,s){var a=t.alternate;return a===null?(a=kt(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Eo(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Un(t,s,a,l,n,r){var c=0;if(l=t,typeof t=="function")Ei(t)&&(c=1);else if(typeof t=="string")c=xg(t,a,I.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case M:return t=kt(31,a,s,n),t.elementType=M,t.lanes=r,t;case O:return ia(a.children,n,r,s);case w:c=8,n|=24;break;case N:return t=kt(12,a,s,n|2),t.elementType=N,t.lanes=r,t;case te:return t=kt(13,a,s,n),t.elementType=te,t.lanes=r,t;case A:return t=kt(19,a,s,n),t.elementType=A,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case P:c=10;break e;case $:c=9;break e;case ae:c=11;break e;case X:c=14;break e;case g:c=16,l=null;break e}c=29,a=Error(d(130,t===null?"null":typeof t,"")),l=null}return s=kt(c,a,s,n),s.elementType=t,s.type=l,s.lanes=r,s}function ia(t,s,a,l){return t=kt(7,t,l,s),t.lanes=a,t}function Ti(t,s,a){return t=kt(6,t,null,s),t.lanes=a,t}function To(t){var s=kt(18,null,null,0);return s.stateNode=t,s}function zi(t,s,a){return s=kt(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var zo=new WeakMap;function Ut(t,s){if(typeof t=="object"&&t!==null){var a=zo.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Ed(s)},zo.set(t,s),s)}return{value:t,source:s,stack:Ed(s)}}var qa=[],Ya=0,Bn=null,Dl=0,Bt=[],qt=0,Ms=null,Kt=1,Ft="";function cs(t,s){qa[Ya++]=Dl,qa[Ya++]=Bn,Bn=t,Dl=s}function Ro(t,s,a){Bt[qt++]=Kt,Bt[qt++]=Ft,Bt[qt++]=Ms,Ms=t;var l=Kt;t=Ft;var n=32-At(l)-1;l&=~(1<<n),a+=1;var r=32-At(s)+n;if(30<r){var c=n-n%5;r=(l&(1<<c)-1).toString(32),l>>=c,n-=c,Kt=1<<32-At(s)+n|a<<n|l,Ft=r+t}else Kt=1<<r|a<<n|l,Ft=t}function Ri(t){t.return!==null&&(cs(t,1),Ro(t,1,0))}function Li(t){for(;t===Bn;)Bn=qa[--Ya],qa[Ya]=null,Dl=qa[--Ya],qa[Ya]=null;for(;t===Ms;)Ms=Bt[--qt],Bt[qt]=null,Ft=Bt[--qt],Bt[qt]=null,Kt=Bt[--qt],Bt[qt]=null}function Lo(t,s){Bt[qt++]=Kt,Bt[qt++]=Ft,Bt[qt++]=Ms,Kt=s.id,Ft=s.overflow,Ms=t}var tt=null,_e=null,ve=!1,Es=null,Yt=!1,_i=Error(d(519));function Ts(t){var s=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kl(Ut(s,t)),_i}function _o(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[et]=t,s[ft]=l,a){case"dialog":be("cancel",s),be("close",s);break;case"iframe":case"object":case"embed":be("load",s);break;case"video":case"audio":for(a=0;a<Jl.length;a++)be(Jl[a],s);break;case"source":be("error",s);break;case"img":case"image":case"link":be("error",s),be("load",s);break;case"details":be("toggle",s);break;case"input":be("invalid",s),$d(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":be("invalid",s);break;case"textarea":be("invalid",s),Fd(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||Im(s.textContent,a)?(l.popover!=null&&(be("beforetoggle",s),be("toggle",s)),l.onScroll!=null&&be("scroll",s),l.onScrollEnd!=null&&be("scrollend",s),l.onClick!=null&&(s.onclick=ns),s=!0):s=!1,s||Ts(t,!0)}function Oo(t){for(tt=t.return;tt;)switch(tt.tag){case 5:case 31:case 13:Yt=!1;return;case 27:case 3:Yt=!0;return;default:tt=tt.return}}function Ha(t){if(t!==tt)return!1;if(!ve)return Oo(t),ve=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Wc(t.type,t.memoizedProps)),a=!a),a&&_e&&Ts(t),Oo(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(d(317));_e=ix(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(d(317));_e=ix(t)}else s===27?(s=_e,Qs(t.type)?(t=ld,ld=null,_e=t):_e=s):_e=tt?Gt(t.stateNode.nextSibling):null;return!0}function ca(){_e=tt=null,ve=!1}function Oi(){var t=Es;return t!==null&&(vt===null?vt=t:vt.push.apply(vt,t),Es=null),t}function kl(t){Es===null?Es=[t]:Es.push(t)}var Ui=ie(null),da=null,ds=null;function zs(t,s,a){xe(Ui,s._currentValue),s._currentValue=a}function os(t){t._currentValue=Ui.current,me(Ui)}function Bi(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function qi(t,s,a,l){var n=t.child;for(n!==null&&(n.return=t);n!==null;){var r=n.dependencies;if(r!==null){var c=n.child;r=r.firstContext;e:for(;r!==null;){var x=r;r=n;for(var j=0;j<s.length;j++)if(x.context===s[j]){r.lanes|=a,x=r.alternate,x!==null&&(x.lanes|=a),Bi(r.return,a,t),l||(c=null);break e}r=x.next}}else if(n.tag===18){if(c=n.return,c===null)throw Error(d(341));c.lanes|=a,r=c.alternate,r!==null&&(r.lanes|=a),Bi(c,a,t),c=null}else c=n.child;if(c!==null)c.return=n;else for(c=n;c!==null;){if(c===t){c=null;break}if(n=c.sibling,n!==null){n.return=c.return,c=n;break}c=c.return}n=c}}function Ga(t,s,a,l){t=null;for(var n=s,r=!1;n!==null;){if(!r){if((n.flags&524288)!==0)r=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var c=n.alternate;if(c===null)throw Error(d(387));if(c=c.memoizedProps,c!==null){var x=n.type;Dt(n.pendingProps.value,c.value)||(t!==null?t.push(x):t=[x])}}else if(n===Ne.current){if(c=n.alternate,c===null)throw Error(d(387));c.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(t!==null?t.push(tn):t=[tn])}n=n.return}t!==null&&qi(s,t,a,l),s.flags|=262144}function qn(t){for(t=t.firstContext;t!==null;){if(!Dt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function oa(t){da=t,ds=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function st(t){return Uo(da,t)}function Yn(t,s){return da===null&&oa(t),Uo(t,s)}function Uo(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ds===null){if(t===null)throw Error(d(308));ds=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else ds=ds.next=s;return a}var dh=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},oh=i.unstable_scheduleCallback,uh=i.unstable_NormalPriority,Qe={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yi(){return{controller:new dh,data:new Map,refCount:0}}function Ml(t){t.refCount--,t.refCount===0&&oh(uh,function(){t.controller.abort()})}var El=null,Hi=0,Xa=0,Va=null;function mh(t,s){if(El===null){var a=El=[];Hi=0,Xa=Vc(),Va={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Hi++,s.then(Bo,Bo),s}function Bo(){if(--Hi===0&&El!==null){Va!==null&&(Va.status="fulfilled");var t=El;El=null,Xa=0,Va=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function xh(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(n){a.push(n)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var n=0;n<a.length;n++)(0,a[n])(s)},function(n){for(l.status="rejected",l.reason=n,n=0;n<a.length;n++)(0,a[n])(void 0)}),l}var qo=D.S;D.S=function(t,s){Nm=St(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&mh(t,s),qo!==null&&qo(t,s)};var ua=ie(null);function Gi(){var t=ua.current;return t!==null?t:Re.pooledCache}function Hn(t,s){s===null?xe(ua,ua.current):xe(ua,s.pool)}function Yo(){var t=Gi();return t===null?null:{parent:Qe._currentValue,pool:t}}var Qa=Error(d(460)),Xi=Error(d(474)),Gn=Error(d(542)),Xn={then:function(){}};function Ho(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Go(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(ns,ns),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Vo(t),t;default:if(typeof s.status=="string")s.then(ns,ns);else{if(t=Re,t!==null&&100<t.shellSuspendCounter)throw Error(d(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var n=s;n.status="fulfilled",n.value=l}},function(l){if(s.status==="pending"){var n=s;n.status="rejected",n.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Vo(t),t}throw xa=s,Qa}}function ma(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(xa=a,Qa):a}}var xa=null;function Xo(){if(xa===null)throw Error(d(459));var t=xa;return xa=null,t}function Vo(t){if(t===Qa||t===Gn)throw Error(d(483))}var Za=null,Tl=0;function Vn(t){var s=Tl;return Tl+=1,Za===null&&(Za=[]),Go(Za,t,s)}function zl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Qn(t,s){throw s.$$typeof===S?Error(d(525)):(t=Object.prototype.toString.call(s),Error(d(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Qo(t){function s(L,C){if(t){var q=L.deletions;q===null?(L.deletions=[C],L.flags|=16):q.push(C)}}function a(L,C){if(!t)return null;for(;C!==null;)s(L,C),C=C.sibling;return null}function l(L){for(var C=new Map;L!==null;)L.key!==null?C.set(L.key,L):C.set(L.index,L),L=L.sibling;return C}function n(L,C){return L=is(L,C),L.index=0,L.sibling=null,L}function r(L,C,q){return L.index=q,t?(q=L.alternate,q!==null?(q=q.index,q<C?(L.flags|=67108866,C):q):(L.flags|=67108866,C)):(L.flags|=1048576,C)}function c(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function x(L,C,q,F){return C===null||C.tag!==6?(C=Ti(q,L.mode,F),C.return=L,C):(C=n(C,q),C.return=L,C)}function j(L,C,q,F){var oe=q.type;return oe===O?K(L,C,q.props.children,F,q.key):C!==null&&(C.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===g&&ma(oe)===C.type)?(C=n(C,q.props),zl(C,q),C.return=L,C):(C=Un(q.type,q.key,q.props,null,L.mode,F),zl(C,q),C.return=L,C)}function Y(L,C,q,F){return C===null||C.tag!==4||C.stateNode.containerInfo!==q.containerInfo||C.stateNode.implementation!==q.implementation?(C=zi(q,L.mode,F),C.return=L,C):(C=n(C,q.children||[]),C.return=L,C)}function K(L,C,q,F,oe){return C===null||C.tag!==7?(C=ia(q,L.mode,F,oe),C.return=L,C):(C=n(C,q),C.return=L,C)}function J(L,C,q){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=Ti(""+C,L.mode,q),C.return=L,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case E:return q=Un(C.type,C.key,C.props,null,L.mode,q),zl(q,C),q.return=L,q;case k:return C=zi(C,L.mode,q),C.return=L,C;case g:return C=ma(C),J(L,C,q)}if(ne(C)||W(C))return C=ia(C,L.mode,q,null),C.return=L,C;if(typeof C.then=="function")return J(L,Vn(C),q);if(C.$$typeof===P)return J(L,Yn(L,C),q);Qn(L,C)}return null}function H(L,C,q,F){var oe=C!==null?C.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return oe!==null?null:x(L,C,""+q,F);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case E:return q.key===oe?j(L,C,q,F):null;case k:return q.key===oe?Y(L,C,q,F):null;case g:return q=ma(q),H(L,C,q,F)}if(ne(q)||W(q))return oe!==null?null:K(L,C,q,F,null);if(typeof q.then=="function")return H(L,C,Vn(q),F);if(q.$$typeof===P)return H(L,C,Yn(L,q),F);Qn(L,q)}return null}function Z(L,C,q,F,oe){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return L=L.get(q)||null,x(C,L,""+F,oe);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case E:return L=L.get(F.key===null?q:F.key)||null,j(C,L,F,oe);case k:return L=L.get(F.key===null?q:F.key)||null,Y(C,L,F,oe);case g:return F=ma(F),Z(L,C,q,F,oe)}if(ne(F)||W(F))return L=L.get(q)||null,K(C,L,F,oe,null);if(typeof F.then=="function")return Z(L,C,q,Vn(F),oe);if(F.$$typeof===P)return Z(L,C,q,Yn(C,F),oe);Qn(C,F)}return null}function re(L,C,q,F){for(var oe=null,we=null,ce=C,fe=C=0,je=null;ce!==null&&fe<q.length;fe++){ce.index>fe?(je=ce,ce=null):je=ce.sibling;var Se=H(L,ce,q[fe],F);if(Se===null){ce===null&&(ce=je);break}t&&ce&&Se.alternate===null&&s(L,ce),C=r(Se,C,fe),we===null?oe=Se:we.sibling=Se,we=Se,ce=je}if(fe===q.length)return a(L,ce),ve&&cs(L,fe),oe;if(ce===null){for(;fe<q.length;fe++)ce=J(L,q[fe],F),ce!==null&&(C=r(ce,C,fe),we===null?oe=ce:we.sibling=ce,we=ce);return ve&&cs(L,fe),oe}for(ce=l(ce);fe<q.length;fe++)je=Z(ce,L,fe,q[fe],F),je!==null&&(t&&je.alternate!==null&&ce.delete(je.key===null?fe:je.key),C=r(je,C,fe),we===null?oe=je:we.sibling=je,we=je);return t&&ce.forEach(function(Js){return s(L,Js)}),ve&&cs(L,fe),oe}function ue(L,C,q,F){if(q==null)throw Error(d(151));for(var oe=null,we=null,ce=C,fe=C=0,je=null,Se=q.next();ce!==null&&!Se.done;fe++,Se=q.next()){ce.index>fe?(je=ce,ce=null):je=ce.sibling;var Js=H(L,ce,Se.value,F);if(Js===null){ce===null&&(ce=je);break}t&&ce&&Js.alternate===null&&s(L,ce),C=r(Js,C,fe),we===null?oe=Js:we.sibling=Js,we=Js,ce=je}if(Se.done)return a(L,ce),ve&&cs(L,fe),oe;if(ce===null){for(;!Se.done;fe++,Se=q.next())Se=J(L,Se.value,F),Se!==null&&(C=r(Se,C,fe),we===null?oe=Se:we.sibling=Se,we=Se);return ve&&cs(L,fe),oe}for(ce=l(ce);!Se.done;fe++,Se=q.next())Se=Z(ce,L,fe,Se.value,F),Se!==null&&(t&&Se.alternate!==null&&ce.delete(Se.key===null?fe:Se.key),C=r(Se,C,fe),we===null?oe=Se:we.sibling=Se,we=Se);return t&&ce.forEach(function(Sg){return s(L,Sg)}),ve&&cs(L,fe),oe}function ze(L,C,q,F){if(typeof q=="object"&&q!==null&&q.type===O&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case E:e:{for(var oe=q.key;C!==null;){if(C.key===oe){if(oe=q.type,oe===O){if(C.tag===7){a(L,C.sibling),F=n(C,q.props.children),F.return=L,L=F;break e}}else if(C.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===g&&ma(oe)===C.type){a(L,C.sibling),F=n(C,q.props),zl(F,q),F.return=L,L=F;break e}a(L,C);break}else s(L,C);C=C.sibling}q.type===O?(F=ia(q.props.children,L.mode,F,q.key),F.return=L,L=F):(F=Un(q.type,q.key,q.props,null,L.mode,F),zl(F,q),F.return=L,L=F)}return c(L);case k:e:{for(oe=q.key;C!==null;){if(C.key===oe)if(C.tag===4&&C.stateNode.containerInfo===q.containerInfo&&C.stateNode.implementation===q.implementation){a(L,C.sibling),F=n(C,q.children||[]),F.return=L,L=F;break e}else{a(L,C);break}else s(L,C);C=C.sibling}F=zi(q,L.mode,F),F.return=L,L=F}return c(L);case g:return q=ma(q),ze(L,C,q,F)}if(ne(q))return re(L,C,q,F);if(W(q)){if(oe=W(q),typeof oe!="function")throw Error(d(150));return q=oe.call(q),ue(L,C,q,F)}if(typeof q.then=="function")return ze(L,C,Vn(q),F);if(q.$$typeof===P)return ze(L,C,Yn(L,q),F);Qn(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,C!==null&&C.tag===6?(a(L,C.sibling),F=n(C,q),F.return=L,L=F):(a(L,C),F=Ti(q,L.mode,F),F.return=L,L=F),c(L)):a(L,C)}return function(L,C,q,F){try{Tl=0;var oe=ze(L,C,q,F);return Za=null,oe}catch(ce){if(ce===Qa||ce===Gn)throw ce;var we=kt(29,ce,null,L.mode);return we.lanes=F,we.return=L,we}}}var ha=Qo(!0),Zo=Qo(!1),Rs=!1;function Vi(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qi(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ls(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function _s(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ce&2)!==0){var n=l.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),l.pending=s,s=On(t),Mo(t,null,a),s}return _n(t,l,s,a),On(t)}function Rl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Od(t,a)}}function Zi(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var n=null,r=null;if(a=a.firstBaseUpdate,a!==null){do{var c={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};r===null?n=r=c:r=r.next=c,a=a.next}while(a!==null);r===null?n=r=s:r=r.next=s}else n=r=s;a={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var $i=!1;function Ll(){if($i){var t=Va;if(t!==null)throw t}}function _l(t,s,a,l){$i=!1;var n=t.updateQueue;Rs=!1;var r=n.firstBaseUpdate,c=n.lastBaseUpdate,x=n.shared.pending;if(x!==null){n.shared.pending=null;var j=x,Y=j.next;j.next=null,c===null?r=Y:c.next=Y,c=j;var K=t.alternate;K!==null&&(K=K.updateQueue,x=K.lastBaseUpdate,x!==c&&(x===null?K.firstBaseUpdate=Y:x.next=Y,K.lastBaseUpdate=j))}if(r!==null){var J=n.baseState;c=0,K=Y=j=null,x=r;do{var H=x.lane&-536870913,Z=H!==x.lane;if(Z?(ye&H)===H:(l&H)===H){H!==0&&H===Xa&&($i=!0),K!==null&&(K=K.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var re=t,ue=x;H=s;var ze=a;switch(ue.tag){case 1:if(re=ue.payload,typeof re=="function"){J=re.call(ze,J,H);break e}J=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ue.payload,H=typeof re=="function"?re.call(ze,J,H):re,H==null)break e;J=p({},J,H);break e;case 2:Rs=!0}}H=x.callback,H!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=n.callbacks,Z===null?n.callbacks=[H]:Z.push(H))}else Z={lane:H,tag:x.tag,payload:x.payload,callback:x.callback,next:null},K===null?(Y=K=Z,j=J):K=K.next=Z,c|=H;if(x=x.next,x===null){if(x=n.shared.pending,x===null)break;Z=x,x=Z.next,Z.next=null,n.lastBaseUpdate=Z,n.shared.pending=null}}while(!0);K===null&&(j=J),n.baseState=j,n.firstBaseUpdate=Y,n.lastBaseUpdate=K,r===null&&(n.shared.lanes=0),Ys|=c,t.lanes=c,t.memoizedState=J}}function $o(t,s){if(typeof t!="function")throw Error(d(191,t));t.call(s)}function Ko(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)$o(a[t],s)}var $a=ie(null),Zn=ie(0);function Fo(t,s){t=ys,xe(Zn,t),xe($a,s),ys=t|s.baseLanes}function Ki(){xe(Zn,ys),xe($a,$a.current)}function Fi(){ys=Zn.current,me($a),me(Zn)}var Mt=ie(null),Ht=null;function Os(t){var s=t.alternate;xe(Xe,Xe.current&1),xe(Mt,t),Ht===null&&(s===null||$a.current!==null||s.memoizedState!==null)&&(Ht=t)}function Ji(t){xe(Xe,Xe.current),xe(Mt,t),Ht===null&&(Ht=t)}function Jo(t){t.tag===22?(xe(Xe,Xe.current),xe(Mt,t),Ht===null&&(Ht=t)):Us()}function Us(){xe(Xe,Xe.current),xe(Mt,Mt.current)}function Et(t){me(Mt),Ht===t&&(Ht=null),me(Xe)}var Xe=ie(0);function $n(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||sd(a)||ad(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var us=0,ge=null,Ee=null,Ze=null,Kn=!1,Ka=!1,ga=!1,Fn=0,Ol=0,Fa=null,hh=0;function He(){throw Error(d(321))}function Pi(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Dt(t[a],s[a]))return!1;return!0}function Ii(t,s,a,l,n,r){return us=r,ge=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=t===null||t.memoizedState===null?Ru:xc,ga=!1,r=a(l,n),ga=!1,Ka&&(r=Io(s,a,l,n)),Po(t),r}function Po(t){D.H=ql;var s=Ee!==null&&Ee.next!==null;if(us=0,Ze=Ee=ge=null,Kn=!1,Ol=0,Fa=null,s)throw Error(d(300));t===null||$e||(t=t.dependencies,t!==null&&qn(t)&&($e=!0))}function Io(t,s,a,l){ge=t;var n=0;do{if(Ka&&(Fa=null),Ol=0,Ka=!1,25<=n)throw Error(d(301));if(n+=1,Ze=Ee=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}D.H=Lu,r=s(a,l)}while(Ka);return r}function gh(){var t=D.H,s=t.useState()[0];return s=typeof s.then=="function"?Ul(s):s,t=t.useState()[0],(Ee!==null?Ee.memoizedState:null)!==t&&(ge.flags|=1024),s}function Wi(){var t=Fn!==0;return Fn=0,t}function ec(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function tc(t){if(Kn){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Kn=!1}us=0,Ze=Ee=ge=null,Ka=!1,Ol=Fn=0,Fa=null}function xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?ge.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function Ve(){if(Ee===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=Ee.next;var s=Ze===null?ge.memoizedState:Ze.next;if(s!==null)Ze=s,Ee=t;else{if(t===null)throw ge.alternate===null?Error(d(467)):Error(d(310));Ee=t,t={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Ze===null?ge.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function Jn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(t){var s=Ol;return Ol+=1,Fa===null&&(Fa=[]),t=Go(Fa,t,s),s=ge,(Ze===null?s.memoizedState:Ze.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?Ru:xc),t}function Pn(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ul(t);if(t.$$typeof===P)return st(t)}throw Error(d(438,String(t)))}function sc(t){var s=null,a=ge.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=ge.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(n){return n.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Jn(),ge.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=T;return s.index++,a}function ms(t,s){return typeof s=="function"?s(t):s}function In(t){var s=Ve();return ac(s,Ee,t)}function ac(t,s,a){var l=t.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=a;var n=t.baseQueue,r=l.pending;if(r!==null){if(n!==null){var c=n.next;n.next=r.next,r.next=c}s.baseQueue=n=r,l.pending=null}if(r=t.baseState,n===null)t.memoizedState=r;else{s=n.next;var x=c=null,j=null,Y=s,K=!1;do{var J=Y.lane&-536870913;if(J!==Y.lane?(ye&J)===J:(us&J)===J){var H=Y.revertLane;if(H===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),J===Xa&&(K=!0);else if((us&H)===H){Y=Y.next,H===Xa&&(K=!0);continue}else J={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(x=j=J,c=r):j=j.next=J,ge.lanes|=H,Ys|=H;J=Y.action,ga&&a(r,J),r=Y.hasEagerState?Y.eagerState:a(r,J)}else H={lane:J,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(x=j=H,c=r):j=j.next=H,ge.lanes|=J,Ys|=J;Y=Y.next}while(Y!==null&&Y!==s);if(j===null?c=r:j.next=x,!Dt(r,t.memoizedState)&&($e=!0,K&&(a=Va,a!==null)))throw a;t.memoizedState=r,t.baseState=c,t.baseQueue=j,l.lastRenderedState=r}return n===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function lc(t){var s=Ve(),a=s.queue;if(a===null)throw Error(d(311));a.lastRenderedReducer=t;var l=a.dispatch,n=a.pending,r=s.memoizedState;if(n!==null){a.pending=null;var c=n=n.next;do r=t(r,c.action),c=c.next;while(c!==n);Dt(r,s.memoizedState)||($e=!0),s.memoizedState=r,s.baseQueue===null&&(s.baseState=r),a.lastRenderedState=r}return[r,l]}function Wo(t,s,a){var l=ge,n=Ve(),r=ve;if(r){if(a===void 0)throw Error(d(407));a=a()}else a=s();var c=!Dt((Ee||n).memoizedState,a);if(c&&(n.memoizedState=a,$e=!0),n=n.queue,ic(su.bind(null,l,n,t),[t]),n.getSnapshot!==s||c||Ze!==null&&Ze.memoizedState.tag&1){if(l.flags|=2048,Ja(9,{destroy:void 0},tu.bind(null,l,n,a,s),null),Re===null)throw Error(d(349));r||(us&127)!==0||eu(l,s,a)}return a}function eu(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=ge.updateQueue,s===null?(s=Jn(),ge.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function tu(t,s,a,l){s.value=a,s.getSnapshot=l,au(s)&&lu(t)}function su(t,s,a){return a(function(){au(s)&&lu(t)})}function au(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Dt(t,a)}catch{return!0}}function lu(t){var s=ra(t,2);s!==null&&Nt(s,t,2)}function nc(t){var s=xt();if(typeof t=="function"){var a=t;if(t=a(),ga){As(!0);try{a()}finally{As(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:t},s}function nu(t,s,a,l){return t.baseState=a,ac(t,Ee,typeof l=="function"?l:ms)}function fh(t,s,a,l,n){if(tr(t))throw Error(d(485));if(t=s.action,t!==null){var r={payload:n,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){r.listeners.push(c)}};D.T!==null?a(!0):r.isTransition=!1,l(r),a=s.pending,a===null?(r.next=s.pending=r,ru(s,r)):(r.next=a.next,s.pending=a.next=r)}}function ru(t,s){var a=s.action,l=s.payload,n=t.state;if(s.isTransition){var r=D.T,c={};D.T=c;try{var x=a(n,l),j=D.S;j!==null&&j(c,x),iu(t,s,x)}catch(Y){rc(t,s,Y)}finally{r!==null&&c.types!==null&&(r.types=c.types),D.T=r}}else try{r=a(n,l),iu(t,s,r)}catch(Y){rc(t,s,Y)}}function iu(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){cu(t,s,l)},function(l){return rc(t,s,l)}):cu(t,s,a)}function cu(t,s,a){s.status="fulfilled",s.value=a,du(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,ru(t,a)))}function rc(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,du(s),s=s.next;while(s!==l)}t.action=null}function du(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function ou(t,s){return s}function uu(t,s){if(ve){var a=Re.formState;if(a!==null){e:{var l=ge;if(ve){if(_e){t:{for(var n=_e,r=Yt;n.nodeType!==8;){if(!r){n=null;break t}if(n=Gt(n.nextSibling),n===null){n=null;break t}}r=n.data,n=r==="F!"||r==="F"?n:null}if(n){_e=Gt(n.nextSibling),l=n.data==="F!";break e}}Ts(l)}l=!1}l&&(s=a[0])}}return a=xt(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:s},a.queue=l,a=Eu.bind(null,ge,l),l.dispatch=a,l=nc(!1),r=mc.bind(null,ge,!1,l.queue),l=xt(),n={state:s,dispatch:null,action:t,pending:null},l.queue=n,a=fh.bind(null,ge,n,r,a),n.dispatch=a,l.memoizedState=t,[s,a,!1]}function mu(t){var s=Ve();return xu(s,Ee,t)}function xu(t,s,a){if(s=ac(t,s,ou)[0],t=In(ms)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Ul(s)}catch(c){throw c===Qa?Gn:c}else l=s;s=Ve();var n=s.queue,r=n.dispatch;return a!==s.memoizedState&&(ge.flags|=2048,Ja(9,{destroy:void 0},ph.bind(null,n,a),null)),[l,r,t]}function ph(t,s){t.action=s}function hu(t){var s=Ve(),a=Ee;if(a!==null)return xu(s,a,t);Ve(),s=s.memoizedState,a=Ve();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function Ja(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=ge.updateQueue,s===null&&(s=Jn(),ge.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function gu(){return Ve().memoizedState}function Wn(t,s,a,l){var n=xt();ge.flags|=t,n.memoizedState=Ja(1|s,{destroy:void 0},a,l===void 0?null:l)}function er(t,s,a,l){var n=Ve();l=l===void 0?null:l;var r=n.memoizedState.inst;Ee!==null&&l!==null&&Pi(l,Ee.memoizedState.deps)?n.memoizedState=Ja(s,r,a,l):(ge.flags|=t,n.memoizedState=Ja(1|s,r,a,l))}function fu(t,s){Wn(8390656,8,t,s)}function ic(t,s){er(2048,8,t,s)}function bh(t){ge.flags|=4;var s=ge.updateQueue;if(s===null)s=Jn(),ge.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function pu(t){var s=Ve().memoizedState;return bh({ref:s,nextImpl:t}),function(){if((Ce&2)!==0)throw Error(d(440));return s.impl.apply(void 0,arguments)}}function bu(t,s){return er(4,2,t,s)}function yu(t,s){return er(4,4,t,s)}function ju(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function vu(t,s,a){a=a!=null?a.concat([t]):null,er(4,4,ju.bind(null,s,t),a)}function cc(){}function Nu(t,s){var a=Ve();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Pi(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function wu(t,s){var a=Ve();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Pi(s,l[1]))return l[0];if(l=t(),ga){As(!0);try{t()}finally{As(!1)}}return a.memoizedState=[l,s],l}function dc(t,s,a){return a===void 0||(us&1073741824)!==0&&(ye&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=Sm(),ge.lanes|=t,Ys|=t,a)}function Su(t,s,a,l){return Dt(a,s)?a:$a.current!==null?(t=dc(t,a,l),Dt(t,s)||($e=!0),t):(us&42)===0||(us&1073741824)!==0&&(ye&261930)===0?($e=!0,t.memoizedState=a):(t=Sm(),ge.lanes|=t,Ys|=t,s)}function Cu(t,s,a,l,n){var r=G.p;G.p=r!==0&&8>r?r:8;var c=D.T,x={};D.T=x,mc(t,!1,s,a);try{var j=n(),Y=D.S;if(Y!==null&&Y(x,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var K=xh(j,l);Bl(t,s,K,Rt(t))}else Bl(t,s,l,Rt(t))}catch(J){Bl(t,s,{then:function(){},status:"rejected",reason:J},Rt())}finally{G.p=r,c!==null&&x.types!==null&&(c.types=x.types),D.T=c}}function yh(){}function oc(t,s,a,l){if(t.tag!==5)throw Error(d(476));var n=Au(t).queue;Cu(t,n,s,z,a===null?yh:function(){return Du(t),a(l)})}function Au(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:z},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Du(t){var s=Au(t);s.next===null&&(s=t.alternate.memoizedState),Bl(t,s.next.queue,{},Rt())}function uc(){return st(tn)}function ku(){return Ve().memoizedState}function Mu(){return Ve().memoizedState}function jh(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Rt();t=Ls(a);var l=_s(s,t,a);l!==null&&(Nt(l,s,a),Rl(l,s,a)),s={cache:Yi()},t.payload=s;return}s=s.return}}function vh(t,s,a){var l=Rt();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},tr(t)?Tu(s,a):(a=Mi(t,s,a,l),a!==null&&(Nt(a,t,l),zu(a,s,l)))}function Eu(t,s,a){var l=Rt();Bl(t,s,a,l)}function Bl(t,s,a,l){var n={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(tr(t))Tu(s,n);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=s.lastRenderedReducer,r!==null))try{var c=s.lastRenderedState,x=r(c,a);if(n.hasEagerState=!0,n.eagerState=x,Dt(x,c))return _n(t,s,n,0),Re===null&&Ln(),!1}catch{}if(a=Mi(t,s,n,l),a!==null)return Nt(a,t,l),zu(a,s,l),!0}return!1}function mc(t,s,a,l){if(l={lane:2,revertLane:Vc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},tr(t)){if(s)throw Error(d(479))}else s=Mi(t,a,l,2),s!==null&&Nt(s,t,2)}function tr(t){var s=t.alternate;return t===ge||s!==null&&s===ge}function Tu(t,s){Ka=Kn=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function zu(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Od(t,a)}}var ql={readContext:st,use:Pn,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useLayoutEffect:He,useInsertionEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useSyncExternalStore:He,useId:He,useHostTransitionStatus:He,useFormState:He,useActionState:He,useOptimistic:He,useMemoCache:He,useCacheRefresh:He};ql.useEffectEvent=He;var Ru={readContext:st,use:Pn,useCallback:function(t,s){return xt().memoizedState=[t,s===void 0?null:s],t},useContext:st,useEffect:fu,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Wn(4194308,4,ju.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Wn(4194308,4,t,s)},useInsertionEffect:function(t,s){Wn(4,2,t,s)},useMemo:function(t,s){var a=xt();s=s===void 0?null:s;var l=t();if(ga){As(!0);try{t()}finally{As(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=xt();if(a!==void 0){var n=a(s);if(ga){As(!0);try{a(s)}finally{As(!1)}}}else n=s;return l.memoizedState=l.baseState=n,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},l.queue=t,t=t.dispatch=vh.bind(null,ge,t),[l.memoizedState,t]},useRef:function(t){var s=xt();return t={current:t},s.memoizedState=t},useState:function(t){t=nc(t);var s=t.queue,a=Eu.bind(null,ge,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:cc,useDeferredValue:function(t,s){var a=xt();return dc(a,t,s)},useTransition:function(){var t=nc(!1);return t=Cu.bind(null,ge,t.queue,!0,!1),xt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=ge,n=xt();if(ve){if(a===void 0)throw Error(d(407));a=a()}else{if(a=s(),Re===null)throw Error(d(349));(ye&127)!==0||eu(l,s,a)}n.memoizedState=a;var r={value:a,getSnapshot:s};return n.queue=r,fu(su.bind(null,l,r,t),[t]),l.flags|=2048,Ja(9,{destroy:void 0},tu.bind(null,l,r,a,s),null),a},useId:function(){var t=xt(),s=Re.identifierPrefix;if(ve){var a=Ft,l=Kt;a=(l&~(1<<32-At(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Fn++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=hh++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:uc,useFormState:uu,useActionState:uu,useOptimistic:function(t){var s=xt();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=mc.bind(null,ge,!0,a),a.dispatch=s,[t,s]},useMemoCache:sc,useCacheRefresh:function(){return xt().memoizedState=jh.bind(null,ge)},useEffectEvent:function(t){var s=xt(),a={impl:t};return s.memoizedState=a,function(){if((Ce&2)!==0)throw Error(d(440));return a.impl.apply(void 0,arguments)}}},xc={readContext:st,use:Pn,useCallback:Nu,useContext:st,useEffect:ic,useImperativeHandle:vu,useInsertionEffect:bu,useLayoutEffect:yu,useMemo:wu,useReducer:In,useRef:gu,useState:function(){return In(ms)},useDebugValue:cc,useDeferredValue:function(t,s){var a=Ve();return Su(a,Ee.memoizedState,t,s)},useTransition:function(){var t=In(ms)[0],s=Ve().memoizedState;return[typeof t=="boolean"?t:Ul(t),s]},useSyncExternalStore:Wo,useId:ku,useHostTransitionStatus:uc,useFormState:mu,useActionState:mu,useOptimistic:function(t,s){var a=Ve();return nu(a,Ee,t,s)},useMemoCache:sc,useCacheRefresh:Mu};xc.useEffectEvent=pu;var Lu={readContext:st,use:Pn,useCallback:Nu,useContext:st,useEffect:ic,useImperativeHandle:vu,useInsertionEffect:bu,useLayoutEffect:yu,useMemo:wu,useReducer:lc,useRef:gu,useState:function(){return lc(ms)},useDebugValue:cc,useDeferredValue:function(t,s){var a=Ve();return Ee===null?dc(a,t,s):Su(a,Ee.memoizedState,t,s)},useTransition:function(){var t=lc(ms)[0],s=Ve().memoizedState;return[typeof t=="boolean"?t:Ul(t),s]},useSyncExternalStore:Wo,useId:ku,useHostTransitionStatus:uc,useFormState:hu,useActionState:hu,useOptimistic:function(t,s){var a=Ve();return Ee!==null?nu(a,Ee,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:sc,useCacheRefresh:Mu};Lu.useEffectEvent=pu;function hc(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:p({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var gc={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=Rt(),n=Ls(l);n.payload=s,a!=null&&(n.callback=a),s=_s(t,n,l),s!==null&&(Nt(s,t,l),Rl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=Rt(),n=Ls(l);n.tag=1,n.payload=s,a!=null&&(n.callback=a),s=_s(t,n,l),s!==null&&(Nt(s,t,l),Rl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Rt(),l=Ls(a);l.tag=2,s!=null&&(l.callback=s),s=_s(t,l,a),s!==null&&(Nt(s,t,a),Rl(s,t,a))}};function _u(t,s,a,l,n,r,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,r,c):s.prototype&&s.prototype.isPureReactComponent?!Cl(a,l)||!Cl(n,r):!0}function Ou(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&gc.enqueueReplaceState(s,s.state,null)}function fa(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=p({},a));for(var n in t)a[n]===void 0&&(a[n]=t[n])}return a}function Uu(t){Rn(t)}function Bu(t){console.error(t)}function qu(t){Rn(t)}function sr(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Yu(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function fc(t,s,a){return a=Ls(a),a.tag=3,a.payload={element:null},a.callback=function(){sr(t,s)},a}function Hu(t){return t=Ls(t),t.tag=3,t}function Gu(t,s,a,l){var n=a.type.getDerivedStateFromError;if(typeof n=="function"){var r=l.value;t.payload=function(){return n(r)},t.callback=function(){Yu(s,a,l)}}var c=a.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(t.callback=function(){Yu(s,a,l),typeof n!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})})}function Nh(t,s,a,l,n){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Ga(s,a,n,!0),a=Mt.current,a!==null){switch(a.tag){case 31:case 13:return Ht===null?hr():a.alternate===null&&Ge===0&&(Ge=3),a.flags&=-257,a.flags|=65536,a.lanes=n,l===Xn?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Hc(t,l,n)),!1;case 22:return a.flags|=65536,l===Xn?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Hc(t,l,n)),!1}throw Error(d(435,a.tag))}return Hc(t,l,n),hr(),!1}if(ve)return s=Mt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=n,l!==_i&&(t=Error(d(422),{cause:l}),kl(Ut(t,a)))):(l!==_i&&(s=Error(d(423),{cause:l}),kl(Ut(s,a))),t=t.current.alternate,t.flags|=65536,n&=-n,t.lanes|=n,l=Ut(l,a),n=fc(t.stateNode,l,n),Zi(t,n),Ge!==4&&(Ge=2)),!1;var r=Error(d(520),{cause:l});if(r=Ut(r,a),$l===null?$l=[r]:$l.push(r),Ge!==4&&(Ge=2),s===null)return!0;l=Ut(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=n&-n,a.lanes|=t,t=fc(a.stateNode,l,t),Zi(a,t),!1;case 1:if(s=a.type,r=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Hs===null||!Hs.has(r))))return a.flags|=65536,n&=-n,a.lanes|=n,n=Hu(n),Gu(n,t,a,l),Zi(a,n),!1}a=a.return}while(a!==null);return!1}var pc=Error(d(461)),$e=!1;function at(t,s,a,l){s.child=t===null?Zo(s,null,a,l):ha(s,t.child,a,l)}function Xu(t,s,a,l,n){a=a.render;var r=s.ref;if("ref"in l){var c={};for(var x in l)x!=="ref"&&(c[x]=l[x])}else c=l;return oa(s),l=Ii(t,s,a,c,r,n),x=Wi(),t!==null&&!$e?(ec(t,s,n),xs(t,s,n)):(ve&&x&&Ri(s),s.flags|=1,at(t,s,l,n),s.child)}function Vu(t,s,a,l,n){if(t===null){var r=a.type;return typeof r=="function"&&!Ei(r)&&r.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=r,Qu(t,s,r,l,n)):(t=Un(a.type,null,l,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(r=t.child,!Cc(t,n)){var c=r.memoizedProps;if(a=a.compare,a=a!==null?a:Cl,a(c,l)&&t.ref===s.ref)return xs(t,s,n)}return s.flags|=1,t=is(r,l),t.ref=s.ref,t.return=s,s.child=t}function Qu(t,s,a,l,n){if(t!==null){var r=t.memoizedProps;if(Cl(r,l)&&t.ref===s.ref)if($e=!1,s.pendingProps=l=r,Cc(t,n))(t.flags&131072)!==0&&($e=!0);else return s.lanes=t.lanes,xs(t,s,n)}return bc(t,s,a,l,n)}function Zu(t,s,a,l){var n=l.children,r=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(r=r!==null?r.baseLanes|a:a,t!==null){for(l=s.child=t.child,n=0;l!==null;)n=n|l.lanes|l.childLanes,l=l.sibling;l=n&~r}else l=0,s.child=null;return $u(t,s,r,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Hn(s,r!==null?r.cachePool:null),r!==null?Fo(s,r):Ki(),Jo(s);else return l=s.lanes=536870912,$u(t,s,r!==null?r.baseLanes|a:a,a,l)}else r!==null?(Hn(s,r.cachePool),Fo(s,r),Us(),s.memoizedState=null):(t!==null&&Hn(s,null),Ki(),Us());return at(t,s,n,a),s.child}function Yl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function $u(t,s,a,l,n){var r=Gi();return r=r===null?null:{parent:Qe._currentValue,pool:r},s.memoizedState={baseLanes:a,cachePool:r},t!==null&&Hn(s,null),Ki(),Jo(s),t!==null&&Ga(t,s,l,!0),s.childLanes=n,null}function ar(t,s){return s=nr({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Ku(t,s,a){return ha(s,t.child,null,a),t=ar(s,s.pendingProps),t.flags|=2,Et(s),s.memoizedState=null,t}function wh(t,s,a){var l=s.pendingProps,n=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(ve){if(l.mode==="hidden")return t=ar(s,l),s.lanes=536870912,Yl(null,t);if(Ji(s),(t=_e)?(t=rx(t,Yt),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ms!==null?{id:Kt,overflow:Ft}:null,retryLane:536870912,hydrationErrors:null},a=To(t),a.return=s,s.child=a,tt=s,_e=null)):t=null,t===null)throw Ts(s);return s.lanes=536870912,null}return ar(s,l)}var r=t.memoizedState;if(r!==null){var c=r.dehydrated;if(Ji(s),n)if(s.flags&256)s.flags&=-257,s=Ku(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(d(558));else if($e||Ga(t,s,a,!1),n=(a&t.childLanes)!==0,$e||n){if(l=Re,l!==null&&(c=Ud(l,a),c!==0&&c!==r.retryLane))throw r.retryLane=c,ra(t,c),Nt(l,t,c),pc;hr(),s=Ku(t,s,a)}else t=r.treeContext,_e=Gt(c.nextSibling),tt=s,ve=!0,Es=null,Yt=!1,t!==null&&Lo(s,t),s=ar(s,l),s.flags|=4096;return s}return t=is(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function lr(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(d(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function bc(t,s,a,l,n){return oa(s),a=Ii(t,s,a,l,void 0,n),l=Wi(),t!==null&&!$e?(ec(t,s,n),xs(t,s,n)):(ve&&l&&Ri(s),s.flags|=1,at(t,s,a,n),s.child)}function Fu(t,s,a,l,n,r){return oa(s),s.updateQueue=null,a=Io(s,l,a,n),Po(t),l=Wi(),t!==null&&!$e?(ec(t,s,r),xs(t,s,r)):(ve&&l&&Ri(s),s.flags|=1,at(t,s,a,r),s.child)}function Ju(t,s,a,l,n){if(oa(s),s.stateNode===null){var r=Ba,c=a.contextType;typeof c=="object"&&c!==null&&(r=st(c)),r=new a(l,r),s.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=gc,s.stateNode=r,r._reactInternals=s,r=s.stateNode,r.props=l,r.state=s.memoizedState,r.refs={},Vi(s),c=a.contextType,r.context=typeof c=="object"&&c!==null?st(c):Ba,r.state=s.memoizedState,c=a.getDerivedStateFromProps,typeof c=="function"&&(hc(s,a,c,l),r.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(c=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),c!==r.state&&gc.enqueueReplaceState(r,r.state,null),_l(s,l,r,n),Ll(),r.state=s.memoizedState),typeof r.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){r=s.stateNode;var x=s.memoizedProps,j=fa(a,x);r.props=j;var Y=r.context,K=a.contextType;c=Ba,typeof K=="object"&&K!==null&&(c=st(K));var J=a.getDerivedStateFromProps;K=typeof J=="function"||typeof r.getSnapshotBeforeUpdate=="function",x=s.pendingProps!==x,K||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(x||Y!==c)&&Ou(s,r,l,c),Rs=!1;var H=s.memoizedState;r.state=H,_l(s,l,r,n),Ll(),Y=s.memoizedState,x||H!==Y||Rs?(typeof J=="function"&&(hc(s,a,J,l),Y=s.memoizedState),(j=Rs||_u(s,a,j,l,H,Y,c))?(K||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(s.flags|=4194308)):(typeof r.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=Y),r.props=l,r.state=Y,r.context=c,l=j):(typeof r.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{r=s.stateNode,Qi(t,s),c=s.memoizedProps,K=fa(a,c),r.props=K,J=s.pendingProps,H=r.context,Y=a.contextType,j=Ba,typeof Y=="object"&&Y!==null&&(j=st(Y)),x=a.getDerivedStateFromProps,(Y=typeof x=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(c!==J||H!==j)&&Ou(s,r,l,j),Rs=!1,H=s.memoizedState,r.state=H,_l(s,l,r,n),Ll();var Z=s.memoizedState;c!==J||H!==Z||Rs||t!==null&&t.dependencies!==null&&qn(t.dependencies)?(typeof x=="function"&&(hc(s,a,x,l),Z=s.memoizedState),(K=Rs||_u(s,a,K,l,H,Z,j)||t!==null&&t.dependencies!==null&&qn(t.dependencies))?(Y||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(l,Z,j),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(l,Z,j)),typeof r.componentDidUpdate=="function"&&(s.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof r.componentDidUpdate!="function"||c===t.memoizedProps&&H===t.memoizedState||(s.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&H===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=Z),r.props=l,r.state=Z,r.context=j,l=K):(typeof r.componentDidUpdate!="function"||c===t.memoizedProps&&H===t.memoizedState||(s.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&H===t.memoizedState||(s.flags|=1024),l=!1)}return r=l,lr(t,s),l=(s.flags&128)!==0,r||l?(r=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:r.render(),s.flags|=1,t!==null&&l?(s.child=ha(s,t.child,null,n),s.child=ha(s,null,a,n)):at(t,s,a,n),s.memoizedState=r.state,t=s.child):t=xs(t,s,n),t}function Pu(t,s,a,l){return ca(),s.flags|=256,at(t,s,a,l),s.child}var yc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jc(t){return{baseLanes:t,cachePool:Yo()}}function vc(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=zt),t}function Iu(t,s,a){var l=s.pendingProps,n=!1,r=(s.flags&128)!==0,c;if((c=r)||(c=t!==null&&t.memoizedState===null?!1:(Xe.current&2)!==0),c&&(n=!0,s.flags&=-129),c=(s.flags&32)!==0,s.flags&=-33,t===null){if(ve){if(n?Os(s):Us(),(t=_e)?(t=rx(t,Yt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ms!==null?{id:Kt,overflow:Ft}:null,retryLane:536870912,hydrationErrors:null},a=To(t),a.return=s,s.child=a,tt=s,_e=null)):t=null,t===null)throw Ts(s);return ad(t)?s.lanes=32:s.lanes=536870912,null}var x=l.children;return l=l.fallback,n?(Us(),n=s.mode,x=nr({mode:"hidden",children:x},n),l=ia(l,n,a,null),x.return=s,l.return=s,x.sibling=l,s.child=x,l=s.child,l.memoizedState=jc(a),l.childLanes=vc(t,c,a),s.memoizedState=yc,Yl(null,l)):(Os(s),Nc(s,x))}var j=t.memoizedState;if(j!==null&&(x=j.dehydrated,x!==null)){if(r)s.flags&256?(Os(s),s.flags&=-257,s=wc(t,s,a)):s.memoizedState!==null?(Us(),s.child=t.child,s.flags|=128,s=null):(Us(),x=l.fallback,n=s.mode,l=nr({mode:"visible",children:l.children},n),x=ia(x,n,a,null),x.flags|=2,l.return=s,x.return=s,l.sibling=x,s.child=l,ha(s,t.child,null,a),l=s.child,l.memoizedState=jc(a),l.childLanes=vc(t,c,a),s.memoizedState=yc,s=Yl(null,l));else if(Os(s),ad(x)){if(c=x.nextSibling&&x.nextSibling.dataset,c)var Y=c.dgst;c=Y,l=Error(d(419)),l.stack="",l.digest=c,kl({value:l,source:null,stack:null}),s=wc(t,s,a)}else if($e||Ga(t,s,a,!1),c=(a&t.childLanes)!==0,$e||c){if(c=Re,c!==null&&(l=Ud(c,a),l!==0&&l!==j.retryLane))throw j.retryLane=l,ra(t,l),Nt(c,t,l),pc;sd(x)||hr(),s=wc(t,s,a)}else sd(x)?(s.flags|=192,s.child=t.child,s=null):(t=j.treeContext,_e=Gt(x.nextSibling),tt=s,ve=!0,Es=null,Yt=!1,t!==null&&Lo(s,t),s=Nc(s,l.children),s.flags|=4096);return s}return n?(Us(),x=l.fallback,n=s.mode,j=t.child,Y=j.sibling,l=is(j,{mode:"hidden",children:l.children}),l.subtreeFlags=j.subtreeFlags&65011712,Y!==null?x=is(Y,x):(x=ia(x,n,a,null),x.flags|=2),x.return=s,l.return=s,l.sibling=x,s.child=l,Yl(null,l),l=s.child,x=t.child.memoizedState,x===null?x=jc(a):(n=x.cachePool,n!==null?(j=Qe._currentValue,n=n.parent!==j?{parent:j,pool:j}:n):n=Yo(),x={baseLanes:x.baseLanes|a,cachePool:n}),l.memoizedState=x,l.childLanes=vc(t,c,a),s.memoizedState=yc,Yl(t.child,l)):(Os(s),a=t.child,t=a.sibling,a=is(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(c=s.deletions,c===null?(s.deletions=[t],s.flags|=16):c.push(t)),s.child=a,s.memoizedState=null,a)}function Nc(t,s){return s=nr({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function nr(t,s){return t=kt(22,t,null,s),t.lanes=0,t}function wc(t,s,a){return ha(s,t.child,null,a),t=Nc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Wu(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Bi(t.return,s,a)}function Sc(t,s,a,l,n,r){var c=t.memoizedState;c===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:n,treeForkCount:r}:(c.isBackwards=s,c.rendering=null,c.renderingStartTime=0,c.last=l,c.tail=a,c.tailMode=n,c.treeForkCount=r)}function em(t,s,a){var l=s.pendingProps,n=l.revealOrder,r=l.tail;l=l.children;var c=Xe.current,x=(c&2)!==0;if(x?(c=c&1|2,s.flags|=128):c&=1,xe(Xe,c),at(t,s,l,a),l=ve?Dl:0,!x&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wu(t,a,s);else if(t.tag===19)Wu(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(n){case"forwards":for(a=s.child,n=null;a!==null;)t=a.alternate,t!==null&&$n(t)===null&&(n=a),a=a.sibling;a=n,a===null?(n=s.child,s.child=null):(n=a.sibling,a.sibling=null),Sc(s,!1,n,a,r,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&$n(t)===null){s.child=n;break}t=n.sibling,n.sibling=a,a=n,n=t}Sc(s,!0,a,null,r,l);break;case"together":Sc(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function xs(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Ys|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Ga(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(d(153));if(s.child!==null){for(t=s.child,a=is(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=is(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Cc(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&qn(t)))}function Sh(t,s,a){switch(s.tag){case 3:ut(s,s.stateNode.containerInfo),zs(s,Qe,t.memoizedState.cache),ca();break;case 27:case 5:gt(s);break;case 4:ut(s,s.stateNode.containerInfo);break;case 10:zs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ji(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Os(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Iu(t,s,a):(Os(s),t=xs(t,s,a),t!==null?t.sibling:null);Os(s);break;case 19:var n=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Ga(t,s,a,!1),l=(a&s.childLanes)!==0),n){if(l)return em(t,s,a);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),xe(Xe,Xe.current),l)break;return null;case 22:return s.lanes=0,Zu(t,s,a,s.pendingProps);case 24:zs(s,Qe,t.memoizedState.cache)}return xs(t,s,a)}function tm(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)$e=!0;else{if(!Cc(t,a)&&(s.flags&128)===0)return $e=!1,Sh(t,s,a);$e=(t.flags&131072)!==0}else $e=!1,ve&&(s.flags&1048576)!==0&&Ro(s,Dl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=ma(s.elementType),s.type=t,typeof t=="function")Ei(t)?(l=fa(t,l),s.tag=1,s=Ju(null,s,t,l,a)):(s.tag=0,s=bc(null,s,t,l,a));else{if(t!=null){var n=t.$$typeof;if(n===ae){s.tag=11,s=Xu(null,s,t,l,a);break e}else if(n===X){s.tag=14,s=Vu(null,s,t,l,a);break e}}throw s=le(t)||t,Error(d(306,s,""))}}return s;case 0:return bc(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,n=fa(l,s.pendingProps),Ju(t,s,l,n,a);case 3:e:{if(ut(s,s.stateNode.containerInfo),t===null)throw Error(d(387));l=s.pendingProps;var r=s.memoizedState;n=r.element,Qi(t,s),_l(s,l,null,a);var c=s.memoizedState;if(l=c.cache,zs(s,Qe,l),l!==r.cache&&qi(s,[Qe],a,!0),Ll(),l=c.element,r.isDehydrated)if(r={element:l,isDehydrated:!1,cache:c.cache},s.updateQueue.baseState=r,s.memoizedState=r,s.flags&256){s=Pu(t,s,l,a);break e}else if(l!==n){n=Ut(Error(d(424)),s),kl(n),s=Pu(t,s,l,a);break e}else for(t=s.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,_e=Gt(t.firstChild),tt=s,ve=!0,Es=null,Yt=!0,a=Zo(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ca(),l===n){s=xs(t,s,a);break e}at(t,s,l,a)}s=s.child}return s;case 26:return lr(t,s),t===null?(a=mx(s.type,null,s.pendingProps,null))?s.memoizedState=a:ve||(a=s.type,t=s.pendingProps,l=vr(he.current).createElement(a),l[et]=s,l[ft]=t,lt(l,a,t),Ie(l),s.stateNode=l):s.memoizedState=mx(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return gt(s),t===null&&ve&&(l=s.stateNode=dx(s.type,s.pendingProps,he.current),tt=s,Yt=!0,n=_e,Qs(s.type)?(ld=n,_e=Gt(l.firstChild)):_e=n),at(t,s,s.pendingProps.children,a),lr(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&ve&&((n=l=_e)&&(l=eg(l,s.type,s.pendingProps,Yt),l!==null?(s.stateNode=l,tt=s,_e=Gt(l.firstChild),Yt=!1,n=!0):n=!1),n||Ts(s)),gt(s),n=s.type,r=s.pendingProps,c=t!==null?t.memoizedProps:null,l=r.children,Wc(n,r)?l=null:c!==null&&Wc(n,c)&&(s.flags|=32),s.memoizedState!==null&&(n=Ii(t,s,gh,null,null,a),tn._currentValue=n),lr(t,s),at(t,s,l,a),s.child;case 6:return t===null&&ve&&((t=a=_e)&&(a=tg(a,s.pendingProps,Yt),a!==null?(s.stateNode=a,tt=s,_e=null,t=!0):t=!1),t||Ts(s)),null;case 13:return Iu(t,s,a);case 4:return ut(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=ha(s,null,l,a):at(t,s,l,a),s.child;case 11:return Xu(t,s,s.type,s.pendingProps,a);case 7:return at(t,s,s.pendingProps,a),s.child;case 8:return at(t,s,s.pendingProps.children,a),s.child;case 12:return at(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,zs(s,s.type,l.value),at(t,s,l.children,a),s.child;case 9:return n=s.type._context,l=s.pendingProps.children,oa(s),n=st(n),l=l(n),s.flags|=1,at(t,s,l,a),s.child;case 14:return Vu(t,s,s.type,s.pendingProps,a);case 15:return Qu(t,s,s.type,s.pendingProps,a);case 19:return em(t,s,a);case 31:return wh(t,s,a);case 22:return Zu(t,s,a,s.pendingProps);case 24:return oa(s),l=st(Qe),t===null?(n=Gi(),n===null&&(n=Re,r=Yi(),n.pooledCache=r,r.refCount++,r!==null&&(n.pooledCacheLanes|=a),n=r),s.memoizedState={parent:l,cache:n},Vi(s),zs(s,Qe,n)):((t.lanes&a)!==0&&(Qi(t,s),_l(s,null,null,a),Ll()),n=t.memoizedState,r=s.memoizedState,n.parent!==l?(n={parent:l,cache:l},s.memoizedState=n,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=n),zs(s,Qe,l)):(l=r.cache,zs(s,Qe,l),l!==n.cache&&qi(s,[Qe],a,!0))),at(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(d(156,s.tag))}function hs(t){t.flags|=4}function Ac(t,s,a,l,n){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(n&335544128)===n)if(t.stateNode.complete)t.flags|=8192;else if(km())t.flags|=8192;else throw xa=Xn,Xi}else t.flags&=-16777217}function sm(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!px(s))if(km())t.flags|=8192;else throw xa=Xn,Xi}function rr(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Ld():536870912,t.lanes|=s,el|=s)}function Hl(t,s){if(!ve)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Oe(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var n=t.child;n!==null;)a|=n.lanes|n.childLanes,l|=n.subtreeFlags&65011712,l|=n.flags&65011712,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)a|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function Ch(t,s,a){var l=s.pendingProps;switch(Li(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(s),null;case 1:return Oe(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),os(Qe),de(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ha(s)?hs(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Oi())),Oe(s),null;case 26:var n=s.type,r=s.memoizedState;return t===null?(hs(s),r!==null?(Oe(s),sm(s,r)):(Oe(s),Ac(s,n,null,l,a))):r?r!==t.memoizedState?(hs(s),Oe(s),sm(s,r)):(Oe(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&hs(s),Oe(s),Ac(s,n,t,l,a)),null;case 27:if(mt(s),a=he.current,n=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&hs(s);else{if(!l){if(s.stateNode===null)throw Error(d(166));return Oe(s),null}t=I.current,Ha(s)?_o(s):(t=dx(n,l,a),s.stateNode=t,hs(s))}return Oe(s),null;case 5:if(mt(s),n=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&hs(s);else{if(!l){if(s.stateNode===null)throw Error(d(166));return Oe(s),null}if(r=I.current,Ha(s))_o(s);else{var c=vr(he.current);switch(r){case 1:r=c.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:r=c.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":r=c.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":r=c.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":r=c.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?r.multiple=!0:l.size&&(r.size=l.size);break;default:r=typeof l.is=="string"?c.createElement(n,{is:l.is}):c.createElement(n)}}r[et]=s,r[ft]=l;e:for(c=s.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}s.stateNode=r;e:switch(lt(r,n,l),n){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&hs(s)}}return Oe(s),Ac(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&hs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(d(166));if(t=he.current,Ha(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,n=tt,n!==null)switch(n.tag){case 27:case 5:l=n.memoizedProps}t[et]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Im(t.nodeValue,a)),t||Ts(s,!0)}else t=vr(t).createTextNode(l),t[et]=s,s.stateNode=t}return Oe(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=Ha(s),a!==null){if(t===null){if(!l)throw Error(d(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(d(557));t[et]=s}else ca(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Oe(s),t=!1}else a=Oi(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Et(s),s):(Et(s),null);if((s.flags&128)!==0)throw Error(d(558))}return Oe(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(n=Ha(s),l!==null&&l.dehydrated!==null){if(t===null){if(!n)throw Error(d(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(d(317));n[et]=s}else ca(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Oe(s),n=!1}else n=Oi(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),n=!0;if(!n)return s.flags&256?(Et(s),s):(Et(s),null)}return Et(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,n=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(n=l.alternate.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==n&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),rr(s,s.updateQueue),Oe(s),null);case 4:return de(),t===null&&Kc(s.stateNode.containerInfo),Oe(s),null;case 10:return os(s.type),Oe(s),null;case 19:if(me(Xe),l=s.memoizedState,l===null)return Oe(s),null;if(n=(s.flags&128)!==0,r=l.rendering,r===null)if(n)Hl(l,!1);else{if(Ge!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(r=$n(t),r!==null){for(s.flags|=128,Hl(l,!1),t=r.updateQueue,s.updateQueue=t,rr(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Eo(a,t),a=a.sibling;return xe(Xe,Xe.current&1|2),ve&&cs(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&St()>ur&&(s.flags|=128,n=!0,Hl(l,!1),s.lanes=4194304)}else{if(!n)if(t=$n(r),t!==null){if(s.flags|=128,n=!0,t=t.updateQueue,s.updateQueue=t,rr(s,t),Hl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!r.alternate&&!ve)return Oe(s),null}else 2*St()-l.renderingStartTime>ur&&a!==536870912&&(s.flags|=128,n=!0,Hl(l,!1),s.lanes=4194304);l.isBackwards?(r.sibling=s.child,s.child=r):(t=l.last,t!==null?t.sibling=r:s.child=r,l.last=r)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=St(),t.sibling=null,a=Xe.current,xe(Xe,n?a&1|2:a&1),ve&&cs(s,l.treeForkCount),t):(Oe(s),null);case 22:case 23:return Et(s),Fi(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(Oe(s),s.subtreeFlags&6&&(s.flags|=8192)):Oe(s),a=s.updateQueue,a!==null&&rr(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&me(ua),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),os(Qe),Oe(s),null;case 25:return null;case 30:return null}throw Error(d(156,s.tag))}function Ah(t,s){switch(Li(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return os(Qe),de(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return mt(s),null;case 31:if(s.memoizedState!==null){if(Et(s),s.alternate===null)throw Error(d(340));ca()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Et(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(d(340));ca()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return me(Xe),null;case 4:return de(),null;case 10:return os(s.type),null;case 22:case 23:return Et(s),Fi(),t!==null&&me(ua),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return os(Qe),null;case 25:return null;default:return null}}function am(t,s){switch(Li(s),s.tag){case 3:os(Qe),de();break;case 26:case 27:case 5:mt(s);break;case 4:de();break;case 31:s.memoizedState!==null&&Et(s);break;case 13:Et(s);break;case 19:me(Xe);break;case 10:os(s.type);break;case 22:case 23:Et(s),Fi(),t!==null&&me(ua);break;case 24:os(Qe)}}function Gl(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var n=l.next;a=n;do{if((a.tag&t)===t){l=void 0;var r=a.create,c=a.inst;l=r(),c.destroy=l}a=a.next}while(a!==n)}}catch(x){Me(s,s.return,x)}}function Bs(t,s,a){try{var l=s.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var r=n.next;l=r;do{if((l.tag&t)===t){var c=l.inst,x=c.destroy;if(x!==void 0){c.destroy=void 0,n=s;var j=a,Y=x;try{Y()}catch(K){Me(n,j,K)}}}l=l.next}while(l!==r)}}catch(K){Me(s,s.return,K)}}function lm(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Ko(s,a)}catch(l){Me(t,t.return,l)}}}function nm(t,s,a){a.props=fa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Me(t,s,l)}}function Xl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(n){Me(t,s,n)}}function Jt(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(n){Me(t,s,n)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(n){Me(t,s,n)}else a.current=null}function rm(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(n){Me(t,t.return,n)}}function Dc(t,s,a){try{var l=t.stateNode;Kh(l,t.type,a,s),l[ft]=s}catch(n){Me(t,t.return,n)}}function im(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Qs(t.type)||t.tag===4}function kc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||im(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Qs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mc(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ns));else if(l!==4&&(l===27&&Qs(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Mc(t,s,a),t=t.sibling;t!==null;)Mc(t,s,a),t=t.sibling}function ir(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&Qs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(ir(t,s,a),t=t.sibling;t!==null;)ir(t,s,a),t=t.sibling}function cm(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,n=s.attributes;n.length;)s.removeAttributeNode(n[0]);lt(s,l,a),s[et]=t,s[ft]=a}catch(r){Me(t,t.return,r)}}var gs=!1,Ke=!1,Ec=!1,dm=typeof WeakSet=="function"?WeakSet:Set,We=null;function Dh(t,s){if(t=t.containerInfo,Pc=kr,t=vo(t),wi(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var n=l.anchorOffset,r=l.focusNode;l=l.focusOffset;try{a.nodeType,r.nodeType}catch{a=null;break e}var c=0,x=-1,j=-1,Y=0,K=0,J=t,H=null;t:for(;;){for(var Z;J!==a||n!==0&&J.nodeType!==3||(x=c+n),J!==r||l!==0&&J.nodeType!==3||(j=c+l),J.nodeType===3&&(c+=J.nodeValue.length),(Z=J.firstChild)!==null;)H=J,J=Z;for(;;){if(J===t)break t;if(H===a&&++Y===n&&(x=c),H===r&&++K===l&&(j=c),(Z=J.nextSibling)!==null)break;J=H,H=J.parentNode}J=Z}a=x===-1||j===-1?null:{start:x,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ic={focusedElem:t,selectionRange:a},kr=!1,We=s;We!==null;)if(s=We,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,We=t;else for(;We!==null;){switch(s=We,r=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)n=t[a],n.ref.impl=n.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&r!==null){t=void 0,a=s,n=r.memoizedProps,r=r.memoizedState,l=a.stateNode;try{var re=fa(a.type,n);t=l.getSnapshotBeforeUpdate(re,r),l.__reactInternalSnapshotBeforeUpdate=t}catch(ue){Me(a,a.return,ue)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)td(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":td(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(d(163))}if(t=s.sibling,t!==null){t.return=s.return,We=t;break}We=s.return}}function om(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ps(t,a),l&4&&Gl(5,a);break;case 1:if(ps(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(c){Me(a,a.return,c)}else{var n=fa(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(n,s,t.__reactInternalSnapshotBeforeUpdate)}catch(c){Me(a,a.return,c)}}l&64&&lm(a),l&512&&Xl(a,a.return);break;case 3:if(ps(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Ko(t,s)}catch(c){Me(a,a.return,c)}}break;case 27:s===null&&l&4&&cm(a);case 26:case 5:ps(t,a),s===null&&l&4&&rm(a),l&512&&Xl(a,a.return);break;case 12:ps(t,a);break;case 31:ps(t,a),l&4&&xm(t,a);break;case 13:ps(t,a),l&4&&hm(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Oh.bind(null,a),sg(t,a))));break;case 22:if(l=a.memoizedState!==null||gs,!l){s=s!==null&&s.memoizedState!==null||Ke,n=gs;var r=Ke;gs=l,(Ke=s)&&!r?bs(t,a,(a.subtreeFlags&8772)!==0):ps(t,a),gs=n,Ke=r}break;case 30:break;default:ps(t,a)}}function um(t){var s=t.alternate;s!==null&&(t.alternate=null,um(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&ri(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var qe=null,bt=!1;function fs(t,s,a){for(a=a.child;a!==null;)mm(t,s,a),a=a.sibling}function mm(t,s,a){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(xl,a)}catch{}switch(a.tag){case 26:Ke||Jt(a,s),fs(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ke||Jt(a,s);var l=qe,n=bt;Qs(a.type)&&(qe=a.stateNode,bt=!1),fs(t,s,a),Il(a.stateNode),qe=l,bt=n;break;case 5:Ke||Jt(a,s);case 6:if(l=qe,n=bt,qe=null,fs(t,s,a),qe=l,bt=n,qe!==null)if(bt)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(a.stateNode)}catch(r){Me(a,s,r)}else try{qe.removeChild(a.stateNode)}catch(r){Me(a,s,r)}break;case 18:qe!==null&&(bt?(t=qe,lx(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),cl(t)):lx(qe,a.stateNode));break;case 4:l=qe,n=bt,qe=a.stateNode.containerInfo,bt=!0,fs(t,s,a),qe=l,bt=n;break;case 0:case 11:case 14:case 15:Bs(2,a,s),Ke||Bs(4,a,s),fs(t,s,a);break;case 1:Ke||(Jt(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&nm(a,s,l)),fs(t,s,a);break;case 21:fs(t,s,a);break;case 22:Ke=(l=Ke)||a.memoizedState!==null,fs(t,s,a),Ke=l;break;default:fs(t,s,a)}}function xm(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{cl(t)}catch(a){Me(s,s.return,a)}}}function hm(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{cl(t)}catch(a){Me(s,s.return,a)}}function kh(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new dm),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new dm),s;default:throw Error(d(435,t.tag))}}function cr(t,s){var a=kh(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var n=Uh.bind(null,t,l);l.then(n,n)}})}function yt(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var n=a[l],r=t,c=s,x=c;e:for(;x!==null;){switch(x.tag){case 27:if(Qs(x.type)){qe=x.stateNode,bt=!1;break e}break;case 5:qe=x.stateNode,bt=!1;break e;case 3:case 4:qe=x.stateNode.containerInfo,bt=!0;break e}x=x.return}if(qe===null)throw Error(d(160));mm(r,c,n),qe=null,bt=!1,r=n.alternate,r!==null&&(r.return=null),n.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)gm(s,t),s=s.sibling}var Zt=null;function gm(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:yt(s,t),jt(t),l&4&&(Bs(3,t,t.return),Gl(3,t),Bs(5,t,t.return));break;case 1:yt(s,t),jt(t),l&512&&(Ke||a===null||Jt(a,a.return)),l&64&&gs&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var n=Zt;if(yt(s,t),jt(t),l&512&&(Ke||a===null||Jt(a,a.return)),l&4){var r=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,n=n.ownerDocument||n;t:switch(l){case"title":r=n.getElementsByTagName("title")[0],(!r||r[fl]||r[et]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=n.createElement(l),n.head.insertBefore(r,n.querySelector("head > title"))),lt(r,l,a),r[et]=t,Ie(r),l=r;break e;case"link":var c=gx("link","href",n).get(l+(a.href||""));if(c){for(var x=0;x<c.length;x++)if(r=c[x],r.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&r.getAttribute("rel")===(a.rel==null?null:a.rel)&&r.getAttribute("title")===(a.title==null?null:a.title)&&r.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){c.splice(x,1);break t}}r=n.createElement(l),lt(r,l,a),n.head.appendChild(r);break;case"meta":if(c=gx("meta","content",n).get(l+(a.content||""))){for(x=0;x<c.length;x++)if(r=c[x],r.getAttribute("content")===(a.content==null?null:""+a.content)&&r.getAttribute("name")===(a.name==null?null:a.name)&&r.getAttribute("property")===(a.property==null?null:a.property)&&r.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&r.getAttribute("charset")===(a.charSet==null?null:a.charSet)){c.splice(x,1);break t}}r=n.createElement(l),lt(r,l,a),n.head.appendChild(r);break;default:throw Error(d(468,l))}r[et]=t,Ie(r),l=r}t.stateNode=l}else fx(n,t.type,t.stateNode);else t.stateNode=hx(n,l,t.memoizedProps);else r!==l?(r===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):r.count--,l===null?fx(n,t.type,t.stateNode):hx(n,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Dc(t,t.memoizedProps,a.memoizedProps)}break;case 27:yt(s,t),jt(t),l&512&&(Ke||a===null||Jt(a,a.return)),a!==null&&l&4&&Dc(t,t.memoizedProps,a.memoizedProps);break;case 5:if(yt(s,t),jt(t),l&512&&(Ke||a===null||Jt(a,a.return)),t.flags&32){n=t.stateNode;try{Ta(n,"")}catch(re){Me(t,t.return,re)}}l&4&&t.stateNode!=null&&(n=t.memoizedProps,Dc(t,n,a!==null?a.memoizedProps:n)),l&1024&&(Ec=!0);break;case 6:if(yt(s,t),jt(t),l&4){if(t.stateNode===null)throw Error(d(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(re){Me(t,t.return,re)}}break;case 3:if(Sr=null,n=Zt,Zt=Nr(s.containerInfo),yt(s,t),Zt=n,jt(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{cl(s.containerInfo)}catch(re){Me(t,t.return,re)}Ec&&(Ec=!1,fm(t));break;case 4:l=Zt,Zt=Nr(t.stateNode.containerInfo),yt(s,t),jt(t),Zt=l;break;case 12:yt(s,t),jt(t);break;case 31:yt(s,t),jt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,cr(t,l)));break;case 13:yt(s,t),jt(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(or=St()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,cr(t,l)));break;case 22:n=t.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,Y=gs,K=Ke;if(gs=Y||n,Ke=K||j,yt(s,t),Ke=K,gs=Y,jt(t),l&8192)e:for(s=t.stateNode,s._visibility=n?s._visibility&-2:s._visibility|1,n&&(a===null||j||gs||Ke||pa(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){j=a=s;try{if(r=j.stateNode,n)c=r.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{x=j.stateNode;var J=j.memoizedProps.style,H=J!=null&&J.hasOwnProperty("display")?J.display:null;x.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(re){Me(j,j.return,re)}}}else if(s.tag===6){if(a===null){j=s;try{j.stateNode.nodeValue=n?"":j.memoizedProps}catch(re){Me(j,j.return,re)}}}else if(s.tag===18){if(a===null){j=s;try{var Z=j.stateNode;n?nx(Z,!0):nx(j.stateNode,!1)}catch(re){Me(j,j.return,re)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,cr(t,a))));break;case 19:yt(s,t),jt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,cr(t,l)));break;case 30:break;case 21:break;default:yt(s,t),jt(t)}}function jt(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(im(l)){a=l;break}l=l.return}if(a==null)throw Error(d(160));switch(a.tag){case 27:var n=a.stateNode,r=kc(t);ir(t,r,n);break;case 5:var c=a.stateNode;a.flags&32&&(Ta(c,""),a.flags&=-33);var x=kc(t);ir(t,x,c);break;case 3:case 4:var j=a.stateNode.containerInfo,Y=kc(t);Mc(t,Y,j);break;default:throw Error(d(161))}}catch(K){Me(t,t.return,K)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function fm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;fm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function ps(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)om(t,s.alternate,s),s=s.sibling}function pa(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Bs(4,s,s.return),pa(s);break;case 1:Jt(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&nm(s,s.return,a),pa(s);break;case 27:Il(s.stateNode);case 26:case 5:Jt(s,s.return),pa(s);break;case 22:s.memoizedState===null&&pa(s);break;case 30:pa(s);break;default:pa(s)}t=t.sibling}}function bs(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,n=t,r=s,c=r.flags;switch(r.tag){case 0:case 11:case 15:bs(n,r,a),Gl(4,r);break;case 1:if(bs(n,r,a),l=r,n=l.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(Y){Me(l,l.return,Y)}if(l=r,n=l.updateQueue,n!==null){var x=l.stateNode;try{var j=n.shared.hiddenCallbacks;if(j!==null)for(n.shared.hiddenCallbacks=null,n=0;n<j.length;n++)$o(j[n],x)}catch(Y){Me(l,l.return,Y)}}a&&c&64&&lm(r),Xl(r,r.return);break;case 27:cm(r);case 26:case 5:bs(n,r,a),a&&l===null&&c&4&&rm(r),Xl(r,r.return);break;case 12:bs(n,r,a);break;case 31:bs(n,r,a),a&&c&4&&xm(n,r);break;case 13:bs(n,r,a),a&&c&4&&hm(n,r);break;case 22:r.memoizedState===null&&bs(n,r,a),Xl(r,r.return);break;case 30:break;default:bs(n,r,a)}s=s.sibling}}function Tc(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Ml(a))}function zc(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Ml(t))}function $t(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)pm(t,s,a,l),s=s.sibling}function pm(t,s,a,l){var n=s.flags;switch(s.tag){case 0:case 11:case 15:$t(t,s,a,l),n&2048&&Gl(9,s);break;case 1:$t(t,s,a,l);break;case 3:$t(t,s,a,l),n&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Ml(t)));break;case 12:if(n&2048){$t(t,s,a,l),t=s.stateNode;try{var r=s.memoizedProps,c=r.id,x=r.onPostCommit;typeof x=="function"&&x(c,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(j){Me(s,s.return,j)}}else $t(t,s,a,l);break;case 31:$t(t,s,a,l);break;case 13:$t(t,s,a,l);break;case 23:break;case 22:r=s.stateNode,c=s.alternate,s.memoizedState!==null?r._visibility&2?$t(t,s,a,l):Vl(t,s):r._visibility&2?$t(t,s,a,l):(r._visibility|=2,Pa(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),n&2048&&Tc(c,s);break;case 24:$t(t,s,a,l),n&2048&&zc(s.alternate,s);break;default:$t(t,s,a,l)}}function Pa(t,s,a,l,n){for(n=n&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var r=t,c=s,x=a,j=l,Y=c.flags;switch(c.tag){case 0:case 11:case 15:Pa(r,c,x,j,n),Gl(8,c);break;case 23:break;case 22:var K=c.stateNode;c.memoizedState!==null?K._visibility&2?Pa(r,c,x,j,n):Vl(r,c):(K._visibility|=2,Pa(r,c,x,j,n)),n&&Y&2048&&Tc(c.alternate,c);break;case 24:Pa(r,c,x,j,n),n&&Y&2048&&zc(c.alternate,c);break;default:Pa(r,c,x,j,n)}s=s.sibling}}function Vl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,n=l.flags;switch(l.tag){case 22:Vl(a,l),n&2048&&Tc(l.alternate,l);break;case 24:Vl(a,l),n&2048&&zc(l.alternate,l);break;default:Vl(a,l)}s=s.sibling}}var Ql=8192;function Ia(t,s,a){if(t.subtreeFlags&Ql)for(t=t.child;t!==null;)bm(t,s,a),t=t.sibling}function bm(t,s,a){switch(t.tag){case 26:Ia(t,s,a),t.flags&Ql&&t.memoizedState!==null&&hg(a,Zt,t.memoizedState,t.memoizedProps);break;case 5:Ia(t,s,a);break;case 3:case 4:var l=Zt;Zt=Nr(t.stateNode.containerInfo),Ia(t,s,a),Zt=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ql,Ql=16777216,Ia(t,s,a),Ql=l):Ia(t,s,a));break;default:Ia(t,s,a)}}function ym(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Zl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];We=l,vm(l,t)}ym(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)jm(t),t=t.sibling}function jm(t){switch(t.tag){case 0:case 11:case 15:Zl(t),t.flags&2048&&Bs(9,t,t.return);break;case 3:Zl(t);break;case 12:Zl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,dr(t)):Zl(t);break;default:Zl(t)}}function dr(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];We=l,vm(l,t)}ym(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Bs(8,s,s.return),dr(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,dr(s));break;default:dr(s)}t=t.sibling}}function vm(t,s){for(;We!==null;){var a=We;switch(a.tag){case 0:case 11:case 15:Bs(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ml(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,We=l;else e:for(a=t;We!==null;){l=We;var n=l.sibling,r=l.return;if(um(l),l===a){We=null;break e}if(n!==null){n.return=r,We=n;break e}We=r}}}var Mh={getCacheForType:function(t){var s=st(Qe),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return st(Qe).controller.signal}},Eh=typeof WeakMap=="function"?WeakMap:Map,Ce=0,Re=null,pe=null,ye=0,ke=0,Tt=null,qs=!1,Wa=!1,Rc=!1,ys=0,Ge=0,Ys=0,ba=0,Lc=0,zt=0,el=0,$l=null,vt=null,_c=!1,or=0,Nm=0,ur=1/0,mr=null,Hs=null,Je=0,Gs=null,tl=null,js=0,Oc=0,Uc=null,wm=null,Kl=0,Bc=null;function Rt(){return(Ce&2)!==0&&ye!==0?ye&-ye:D.T!==null?Vc():Bd()}function Sm(){if(zt===0)if((ye&536870912)===0||ve){var t=jn;jn<<=1,(jn&3932160)===0&&(jn=262144),zt=t}else zt=536870912;return t=Mt.current,t!==null&&(t.flags|=32),zt}function Nt(t,s,a){(t===Re&&(ke===2||ke===9)||t.cancelPendingCommit!==null)&&(sl(t,0),Xs(t,ye,zt,!1)),gl(t,a),((Ce&2)===0||t!==Re)&&(t===Re&&((Ce&2)===0&&(ba|=a),Ge===4&&Xs(t,ye,zt,!1)),Pt(t))}function Cm(t,s,a){if((Ce&6)!==0)throw Error(d(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||hl(t,s),n=l?Rh(t,s):Yc(t,s,!0),r=l;do{if(n===0){Wa&&!l&&Xs(t,s,0,!1);break}else{if(a=t.current.alternate,r&&!Th(a)){n=Yc(t,s,!1),r=!1;continue}if(n===2){if(r=s,t.errorRecoveryDisabledLanes&r)var c=0;else c=t.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){s=c;e:{var x=t;n=$l;var j=x.current.memoizedState.isDehydrated;if(j&&(sl(x,c).flags|=256),c=Yc(x,c,!1),c!==2){if(Rc&&!j){x.errorRecoveryDisabledLanes|=r,ba|=r,n=4;break e}r=vt,vt=n,r!==null&&(vt===null?vt=r:vt.push.apply(vt,r))}n=c}if(r=!1,n!==2)continue}}if(n===1){sl(t,0),Xs(t,s,0,!0);break}e:{switch(l=t,r=n,r){case 0:case 1:throw Error(d(345));case 4:if((s&4194048)!==s)break;case 6:Xs(l,s,zt,!qs);break e;case 2:vt=null;break;case 3:case 5:break;default:throw Error(d(329))}if((s&62914560)===s&&(n=or+300-St(),10<n)){if(Xs(l,s,zt,!qs),Nn(l,0,!0)!==0)break e;js=s,l.timeoutHandle=sx(Am.bind(null,l,a,vt,mr,_c,s,zt,ba,el,qs,r,"Throttled",-0,0),n);break e}Am(l,a,vt,mr,_c,s,zt,ba,el,qs,r,null,-0,0)}}break}while(!0);Pt(t)}function Am(t,s,a,l,n,r,c,x,j,Y,K,J,H,Z){if(t.timeoutHandle=-1,J=s.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ns},bm(s,r,J);var re=(r&62914560)===r?or-St():(r&4194048)===r?Nm-St():0;if(re=gg(J,re),re!==null){js=r,t.cancelPendingCommit=re(Lm.bind(null,t,s,r,a,l,n,c,x,j,K,J,null,H,Z)),Xs(t,r,c,!Y);return}}Lm(t,s,r,a,l,n,c,x,j)}function Th(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var n=a[l],r=n.getSnapshot;n=n.value;try{if(!Dt(r(),n))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Xs(t,s,a,l){s&=~Lc,s&=~ba,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var n=s;0<n;){var r=31-At(n),c=1<<r;l[r]=-1,n&=~c}a!==0&&_d(t,a,s)}function xr(){return(Ce&6)===0?(Fl(0),!1):!0}function qc(){if(pe!==null){if(ke===0)var t=pe.return;else t=pe,ds=da=null,tc(t),Za=null,Tl=0,t=pe;for(;t!==null;)am(t.alternate,t),t=t.return;pe=null}}function sl(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Ph(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),js=0,qc(),Re=t,pe=a=is(t.current,null),ye=s,ke=0,Tt=null,qs=!1,Wa=hl(t,s),Rc=!1,el=zt=Lc=ba=Ys=Ge=0,vt=$l=null,_c=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var n=31-At(l),r=1<<n;s|=t[n],l&=~r}return ys=s,Ln(),a}function Dm(t,s){ge=null,D.H=ql,s===Qa||s===Gn?(s=Xo(),ke=3):s===Xi?(s=Xo(),ke=4):ke=s===pc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Tt=s,pe===null&&(Ge=1,sr(t,Ut(s,t.current)))}function km(){var t=Mt.current;return t===null?!0:(ye&4194048)===ye?Ht===null:(ye&62914560)===ye||(ye&536870912)!==0?t===Ht:!1}function Mm(){var t=D.H;return D.H=ql,t===null?ql:t}function Em(){var t=D.A;return D.A=Mh,t}function hr(){Ge=4,qs||(ye&4194048)!==ye&&Mt.current!==null||(Wa=!0),(Ys&134217727)===0&&(ba&134217727)===0||Re===null||Xs(Re,ye,zt,!1)}function Yc(t,s,a){var l=Ce;Ce|=2;var n=Mm(),r=Em();(Re!==t||ye!==s)&&(mr=null,sl(t,s)),s=!1;var c=Ge;e:do try{if(ke!==0&&pe!==null){var x=pe,j=Tt;switch(ke){case 8:qc(),c=6;break e;case 3:case 2:case 9:case 6:Mt.current===null&&(s=!0);var Y=ke;if(ke=0,Tt=null,al(t,x,j,Y),a&&Wa){c=0;break e}break;default:Y=ke,ke=0,Tt=null,al(t,x,j,Y)}}zh(),c=Ge;break}catch(K){Dm(t,K)}while(!0);return s&&t.shellSuspendCounter++,ds=da=null,Ce=l,D.H=n,D.A=r,pe===null&&(Re=null,ye=0,Ln()),c}function zh(){for(;pe!==null;)Tm(pe)}function Rh(t,s){var a=Ce;Ce|=2;var l=Mm(),n=Em();Re!==t||ye!==s?(mr=null,ur=St()+500,sl(t,s)):Wa=hl(t,s);e:do try{if(ke!==0&&pe!==null){s=pe;var r=Tt;t:switch(ke){case 1:ke=0,Tt=null,al(t,s,r,1);break;case 2:case 9:if(Ho(r)){ke=0,Tt=null,zm(s);break}s=function(){ke!==2&&ke!==9||Re!==t||(ke=7),Pt(t)},r.then(s,s);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:Ho(r)?(ke=0,Tt=null,zm(s)):(ke=0,Tt=null,al(t,s,r,7));break;case 5:var c=null;switch(pe.tag){case 26:c=pe.memoizedState;case 5:case 27:var x=pe;if(c?px(c):x.stateNode.complete){ke=0,Tt=null;var j=x.sibling;if(j!==null)pe=j;else{var Y=x.return;Y!==null?(pe=Y,gr(Y)):pe=null}break t}}ke=0,Tt=null,al(t,s,r,5);break;case 6:ke=0,Tt=null,al(t,s,r,6);break;case 8:qc(),Ge=6;break e;default:throw Error(d(462))}}Lh();break}catch(K){Dm(t,K)}while(!0);return ds=da=null,D.H=l,D.A=n,Ce=a,pe!==null?0:(Re=null,ye=0,Ln(),Ge)}function Lh(){for(;pe!==null&&!a0();)Tm(pe)}function Tm(t){var s=tm(t.alternate,t,ys);t.memoizedProps=t.pendingProps,s===null?gr(t):pe=s}function zm(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=Fu(a,s,s.pendingProps,s.type,void 0,ye);break;case 11:s=Fu(a,s,s.pendingProps,s.type.render,s.ref,ye);break;case 5:tc(s);default:am(a,s),s=pe=Eo(s,ys),s=tm(a,s,ys)}t.memoizedProps=t.pendingProps,s===null?gr(t):pe=s}function al(t,s,a,l){ds=da=null,tc(s),Za=null,Tl=0;var n=s.return;try{if(Nh(t,n,s,a,ye)){Ge=1,sr(t,Ut(a,t.current)),pe=null;return}}catch(r){if(n!==null)throw pe=n,r;Ge=1,sr(t,Ut(a,t.current)),pe=null;return}s.flags&32768?(ve||l===1?t=!0:Wa||(ye&536870912)!==0?t=!1:(qs=t=!0,(l===2||l===9||l===3||l===6)&&(l=Mt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Rm(s,t)):gr(s)}function gr(t){var s=t;do{if((s.flags&32768)!==0){Rm(s,qs);return}t=s.return;var a=Ch(s.alternate,s,ys);if(a!==null){pe=a;return}if(s=s.sibling,s!==null){pe=s;return}pe=s=t}while(s!==null);Ge===0&&(Ge=5)}function Rm(t,s){do{var a=Ah(t.alternate,t);if(a!==null){a.flags&=32767,pe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){pe=t;return}pe=t=a}while(t!==null);Ge=6,pe=null}function Lm(t,s,a,l,n,r,c,x,j){t.cancelPendingCommit=null;do fr();while(Je!==0);if((Ce&6)!==0)throw Error(d(327));if(s!==null){if(s===t.current)throw Error(d(177));if(r=s.lanes|s.childLanes,r|=ki,x0(t,a,r,c,x,j),t===Re&&(pe=Re=null,ye=0),tl=s,Gs=t,js=a,Oc=r,Uc=n,wm=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Bh(bn,function(){return qm(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=D.T,D.T=null,n=G.p,G.p=2,c=Ce,Ce|=4;try{Dh(t,s,a)}finally{Ce=c,G.p=n,D.T=l}}Je=1,_m(),Om(),Um()}}function _m(){if(Je===1){Je=0;var t=Gs,s=tl,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=D.T,D.T=null;var l=G.p;G.p=2;var n=Ce;Ce|=4;try{gm(s,t);var r=Ic,c=vo(t.containerInfo),x=r.focusedElem,j=r.selectionRange;if(c!==x&&x&&x.ownerDocument&&jo(x.ownerDocument.documentElement,x)){if(j!==null&&wi(x)){var Y=j.start,K=j.end;if(K===void 0&&(K=Y),"selectionStart"in x)x.selectionStart=Y,x.selectionEnd=Math.min(K,x.value.length);else{var J=x.ownerDocument||document,H=J&&J.defaultView||window;if(H.getSelection){var Z=H.getSelection(),re=x.textContent.length,ue=Math.min(j.start,re),ze=j.end===void 0?ue:Math.min(j.end,re);!Z.extend&&ue>ze&&(c=ze,ze=ue,ue=c);var L=yo(x,ue),C=yo(x,ze);if(L&&C&&(Z.rangeCount!==1||Z.anchorNode!==L.node||Z.anchorOffset!==L.offset||Z.focusNode!==C.node||Z.focusOffset!==C.offset)){var q=J.createRange();q.setStart(L.node,L.offset),Z.removeAllRanges(),ue>ze?(Z.addRange(q),Z.extend(C.node,C.offset)):(q.setEnd(C.node,C.offset),Z.addRange(q))}}}}for(J=[],Z=x;Z=Z.parentNode;)Z.nodeType===1&&J.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<J.length;x++){var F=J[x];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}kr=!!Pc,Ic=Pc=null}finally{Ce=n,G.p=l,D.T=a}}t.current=s,Je=2}}function Om(){if(Je===2){Je=0;var t=Gs,s=tl,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=D.T,D.T=null;var l=G.p;G.p=2;var n=Ce;Ce|=4;try{om(t,s.alternate,s)}finally{Ce=n,G.p=l,D.T=a}}Je=3}}function Um(){if(Je===4||Je===3){Je=0,l0();var t=Gs,s=tl,a=js,l=wm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Je=5:(Je=0,tl=Gs=null,Bm(t,t.pendingLanes));var n=t.pendingLanes;if(n===0&&(Hs=null),li(a),s=s.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(xl,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=D.T,n=G.p,G.p=2,D.T=null;try{for(var r=t.onRecoverableError,c=0;c<l.length;c++){var x=l[c];r(x.value,{componentStack:x.stack})}}finally{D.T=s,G.p=n}}(js&3)!==0&&fr(),Pt(t),n=t.pendingLanes,(a&261930)!==0&&(n&42)!==0?t===Bc?Kl++:(Kl=0,Bc=t):Kl=0,Fl(0)}}function Bm(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Ml(s)))}function fr(){return _m(),Om(),Um(),qm()}function qm(){if(Je!==5)return!1;var t=Gs,s=Oc;Oc=0;var a=li(js),l=D.T,n=G.p;try{G.p=32>a?32:a,D.T=null,a=Uc,Uc=null;var r=Gs,c=js;if(Je=0,tl=Gs=null,js=0,(Ce&6)!==0)throw Error(d(331));var x=Ce;if(Ce|=4,jm(r.current),pm(r,r.current,c,a),Ce=x,Fl(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(xl,r)}catch{}return!0}finally{G.p=n,D.T=l,Bm(t,s)}}function Ym(t,s,a){s=Ut(a,s),s=fc(t.stateNode,s,2),t=_s(t,s,2),t!==null&&(gl(t,2),Pt(t))}function Me(t,s,a){if(t.tag===3)Ym(t,t,a);else for(;s!==null;){if(s.tag===3){Ym(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Hs===null||!Hs.has(l))){t=Ut(a,t),a=Hu(2),l=_s(s,a,2),l!==null&&(Gu(a,l,s,t),gl(l,2),Pt(l));break}}s=s.return}}function Hc(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Eh;var n=new Set;l.set(s,n)}else n=l.get(s),n===void 0&&(n=new Set,l.set(s,n));n.has(a)||(Rc=!0,n.add(a),t=_h.bind(null,t,s,a),s.then(t,t))}function _h(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Re===t&&(ye&a)===a&&(Ge===4||Ge===3&&(ye&62914560)===ye&&300>St()-or?(Ce&2)===0&&sl(t,0):Lc|=a,el===ye&&(el=0)),Pt(t)}function Hm(t,s){s===0&&(s=Ld()),t=ra(t,s),t!==null&&(gl(t,s),Pt(t))}function Oh(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Hm(t,a)}function Uh(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,n=t.memoizedState;n!==null&&(a=n.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(d(314))}l!==null&&l.delete(s),Hm(t,a)}function Bh(t,s){return ei(t,s)}var pr=null,ll=null,Gc=!1,br=!1,Xc=!1,Vs=0;function Pt(t){t!==ll&&t.next===null&&(ll===null?pr=ll=t:ll=ll.next=t),br=!0,Gc||(Gc=!0,Yh())}function Fl(t,s){if(!Xc&&br){Xc=!0;do for(var a=!1,l=pr;l!==null;){if(t!==0){var n=l.pendingLanes;if(n===0)var r=0;else{var c=l.suspendedLanes,x=l.pingedLanes;r=(1<<31-At(42|t)+1)-1,r&=n&~(c&~x),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(a=!0,Qm(l,r))}else r=ye,r=Nn(l,l===Re?r:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(r&3)===0||hl(l,r)||(a=!0,Qm(l,r));l=l.next}while(a);Xc=!1}}function qh(){Gm()}function Gm(){br=Gc=!1;var t=0;Vs!==0&&Jh()&&(t=Vs);for(var s=St(),a=null,l=pr;l!==null;){var n=l.next,r=Xm(l,s);r===0?(l.next=null,a===null?pr=n:a.next=n,n===null&&(ll=a)):(a=l,(t!==0||(r&3)!==0)&&(br=!0)),l=n}Je!==0&&Je!==5||Fl(t),Vs!==0&&(Vs=0)}function Xm(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,n=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var c=31-At(r),x=1<<c,j=n[c];j===-1?((x&a)===0||(x&l)!==0)&&(n[c]=m0(x,s)):j<=s&&(t.expiredLanes|=x),r&=~x}if(s=Re,a=ye,a=Nn(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(ke===2||ke===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ti(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||hl(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&ti(l),li(a)){case 2:case 8:a=zd;break;case 32:a=bn;break;case 268435456:a=Rd;break;default:a=bn}return l=Vm.bind(null,t),a=ei(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&ti(l),t.callbackPriority=2,t.callbackNode=null,2}function Vm(t,s){if(Je!==0&&Je!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(fr()&&t.callbackNode!==a)return null;var l=ye;return l=Nn(t,t===Re?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Cm(t,l,s),Xm(t,St()),t.callbackNode!=null&&t.callbackNode===a?Vm.bind(null,t):null)}function Qm(t,s){if(fr())return null;Cm(t,s,!0)}function Yh(){Ih(function(){(Ce&6)!==0?ei(Td,qh):Gm()})}function Vc(){if(Vs===0){var t=Xa;t===0&&(t=yn,yn<<=1,(yn&261888)===0&&(yn=256)),Vs=t}return Vs}function Zm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:An(""+t)}function $m(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function Hh(t,s,a,l,n){if(s==="submit"&&a&&a.stateNode===n){var r=Zm((n[ft]||null).action),c=l.submitter;c&&(s=(s=c[ft]||null)?Zm(s.formAction):c.getAttribute("formAction"),s!==null&&(r=s,c=null));var x=new En("action","action",null,l,n);t.push({event:x,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Vs!==0){var j=c?$m(n,c):new FormData(n);oc(a,{pending:!0,data:j,method:n.method,action:r},null,j)}}else typeof r=="function"&&(x.preventDefault(),j=c?$m(n,c):new FormData(n),oc(a,{pending:!0,data:j,method:n.method,action:r},r,j))},currentTarget:n}]})}}for(var Qc=0;Qc<Di.length;Qc++){var Zc=Di[Qc],Gh=Zc.toLowerCase(),Xh=Zc[0].toUpperCase()+Zc.slice(1);Qt(Gh,"on"+Xh)}Qt(So,"onAnimationEnd"),Qt(Co,"onAnimationIteration"),Qt(Ao,"onAnimationStart"),Qt("dblclick","onDoubleClick"),Qt("focusin","onFocus"),Qt("focusout","onBlur"),Qt(nh,"onTransitionRun"),Qt(rh,"onTransitionStart"),Qt(ih,"onTransitionCancel"),Qt(Do,"onTransitionEnd"),Ma("onMouseEnter",["mouseout","mouseover"]),Ma("onMouseLeave",["mouseout","mouseover"]),Ma("onPointerEnter",["pointerout","pointerover"]),Ma("onPointerLeave",["pointerout","pointerover"]),sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sa("onBeforeInput",["compositionend","keypress","textInput","paste"]),sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jl));function Km(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],n=l.event;l=l.listeners;e:{var r=void 0;if(s)for(var c=l.length-1;0<=c;c--){var x=l[c],j=x.instance,Y=x.currentTarget;if(x=x.listener,j!==r&&n.isPropagationStopped())break e;r=x,n.currentTarget=Y;try{r(n)}catch(K){Rn(K)}n.currentTarget=null,r=j}else for(c=0;c<l.length;c++){if(x=l[c],j=x.instance,Y=x.currentTarget,x=x.listener,j!==r&&n.isPropagationStopped())break e;r=x,n.currentTarget=Y;try{r(n)}catch(K){Rn(K)}n.currentTarget=null,r=j}}}}function be(t,s){var a=s[ni];a===void 0&&(a=s[ni]=new Set);var l=t+"__bubble";a.has(l)||(Fm(s,t,2,!1),a.add(l))}function $c(t,s,a){var l=0;s&&(l|=4),Fm(a,t,l,s)}var yr="_reactListening"+Math.random().toString(36).slice(2);function Kc(t){if(!t[yr]){t[yr]=!0,Hd.forEach(function(a){a!=="selectionchange"&&(Vh.has(a)||$c(a,!1,t),$c(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[yr]||(s[yr]=!0,$c("selectionchange",!1,s))}}function Fm(t,s,a,l){switch(Sx(s)){case 2:var n=bg;break;case 8:n=yg;break;default:n=dd}a=n.bind(null,s,a,t),n=void 0,!hi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),l?n!==void 0?t.addEventListener(s,a,{capture:!0,passive:n}):t.addEventListener(s,a,!0):n!==void 0?t.addEventListener(s,a,{passive:n}):t.addEventListener(s,a,!1)}function Fc(t,s,a,l,n){var r=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var c=l.tag;if(c===3||c===4){var x=l.stateNode.containerInfo;if(x===n)break;if(c===4)for(c=l.return;c!==null;){var j=c.tag;if((j===3||j===4)&&c.stateNode.containerInfo===n)return;c=c.return}for(;x!==null;){if(c=Aa(x),c===null)return;if(j=c.tag,j===5||j===6||j===26||j===27){l=r=c;continue e}x=x.parentNode}}l=l.return}Wd(function(){var Y=r,K=mi(a),J=[];e:{var H=ko.get(t);if(H!==void 0){var Z=En,re=t;switch(t){case"keypress":if(kn(a)===0)break e;case"keydown":case"keyup":Z=U0;break;case"focusin":re="focus",Z=bi;break;case"focusout":re="blur",Z=bi;break;case"beforeblur":case"afterblur":Z=bi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=so;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=C0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Y0;break;case So:case Co:case Ao:Z=k0;break;case Do:Z=G0;break;case"scroll":case"scrollend":Z=w0;break;case"wheel":Z=V0;break;case"copy":case"cut":case"paste":Z=E0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=lo;break;case"toggle":case"beforetoggle":Z=Z0}var ue=(s&4)!==0,ze=!ue&&(t==="scroll"||t==="scrollend"),L=ue?H!==null?H+"Capture":null:H;ue=[];for(var C=Y,q;C!==null;){var F=C;if(q=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||q===null||L===null||(F=bl(C,L),F!=null&&ue.push(Pl(C,F,q))),ze)break;C=C.return}0<ue.length&&(H=new Z(H,re,null,a,K),J.push({event:H,listeners:ue}))}}if((s&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",H&&a!==ui&&(re=a.relatedTarget||a.fromElement)&&(Aa(re)||re[Ca]))break e;if((Z||H)&&(H=K.window===K?K:(H=K.ownerDocument)?H.defaultView||H.parentWindow:window,Z?(re=a.relatedTarget||a.toElement,Z=Y,re=re?Aa(re):null,re!==null&&(ze=b(re),ue=re.tag,re!==ze||ue!==5&&ue!==27&&ue!==6)&&(re=null)):(Z=null,re=Y),Z!==re)){if(ue=so,F="onMouseLeave",L="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(ue=lo,F="onPointerLeave",L="onPointerEnter",C="pointer"),ze=Z==null?H:pl(Z),q=re==null?H:pl(re),H=new ue(F,C+"leave",Z,a,K),H.target=ze,H.relatedTarget=q,F=null,Aa(K)===Y&&(ue=new ue(L,C+"enter",re,a,K),ue.target=q,ue.relatedTarget=ze,F=ue),ze=F,Z&&re)t:{for(ue=Qh,L=Z,C=re,q=0,F=L;F;F=ue(F))q++;F=0;for(var oe=C;oe;oe=ue(oe))F++;for(;0<q-F;)L=ue(L),q--;for(;0<F-q;)C=ue(C),F--;for(;q--;){if(L===C||C!==null&&L===C.alternate){ue=L;break t}L=ue(L),C=ue(C)}ue=null}else ue=null;Z!==null&&Jm(J,H,Z,ue,!1),re!==null&&ze!==null&&Jm(J,ze,re,ue,!0)}}e:{if(H=Y?pl(Y):window,Z=H.nodeName&&H.nodeName.toLowerCase(),Z==="select"||Z==="input"&&H.type==="file")var we=xo;else if(uo(H))if(ho)we=sh;else{we=eh;var ce=W0}else Z=H.nodeName,!Z||Z.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?Y&&oi(Y.elementType)&&(we=xo):we=th;if(we&&(we=we(t,Y))){mo(J,we,a,K);break e}ce&&ce(t,H,Y),t==="focusout"&&Y&&H.type==="number"&&Y.memoizedProps.value!=null&&di(H,"number",H.value)}switch(ce=Y?pl(Y):window,t){case"focusin":(uo(ce)||ce.contentEditable==="true")&&(_a=ce,Si=Y,Al=null);break;case"focusout":Al=Si=_a=null;break;case"mousedown":Ci=!0;break;case"contextmenu":case"mouseup":case"dragend":Ci=!1,No(J,a,K);break;case"selectionchange":if(lh)break;case"keydown":case"keyup":No(J,a,K)}var fe;if(ji)e:{switch(t){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else La?co(t,a)&&(je="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(je="onCompositionStart");je&&(no&&a.locale!=="ko"&&(La||je!=="onCompositionStart"?je==="onCompositionEnd"&&La&&(fe=eo()):(ks=K,gi="value"in ks?ks.value:ks.textContent,La=!0)),ce=jr(Y,je),0<ce.length&&(je=new ao(je,t,null,a,K),J.push({event:je,listeners:ce}),fe?je.data=fe:(fe=oo(a),fe!==null&&(je.data=fe)))),(fe=K0?F0(t,a):J0(t,a))&&(je=jr(Y,"onBeforeInput"),0<je.length&&(ce=new ao("onBeforeInput","beforeinput",null,a,K),J.push({event:ce,listeners:je}),ce.data=fe)),Hh(J,t,Y,a,K)}Km(J,s)})}function Pl(t,s,a){return{instance:t,listener:s,currentTarget:a}}function jr(t,s){for(var a=s+"Capture",l=[];t!==null;){var n=t,r=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||r===null||(n=bl(t,a),n!=null&&l.unshift(Pl(t,n,r)),n=bl(t,s),n!=null&&l.push(Pl(t,n,r))),t.tag===3)return l;t=t.return}return[]}function Qh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Jm(t,s,a,l,n){for(var r=s._reactName,c=[];a!==null&&a!==l;){var x=a,j=x.alternate,Y=x.stateNode;if(x=x.tag,j!==null&&j===l)break;x!==5&&x!==26&&x!==27||Y===null||(j=Y,n?(Y=bl(a,r),Y!=null&&c.unshift(Pl(a,Y,j))):n||(Y=bl(a,r),Y!=null&&c.push(Pl(a,Y,j)))),a=a.return}c.length!==0&&t.push({event:s,listeners:c})}var Zh=/\r\n?/g,$h=/\u0000|\uFFFD/g;function Pm(t){return(typeof t=="string"?t:""+t).replace(Zh,`
`).replace($h,"")}function Im(t,s){return s=Pm(s),Pm(t)===s}function Te(t,s,a,l,n,r){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Ta(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Ta(t,""+l);break;case"className":Sn(t,"class",l);break;case"tabIndex":Sn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Sn(t,a,l);break;case"style":Pd(t,l,r);break;case"data":if(s!=="object"){Sn(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=An(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(a==="formAction"?(s!=="input"&&Te(t,s,"name",n.name,n,null),Te(t,s,"formEncType",n.formEncType,n,null),Te(t,s,"formMethod",n.formMethod,n,null),Te(t,s,"formTarget",n.formTarget,n,null)):(Te(t,s,"encType",n.encType,n,null),Te(t,s,"method",n.method,n,null),Te(t,s,"target",n.target,n,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=An(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ns);break;case"onScroll":l!=null&&be("scroll",t);break;case"onScrollEnd":l!=null&&be("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(n.children!=null)throw Error(d(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=An(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":be("beforetoggle",t),be("toggle",t),wn(t,"popover",l);break;case"xlinkActuate":ls(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ls(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ls(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ls(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ls(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ls(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ls(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ls(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ls(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":wn(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=v0.get(a)||a,wn(t,a,l))}}function Jc(t,s,a,l,n,r){switch(a){case"style":Pd(t,l,r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(n.children!=null)throw Error(d(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Ta(t,l):(typeof l=="number"||typeof l=="bigint")&&Ta(t,""+l);break;case"onScroll":l!=null&&be("scroll",t);break;case"onScrollEnd":l!=null&&be("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ns);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gd.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(n=a.endsWith("Capture"),s=a.slice(2,n?a.length-7:void 0),r=t[ft]||null,r=r!=null?r[a]:null,typeof r=="function"&&t.removeEventListener(s,r,n),typeof l=="function")){typeof r!="function"&&r!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,n);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):wn(t,a,l)}}}function lt(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",t),be("load",t);var l=!1,n=!1,r;for(r in a)if(a.hasOwnProperty(r)){var c=a[r];if(c!=null)switch(r){case"src":l=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,s));default:Te(t,s,r,c,a,null)}}n&&Te(t,s,"srcSet",a.srcSet,a,null),l&&Te(t,s,"src",a.src,a,null);return;case"input":be("invalid",t);var x=r=c=n=null,j=null,Y=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":n=K;break;case"type":c=K;break;case"checked":j=K;break;case"defaultChecked":Y=K;break;case"value":r=K;break;case"defaultValue":x=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(d(137,s));break;default:Te(t,s,l,K,a,null)}}$d(t,r,x,j,Y,c,n,!1);return;case"select":be("invalid",t),l=c=r=null;for(n in a)if(a.hasOwnProperty(n)&&(x=a[n],x!=null))switch(n){case"value":r=x;break;case"defaultValue":c=x;break;case"multiple":l=x;default:Te(t,s,n,x,a,null)}s=r,a=c,t.multiple=!!l,s!=null?Ea(t,!!l,s,!1):a!=null&&Ea(t,!!l,a,!0);return;case"textarea":be("invalid",t),r=n=l=null;for(c in a)if(a.hasOwnProperty(c)&&(x=a[c],x!=null))switch(c){case"value":l=x;break;case"defaultValue":n=x;break;case"children":r=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(d(91));break;default:Te(t,s,c,x,a,null)}Fd(t,l,n,r);return;case"option":for(j in a)a.hasOwnProperty(j)&&(l=a[j],l!=null)&&(j==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Te(t,s,j,l,a,null));return;case"dialog":be("beforetoggle",t),be("toggle",t),be("cancel",t),be("close",t);break;case"iframe":case"object":be("load",t);break;case"video":case"audio":for(l=0;l<Jl.length;l++)be(Jl[l],t);break;case"image":be("error",t),be("load",t);break;case"details":be("toggle",t);break;case"embed":case"source":case"link":be("error",t),be("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(l=a[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,s));default:Te(t,s,Y,l,a,null)}return;default:if(oi(s)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&Jc(t,s,K,l,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(l=a[x],l!=null&&Te(t,s,x,l,a,null))}function Kh(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,c=null,x=null,j=null,Y=null,K=null;for(Z in a){var J=a[Z];if(a.hasOwnProperty(Z)&&J!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":j=J;default:l.hasOwnProperty(Z)||Te(t,s,Z,null,l,J)}}for(var H in l){var Z=l[H];if(J=a[H],l.hasOwnProperty(H)&&(Z!=null||J!=null))switch(H){case"type":r=Z;break;case"name":n=Z;break;case"checked":Y=Z;break;case"defaultChecked":K=Z;break;case"value":c=Z;break;case"defaultValue":x=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(d(137,s));break;default:Z!==J&&Te(t,s,H,Z,l,J)}}ci(t,c,x,j,Y,K,r,n);return;case"select":Z=c=x=H=null;for(r in a)if(j=a[r],a.hasOwnProperty(r)&&j!=null)switch(r){case"value":break;case"multiple":Z=j;default:l.hasOwnProperty(r)||Te(t,s,r,null,l,j)}for(n in l)if(r=l[n],j=a[n],l.hasOwnProperty(n)&&(r!=null||j!=null))switch(n){case"value":H=r;break;case"defaultValue":x=r;break;case"multiple":c=r;default:r!==j&&Te(t,s,n,r,l,j)}s=x,a=c,l=Z,H!=null?Ea(t,!!a,H,!1):!!l!=!!a&&(s!=null?Ea(t,!!a,s,!0):Ea(t,!!a,a?[]:"",!1));return;case"textarea":Z=H=null;for(x in a)if(n=a[x],a.hasOwnProperty(x)&&n!=null&&!l.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Te(t,s,x,null,l,n)}for(c in l)if(n=l[c],r=a[c],l.hasOwnProperty(c)&&(n!=null||r!=null))switch(c){case"value":H=n;break;case"defaultValue":Z=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(d(91));break;default:n!==r&&Te(t,s,c,n,l,r)}Kd(t,H,Z);return;case"option":for(var re in a)H=a[re],a.hasOwnProperty(re)&&H!=null&&!l.hasOwnProperty(re)&&(re==="selected"?t.selected=!1:Te(t,s,re,null,l,H));for(j in l)H=l[j],Z=a[j],l.hasOwnProperty(j)&&H!==Z&&(H!=null||Z!=null)&&(j==="selected"?t.selected=H&&typeof H!="function"&&typeof H!="symbol":Te(t,s,j,H,l,Z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in a)H=a[ue],a.hasOwnProperty(ue)&&H!=null&&!l.hasOwnProperty(ue)&&Te(t,s,ue,null,l,H);for(Y in l)if(H=l[Y],Z=a[Y],l.hasOwnProperty(Y)&&H!==Z&&(H!=null||Z!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(d(137,s));break;default:Te(t,s,Y,H,l,Z)}return;default:if(oi(s)){for(var ze in a)H=a[ze],a.hasOwnProperty(ze)&&H!==void 0&&!l.hasOwnProperty(ze)&&Jc(t,s,ze,void 0,l,H);for(K in l)H=l[K],Z=a[K],!l.hasOwnProperty(K)||H===Z||H===void 0&&Z===void 0||Jc(t,s,K,H,l,Z);return}}for(var L in a)H=a[L],a.hasOwnProperty(L)&&H!=null&&!l.hasOwnProperty(L)&&Te(t,s,L,null,l,H);for(J in l)H=l[J],Z=a[J],!l.hasOwnProperty(J)||H===Z||H==null&&Z==null||Te(t,s,J,H,l,Z)}function Wm(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Fh(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var n=a[l],r=n.transferSize,c=n.initiatorType,x=n.duration;if(r&&x&&Wm(c)){for(c=0,x=n.responseEnd,l+=1;l<a.length;l++){var j=a[l],Y=j.startTime;if(Y>x)break;var K=j.transferSize,J=j.initiatorType;K&&Wm(J)&&(j=j.responseEnd,c+=K*(j<x?1:(x-Y)/(j-Y)))}if(--l,s+=8*(r+c)/(n.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Pc=null,Ic=null;function vr(t){return t.nodeType===9?t:t.ownerDocument}function ex(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tx(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Wc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ed=null;function Jh(){var t=window.event;return t&&t.type==="popstate"?t===ed?!1:(ed=t,!0):(ed=null,!1)}var sx=typeof setTimeout=="function"?setTimeout:void 0,Ph=typeof clearTimeout=="function"?clearTimeout:void 0,ax=typeof Promise=="function"?Promise:void 0,Ih=typeof queueMicrotask=="function"?queueMicrotask:typeof ax<"u"?function(t){return ax.resolve(null).then(t).catch(Wh)}:sx;function Wh(t){setTimeout(function(){throw t})}function Qs(t){return t==="head"}function lx(t,s){var a=s,l=0;do{var n=a.nextSibling;if(t.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(n),cl(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Il(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Il(a);for(var r=a.firstChild;r;){var c=r.nextSibling,x=r.nodeName;r[fl]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&r.rel.toLowerCase()==="stylesheet"||a.removeChild(r),r=c}}else a==="body"&&Il(t.ownerDocument.body);a=n}while(a);cl(s)}function nx(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function td(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":td(a),ri(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function eg(t,s,a,l){for(;t.nodeType===1;){var n=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[fl])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==n.rel||t.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||t.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||t.getAttribute("title")!==(n.title==null?null:n.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(n.src==null?null:n.src)||t.getAttribute("type")!==(n.type==null?null:n.type)||t.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var r=n.name==null?null:""+n.name;if(n.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=Gt(t.nextSibling),t===null)break}return null}function tg(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Gt(t.nextSibling),t===null))return null;return t}function rx(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Gt(t.nextSibling),t===null))return null;return t}function sd(t){return t.data==="$?"||t.data==="$~"}function ad(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function sg(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Gt(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var ld=null;function ix(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return Gt(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function cx(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function dx(t,s,a){switch(s=vr(a),t){case"html":if(t=s.documentElement,!t)throw Error(d(452));return t;case"head":if(t=s.head,!t)throw Error(d(453));return t;case"body":if(t=s.body,!t)throw Error(d(454));return t;default:throw Error(d(451))}}function Il(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ri(t)}var Xt=new Map,ox=new Set;function Nr(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var vs=G.d;G.d={f:ag,r:lg,D:ng,C:rg,L:ig,m:cg,X:og,S:dg,M:ug};function ag(){var t=vs.f(),s=xr();return t||s}function lg(t){var s=Da(t);s!==null&&s.tag===5&&s.type==="form"?Du(s):vs.r(t)}var nl=typeof document>"u"?null:document;function ux(t,s,a){var l=nl;if(l&&typeof s=="string"&&s){var n=_t(s);n='link[rel="'+t+'"][href="'+n+'"]',typeof a=="string"&&(n+='[crossorigin="'+a+'"]'),ox.has(n)||(ox.add(n),t={rel:t,crossOrigin:a,href:s},l.querySelector(n)===null&&(s=l.createElement("link"),lt(s,"link",t),Ie(s),l.head.appendChild(s)))}}function ng(t){vs.D(t),ux("dns-prefetch",t,null)}function rg(t,s){vs.C(t,s),ux("preconnect",t,s)}function ig(t,s,a){vs.L(t,s,a);var l=nl;if(l&&t&&s){var n='link[rel="preload"][as="'+_t(s)+'"]';s==="image"&&a&&a.imageSrcSet?(n+='[imagesrcset="'+_t(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(n+='[imagesizes="'+_t(a.imageSizes)+'"]')):n+='[href="'+_t(t)+'"]';var r=n;switch(s){case"style":r=rl(t);break;case"script":r=il(t)}Xt.has(r)||(t=p({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Xt.set(r,t),l.querySelector(n)!==null||s==="style"&&l.querySelector(Wl(r))||s==="script"&&l.querySelector(en(r))||(s=l.createElement("link"),lt(s,"link",t),Ie(s),l.head.appendChild(s)))}}function cg(t,s){vs.m(t,s);var a=nl;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",n='link[rel="modulepreload"][as="'+_t(l)+'"][href="'+_t(t)+'"]',r=n;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=il(t)}if(!Xt.has(r)&&(t=p({rel:"modulepreload",href:t},s),Xt.set(r,t),a.querySelector(n)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(en(r)))return}l=a.createElement("link"),lt(l,"link",t),Ie(l),a.head.appendChild(l)}}}function dg(t,s,a){vs.S(t,s,a);var l=nl;if(l&&t){var n=ka(l).hoistableStyles,r=rl(t);s=s||"default";var c=n.get(r);if(!c){var x={loading:0,preload:null};if(c=l.querySelector(Wl(r)))x.loading=5;else{t=p({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Xt.get(r))&&nd(t,a);var j=c=l.createElement("link");Ie(j),lt(j,"link",t),j._p=new Promise(function(Y,K){j.onload=Y,j.onerror=K}),j.addEventListener("load",function(){x.loading|=1}),j.addEventListener("error",function(){x.loading|=2}),x.loading|=4,wr(c,s,l)}c={type:"stylesheet",instance:c,count:1,state:x},n.set(r,c)}}}function og(t,s){vs.X(t,s);var a=nl;if(a&&t){var l=ka(a).hoistableScripts,n=il(t),r=l.get(n);r||(r=a.querySelector(en(n)),r||(t=p({src:t,async:!0},s),(s=Xt.get(n))&&rd(t,s),r=a.createElement("script"),Ie(r),lt(r,"link",t),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function ug(t,s){vs.M(t,s);var a=nl;if(a&&t){var l=ka(a).hoistableScripts,n=il(t),r=l.get(n);r||(r=a.querySelector(en(n)),r||(t=p({src:t,async:!0,type:"module"},s),(s=Xt.get(n))&&rd(t,s),r=a.createElement("script"),Ie(r),lt(r,"link",t),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function mx(t,s,a,l){var n=(n=he.current)?Nr(n):null;if(!n)throw Error(d(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=rl(a.href),a=ka(n).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=rl(a.href);var r=ka(n).hoistableStyles,c=r.get(t);if(c||(n=n.ownerDocument||n,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,c),(r=n.querySelector(Wl(t)))&&!r._p&&(c.instance=r,c.state.loading=5),Xt.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xt.set(t,a),r||mg(n,t,a,c.state))),s&&l===null)throw Error(d(528,""));return c}if(s&&l!==null)throw Error(d(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=il(a),a=ka(n).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,t))}}function rl(t){return'href="'+_t(t)+'"'}function Wl(t){return'link[rel="stylesheet"]['+t+"]"}function xx(t){return p({},t,{"data-precedence":t.precedence,precedence:null})}function mg(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),lt(s,"link",a),Ie(s),t.head.appendChild(s))}function il(t){return'[src="'+_t(t)+'"]'}function en(t){return"script[async]"+t}function hx(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+_t(a.href)+'"]');if(l)return s.instance=l,Ie(l),l;var n=p({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ie(l),lt(l,"style",n),wr(l,a.precedence,t),s.instance=l;case"stylesheet":n=rl(a.href);var r=t.querySelector(Wl(n));if(r)return s.state.loading|=4,s.instance=r,Ie(r),r;l=xx(a),(n=Xt.get(n))&&nd(l,n),r=(t.ownerDocument||t).createElement("link"),Ie(r);var c=r;return c._p=new Promise(function(x,j){c.onload=x,c.onerror=j}),lt(r,"link",l),s.state.loading|=4,wr(r,a.precedence,t),s.instance=r;case"script":return r=il(a.src),(n=t.querySelector(en(r)))?(s.instance=n,Ie(n),n):(l=a,(n=Xt.get(r))&&(l=p({},a),rd(l,n)),t=t.ownerDocument||t,n=t.createElement("script"),Ie(n),lt(n,"link",l),t.head.appendChild(n),s.instance=n);case"void":return null;default:throw Error(d(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,wr(l,a.precedence,t));return s.instance}function wr(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=l.length?l[l.length-1]:null,r=n,c=0;c<l.length;c++){var x=l[c];if(x.dataset.precedence===s)r=x;else if(r!==n)break}r?r.parentNode.insertBefore(t,r.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function nd(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function rd(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Sr=null;function gx(t,s,a){if(Sr===null){var l=new Map,n=Sr=new Map;n.set(a,l)}else n=Sr,l=n.get(a),l||(l=new Map,n.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),n=0;n<a.length;n++){var r=a[n];if(!(r[fl]||r[et]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var c=r.getAttribute(s)||"";c=t+c;var x=l.get(c);x?x.push(r):l.set(c,[r])}}return l}function fx(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function xg(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(t=s.disabled,typeof s.precedence=="string"&&t==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function px(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function hg(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var n=rl(l.href),r=s.querySelector(Wl(n));if(r){s=r._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Cr.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=r,Ie(r);return}r=s.ownerDocument||s,l=xx(l),(n=Xt.get(n))&&nd(l,n),r=r.createElement("link"),Ie(r);var c=r;c._p=new Promise(function(x,j){c.onload=x,c.onerror=j}),lt(r,"link",l),a.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Cr.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var id=0;function gg(t,s){return t.stylesheets&&t.count===0&&Dr(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Dr(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+s);0<t.imgBytes&&id===0&&(id=62500*Fh());var n=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Dr(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>id?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(n)}}:null}function Cr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dr(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ar=null;function Dr(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ar=new Map,s.forEach(fg,t),Ar=null,Cr.call(t))}function fg(t,s){if(!(s.state.loading&4)){var a=Ar.get(t);if(a)var l=a.get(null);else{a=new Map,Ar.set(t,a);for(var n=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var c=n[r];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(a.set(c.dataset.precedence,c),l=c)}l&&a.set(null,l)}n=s.instance,c=n.getAttribute("data-precedence"),r=a.get(c)||l,r===l&&a.set(null,n),a.set(c,n),this.count++,l=Cr.bind(this),n.addEventListener("load",l),n.addEventListener("error",l),r?r.parentNode.insertBefore(n,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(n,t.firstChild)),s.state.loading|=4}}var tn={$$typeof:P,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function pg(t,s,a,l,n,r,c,x,j){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=si(0),this.hiddenUpdates=si(null),this.identifierPrefix=l,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function bx(t,s,a,l,n,r,c,x,j,Y,K,J){return t=new pg(t,s,a,c,j,Y,K,J,x),s=1,r===!0&&(s|=24),r=kt(3,null,null,s),t.current=r,r.stateNode=t,s=Yi(),s.refCount++,t.pooledCache=s,s.refCount++,r.memoizedState={element:l,isDehydrated:a,cache:s},Vi(r),t}function yx(t){return t?(t=Ba,t):Ba}function jx(t,s,a,l,n,r){n=yx(n),l.context===null?l.context=n:l.pendingContext=n,l=Ls(s),l.payload={element:a},r=r===void 0?null:r,r!==null&&(l.callback=r),a=_s(t,l,s),a!==null&&(Nt(a,t,s),Rl(a,t,s))}function vx(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function cd(t,s){vx(t,s),(t=t.alternate)&&vx(t,s)}function Nx(t){if(t.tag===13||t.tag===31){var s=ra(t,67108864);s!==null&&Nt(s,t,67108864),cd(t,67108864)}}function wx(t){if(t.tag===13||t.tag===31){var s=Rt();s=ai(s);var a=ra(t,s);a!==null&&Nt(a,t,s),cd(t,s)}}var kr=!0;function bg(t,s,a,l){var n=D.T;D.T=null;var r=G.p;try{G.p=2,dd(t,s,a,l)}finally{G.p=r,D.T=n}}function yg(t,s,a,l){var n=D.T;D.T=null;var r=G.p;try{G.p=8,dd(t,s,a,l)}finally{G.p=r,D.T=n}}function dd(t,s,a,l){if(kr){var n=od(l);if(n===null)Fc(t,s,l,Mr,a),Cx(t,l);else if(vg(n,t,s,a,l))l.stopPropagation();else if(Cx(t,l),s&4&&-1<jg.indexOf(t)){for(;n!==null;){var r=Da(n);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var c=ta(r.pendingLanes);if(c!==0){var x=r;for(x.pendingLanes|=2,x.entangledLanes|=2;c;){var j=1<<31-At(c);x.entanglements[1]|=j,c&=~j}Pt(r),(Ce&6)===0&&(ur=St()+500,Fl(0))}}break;case 31:case 13:x=ra(r,2),x!==null&&Nt(x,r,2),xr(),cd(r,2)}if(r=od(l),r===null&&Fc(t,s,l,Mr,a),r===n)break;n=r}n!==null&&l.stopPropagation()}else Fc(t,s,l,null,a)}}function od(t){return t=mi(t),ud(t)}var Mr=null;function ud(t){if(Mr=null,t=Aa(t),t!==null){var s=b(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=v(s),t!==null)return t;t=null}else if(a===31){if(t=_(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Mr=t,null}function Sx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(n0()){case Td:return 2;case zd:return 8;case bn:case r0:return 32;case Rd:return 268435456;default:return 32}default:return 32}}var md=!1,Zs=null,$s=null,Ks=null,sn=new Map,an=new Map,Fs=[],jg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cx(t,s){switch(t){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":$s=null;break;case"mouseover":case"mouseout":Ks=null;break;case"pointerover":case"pointerout":sn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":an.delete(s.pointerId)}}function ln(t,s,a,l,n,r){return t===null||t.nativeEvent!==r?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:r,targetContainers:[n]},s!==null&&(s=Da(s),s!==null&&Nx(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function vg(t,s,a,l,n){switch(s){case"focusin":return Zs=ln(Zs,t,s,a,l,n),!0;case"dragenter":return $s=ln($s,t,s,a,l,n),!0;case"mouseover":return Ks=ln(Ks,t,s,a,l,n),!0;case"pointerover":var r=n.pointerId;return sn.set(r,ln(sn.get(r)||null,t,s,a,l,n)),!0;case"gotpointercapture":return r=n.pointerId,an.set(r,ln(an.get(r)||null,t,s,a,l,n)),!0}return!1}function Ax(t){var s=Aa(t.target);if(s!==null){var a=b(s);if(a!==null){if(s=a.tag,s===13){if(s=v(a),s!==null){t.blockedOn=s,qd(t.priority,function(){wx(a)});return}}else if(s===31){if(s=_(a),s!==null){t.blockedOn=s,qd(t.priority,function(){wx(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Er(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=od(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);ui=l,a.target.dispatchEvent(l),ui=null}else return s=Da(a),s!==null&&Nx(s),t.blockedOn=a,!1;s.shift()}return!0}function Dx(t,s,a){Er(t)&&a.delete(s)}function Ng(){md=!1,Zs!==null&&Er(Zs)&&(Zs=null),$s!==null&&Er($s)&&($s=null),Ks!==null&&Er(Ks)&&(Ks=null),sn.forEach(Dx),an.forEach(Dx)}function Tr(t,s){t.blockedOn===s&&(t.blockedOn=null,md||(md=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ng)))}var zr=null;function kx(t){zr!==t&&(zr=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){zr===t&&(zr=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],n=t[s+2];if(typeof l!="function"){if(ud(l||a)===null)continue;break}var r=Da(a);r!==null&&(t.splice(s,3),s-=3,oc(r,{pending:!0,data:n,method:a.method,action:l},l,n))}}))}function cl(t){function s(j){return Tr(j,t)}Zs!==null&&Tr(Zs,t),$s!==null&&Tr($s,t),Ks!==null&&Tr(Ks,t),sn.forEach(s),an.forEach(s);for(var a=0;a<Fs.length;a++){var l=Fs[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Fs.length&&(a=Fs[0],a.blockedOn===null);)Ax(a),a.blockedOn===null&&Fs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var n=a[l],r=a[l+1],c=n[ft]||null;if(typeof r=="function")c||kx(a);else if(c){var x=null;if(r&&r.hasAttribute("formAction")){if(n=r,c=r[ft]||null)x=c.formAction;else if(ud(n)!==null)continue}else x=c.action;typeof x=="function"?a[l+1]=x:(a.splice(l,3),l-=3),kx(a)}}}function Mx(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(c){return n=c})},focusReset:"manual",scroll:"manual"})}function s(){n!==null&&(n(),n=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,n=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),n!==null&&(n(),n=null)}}}function xd(t){this._internalRoot=t}Rr.prototype.render=xd.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(d(409));var a=s.current,l=Rt();jx(a,l,t,s,null,null)},Rr.prototype.unmount=xd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;jx(t.current,2,null,t,null,null),xr(),s[Ca]=null}};function Rr(t){this._internalRoot=t}Rr.prototype.unstable_scheduleHydration=function(t){if(t){var s=Bd();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Fs.length&&s!==0&&s<Fs[a].priority;a++);Fs.splice(a,0,t),a===0&&Ax(t)}};var Ex=o.version;if(Ex!=="19.2.3")throw Error(d(527,Ex,"19.2.3"));G.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(d(188)):(t=Object.keys(t).join(","),Error(d(268,t)));return t=R(s),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var wg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lr.isDisabled&&Lr.supportsFiber)try{xl=Lr.inject(wg),Ct=Lr}catch{}}return rn.createRoot=function(t,s){if(!u(t))throw Error(d(299));var a=!1,l="",n=Uu,r=Bu,c=qu;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(n=s.onUncaughtError),s.onCaughtError!==void 0&&(r=s.onCaughtError),s.onRecoverableError!==void 0&&(c=s.onRecoverableError)),s=bx(t,1,!1,null,null,a,l,null,n,r,c,Mx),t[Ca]=s.current,Kc(t),new xd(s)},rn.hydrateRoot=function(t,s,a){if(!u(t))throw Error(d(299));var l=!1,n="",r=Uu,c=Bu,x=qu,j=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(r=a.onUncaughtError),a.onCaughtError!==void 0&&(c=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.formState!==void 0&&(j=a.formState)),s=bx(t,1,!0,s,a??null,l,n,j,r,c,x,Mx),s.context=yx(null),a=s.current,l=Rt(),l=ai(l),n=Ls(l),n.callback=null,_s(a,n,l),a=l,s.current.lanes=a,gl(s,a),Pt(s),t[Ca]=s.current,Kc(t),new Rr(s)},rn.version="19.2.3",rn}var Xx;function cf(){if(Xx)return gd.exports;Xx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(o){console.error(o)}}return i(),gd.exports=rf(),gd.exports}var df=cf();const of={user:null,profile:null,token:null,isAuthenticated:!1,isLoading:!1},e0=Tg({name:"auth",initialState:of,reducers:{setCredentials:(i,o)=>{i.user=o.payload.user,i.profile=o.payload.profile,i.token=o.payload.token,i.isAuthenticated=!0,i.isLoading=!1},setLoading:(i,o)=>{i.isLoading=o.payload},logout:i=>{i.user=null,i.profile=null,i.token=null,i.isAuthenticated=!1,i.isLoading=!1,localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("profile")},hydrate:(i,o)=>{i.user=o.payload.user,i.profile=o.payload.profile,i.token=o.payload.token,i.isAuthenticated=!0}}}),{setCredentials:uf,setLoading:Vx,logout:mf,hydrate:xf}=e0.actions,hf=e0.reducer,gf=zg({reducer:{auth:hf},middleware:i=>i({serializableCheck:!1})}),Dd=Rg.withTypes(),pn=Lg.withTypes(),ff=({children:i})=>{const{isAuthenticated:o,user:m}=pn(d=>d.auth);if(o&&m){const d={SysAdmin:"/sysadmin/dashboard",DistrictHead:"/districthead/dashboard",CollegeAdmin:"/collegeadmin/dashboard",Teacher:"/teacher/dashboard",Student:"/student/dashboard"};return e.jsx(Gr,{to:d[m.role],replace:!0})}return e.jsx(e.Fragment,{children:i})},cn=({children:i,allowedRoles:o})=>{const{isAuthenticated:m,user:d}=pn(u=>u.auth);return!m||!d?e.jsx(Gr,{to:"/login",replace:!0}):o&&!o.includes(d.role)?e.jsx(Gr,{to:"/unauthorized",replace:!0}):e.jsx(e.Fragment,{children:i})},pf=[{name:"Dashboard",path:"/dashboard",icon:e.jsx(Bg,{className:"w-5 h-5"}),roles:["SysAdmin","DistrictHead","CollegeAdmin","Teacher","Student"]},{name:"Regions",path:"/regions",icon:e.jsx(It,{className:"w-5 h-5"}),roles:["SysAdmin"]},{name:"District Heads",path:"/district-heads",icon:e.jsx(De,{className:"w-5 h-5"}),roles:["SysAdmin"]},{name:"Colleges",path:"/colleges",icon:e.jsx(wt,{className:"w-5 h-5"}),roles:["SysAdmin","DistrictHead"]},{name:"Teachers",path:"/teachers",icon:e.jsx(De,{className:"w-5 h-5"}),roles:["SysAdmin","DistrictHead","CollegeAdmin"]},{name:"Students",path:"/students",icon:e.jsx(Fe,{className:"w-5 h-5"}),roles:["SysAdmin","DistrictHead","CollegeAdmin"]},{name:"My Classes",path:"/my-classes",icon:e.jsx(Ue,{className:"w-5 h-5"}),roles:["Teacher"]},{name:"My Section",path:"/section",icon:e.jsx(Tx,{className:"w-5 h-5"}),roles:["Student"]},{name:"Subjects",path:"/subjects",icon:e.jsx(Ue,{className:"w-5 h-5"}),roles:["SysAdmin","DistrictHead","CollegeAdmin"]},{name:"Sections",path:"/sections",icon:e.jsx(Tx,{className:"w-5 h-5"}),roles:["CollegeAdmin"]},{name:"Teacher Assignments",path:"/teacher-assignments",icon:e.jsx(Kx,{className:"w-5 h-5"}),roles:["CollegeAdmin"]},{name:"Mark Attendance",path:"/mark-attendance",icon:e.jsx(vd,{className:"w-5 h-5"}),roles:["CollegeAdmin","Teacher"]},{name:"My Attendance",path:"/attendance",icon:e.jsx(vd,{className:"w-5 h-5"}),roles:["Student"]},{name:"Attendance Records",path:"/attendance-records",icon:e.jsx(Ss,{className:"w-5 h-5"}),roles:["Teacher"]},{name:"Statistics",path:"/statistics",icon:e.jsx(Xr,{className:"w-5 h-5"}),roles:["Teacher","Student"]},{name:"My Classmates",path:"/classmates",icon:e.jsx(De,{className:"w-5 h-5"}),roles:["Student"]},{name:"Attendance Stats",path:"/attendance-statistics",icon:e.jsx(Xr,{className:"w-5 h-5"}),roles:["CollegeAdmin"]},{name:"Reports",path:"/reports",icon:e.jsx(Ss,{className:"w-5 h-5"}),roles:["SysAdmin","DistrictHead","CollegeAdmin","Teacher"]},{name:"Settings",path:"/settings",icon:e.jsx(qg,{className:"w-5 h-5"}),roles:["SysAdmin","DistrictHead","CollegeAdmin","Teacher","Student"]}],bf=()=>{const[i,o]=h.useState(!1),{user:m}=pn(f=>f.auth),d=Dd(),u=es(),b=()=>{d(mf()),u("/login")},v=pf.filter(f=>m?f.roles.includes(m.role):!1),_=m?`/${m.role.toLowerCase()}`:"";return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>o(!0),className:"lg:hidden fixed top-4 left-4 z-40 p-2 rounded-lg bg-white shadow-md",children:e.jsx(Og,{className:"w-6 h-6"})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>o(!1)}),e.jsxs("aside",{className:`
          fixed top-0 left-0 z-50 h-screen w-64 bg-white border-r border-gray-200
          transform transition-transform duration-300 ease-in-out
          ${i?"translate-x-0":"-translate-x-full"}
          lg:translate-x-0
        `,children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-primary-600 p-2 rounded-lg",children:e.jsx(Fe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"AMS"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Attendance System"})]})]}),e.jsx("button",{onClick:()=>o(!1),className:"lg:hidden text-gray-500 hover:text-gray-700",children:e.jsx(gn,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3",children:e.jsx("div",{className:"space-y-1",children:v.map(f=>e.jsxs(Dg,{to:`${_}${f.path}`,className:({isActive:R})=>`flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors
                  ${R?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>o(!1),children:[f.icon,e.jsx("span",{children:f.name})]},f.path))})}),e.jsx("div",{className:"border-t border-gray-200 p-4",children:e.jsxs("button",{onClick:b,className:"flex items-center space-x-3 w-full px-3 py-2.5 rounded-lg text-sm font-medium text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Ug,{className:"w-5 h-5"}),e.jsx("span",{children:"Logout"})]})})]})]})},yf=()=>{const{user:i,profile:o}=pn(d=>d.auth),m=()=>o&&o.name||"User";return e.jsx("header",{className:"sticky top-0 z-30 bg-white border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex-1 max-w-xl",children:e.jsxs("div",{className:"relative",children:[e.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),e.jsxs("div",{className:"flex items-center space-x-4 ml-4",children:[e.jsxs("button",{className:"relative p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:[e.jsx(Yg,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),e.jsxs("div",{className:"flex items-center space-x-3 pl-4 border-l border-gray-200",children:[e.jsxs("div",{className:"hidden sm:block text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:m()}),e.jsx("p",{className:"text-xs text-gray-500",children:i?.role})]}),e.jsxs("button",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-600 flex items-center justify-center text-white font-semibold",children:m().charAt(0).toUpperCase()}),e.jsx(Hg,{className:"w-4 h-4 text-gray-400"})]})]})]})]})})},dn=()=>e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(bf,{}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx(yf,{}),e.jsx("main",{className:"py-6 px-4 sm:px-6 lg:px-8",children:e.jsx(kg,{})})]})]}),Ae=({children:i,variant:o="primary",size:m="md",isLoading:d=!1,icon:u,className:b="",disabled:v,..._})=>{const f="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",R={primary:"bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",outline:"border-2 border-primary-600 text-primary-600 hover:bg-primary-50 focus:ring-primary-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500"},y={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2.5 text-base",lg:"px-6 py-3 text-lg"};return e.jsxs("button",{className:`${f} ${R[o]} ${y[m]} ${b}`,disabled:v||d,..._,children:[d&&e.jsx(Fx,{className:"w-4 h-4 mr-2 animate-spin"}),!d&&u&&e.jsx("span",{className:"mr-2",children:u}),i]})};class dl extends h.Component{state={hasError:!1};static getDerivedStateFromError(o){return{hasError:!0,error:o}}componentDidCatch(o,m){console.error("Uncaught error:",o,m)}handleReset=()=>{this.setState({hasError:!1,error:void 0})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8 max-w-md w-full",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mx-auto mb-4",children:e.jsx(Gg,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 text-center mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"We apologize for the inconvenience. Please try refreshing the page or contact support if the problem persists."}),this.state.error&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-xs font-mono text-gray-700 break-all",children:this.state.error.message})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(Ae,{variant:"outline",onClick:this.handleReset,className:"flex-1",children:"Try Again"}),e.jsx(Ae,{variant:"primary",onClick:()=>window.location.reload(),className:"flex-1",children:"Reload Page"})]})]})}):this.props.children}}const Ye=({label:i,error:o,icon:m,className:d="",...u})=>e.jsxs("div",{className:"w-full",children:[i&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:i}),e.jsxs("div",{className:"relative",children:[m&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:m}),e.jsx("input",{className:`
            w-full px-4 py-2.5 
            ${m?"pl-10":""}
            border border-gray-300 rounded-lg
            focus:ring-2 focus:ring-primary-500 focus:border-primary-500
            disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed
            transition-colors duration-200
            ${o?"border-red-500 focus:ring-red-500 focus:border-red-500":""}
            ${d}
          `,...u})]}),o&&e.jsx("p",{className:"mt-1.5 text-sm text-red-600",children:o})]}),jf="http://localhost:3000/api",ee=tf.create({baseURL:jf,timeout:3e4,headers:{"Content-Type":"application/json"}});ee.interceptors.request.use(i=>{const o=localStorage.getItem("token");return o&&i.headers&&(i.headers.Authorization=`Bearer ${o}`),i},i=>Promise.reject(i));ee.interceptors.response.use(i=>i,i=>(i.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("profile"),window.location.pathname!=="/login"&&(window.location.href="/login")),console.error("API Error:",{url:i.config?.url,method:i.config?.method,status:i.response?.status,message:i.response?.data?.message||i.message}),Promise.reject(i)));const vf={login:async i=>(await ee.post("/auth/login",i)).data.data,getMe:async()=>(await ee.get("/auth/me")).data.data,changePassword:async(i,o)=>{await ee.put("/auth/change-password",{currentPassword:i,newPassword:o})},logout:async()=>{await ee.post("/auth/logout")}},Nf=()=>{const i=es(),o=Dd(),[m,d]=h.useState({email:"",password:""}),[u,b]=h.useState(!1),[v,_]=h.useState({}),[f,R]=h.useState(!1),[y,p]=h.useState(""),S=O=>{const{name:w,value:N}=O.target;d($=>({...$,[w]:N})),v[w]&&_($=>({...$,[w]:""})),p("")},E=()=>{const O={};return m.email?/\S+@\S+\.\S+/.test(m.email)||(O.email="Email is invalid"):O.email="Email is required",m.password?m.password.length<6&&(O.password="Password must be at least 6 characters"):O.password="Password is required",_(O),Object.keys(O).length===0},k=async O=>{if(O.preventDefault(),!!E()){R(!0),o(Vx(!0)),p("");try{const w=await vf.login(m);localStorage.setItem("token",w.token),localStorage.setItem("user",JSON.stringify(w.user)),localStorage.setItem("profile",JSON.stringify(w.profile)),o(uf({user:w.user,profile:w.profile,token:w.token})),i({SysAdmin:"/sysadmin/dashboard",DistrictHead:"/districthead/dashboard",CollegeAdmin:"/collegeadmin/dashboard",Teacher:"/teacher/dashboard",Student:"/student/dashboard"}[w.user.role])}catch(w){const N=w.response?.data?.message||"Login failed. Please try again.";p(N),o(Vx(!1))}finally{R(!1)}}};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-3/5 bg-gradient-to-br from-primary-600 via-primary-700 to-primary-900 p-12 flex-col justify-between relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-white rounded-full -translate-x-1/2 -translate-y-1/2"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-white rounded-full translate-x-1/2 translate-y-1/2"})]}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white p-3 rounded-xl shadow-lg",children:e.jsx(Fe,{className:"w-8 h-8 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"AMS"}),e.jsx("p",{className:"text-primary-100 text-sm",children:"Attendance Management System"})]})]})}),e.jsxs("div",{className:"relative z-10 space-y-6",children:[e.jsxs("h2",{className:"text-5xl font-bold text-white leading-tight",children:["Welcome to",e.jsx("br",{}),"Punjab College",e.jsx("br",{}),"Attendance System"]}),e.jsx("p",{className:"text-xl text-primary-100 max-w-lg",children:"Streamline your attendance tracking and management with our comprehensive solution."}),e.jsx("div",{className:"space-y-4 mt-8",children:["Real-time attendance tracking","Role-based access control","Comprehensive reporting","Multi-college support"].map((O,w)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),e.jsx("span",{className:"text-white/90",children:O})]},w))})]}),e.jsx("div",{className:"relative z-10",children:e.jsx("p",{className:"text-primary-200 text-sm",children:" 2026 Punjab College System. All rights reserved."})})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-gray-50",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"lg:hidden mb-8 text-center",children:e.jsxs("div",{className:"inline-flex items-center space-x-3",children:[e.jsx("div",{className:"bg-primary-600 p-3 rounded-xl",children:e.jsx(Fe,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AMS"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Attendance Management"})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Sign In"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Enter your credentials to access your account"})]}),y&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600",children:y})}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsx(Ye,{type:"email",name:"email",label:"Email Address",placeholder:"john.doe@example.com",value:m.email,onChange:S,error:v.email,icon:e.jsx(Wt,{className:"w-5 h-5"}),autoComplete:"email",disabled:f}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{type:u?"text":"password",name:"password",label:"Password",placeholder:"Enter your password",value:m.password,onChange:S,error:v.password,icon:e.jsx(Xg,{className:"w-5 h-5"}),autoComplete:"current-password",disabled:f}),e.jsx("button",{type:"button",onClick:()=>b(!u),className:"absolute right-3 top-[38px] text-gray-400 hover:text-gray-600 transition-colors",tabIndex:-1,children:u?e.jsx(Jx,{className:"w-5 h-5"}):e.jsx(Cs,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),e.jsx("a",{href:"#",className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Forgot password?"})]}),e.jsx(Ae,{type:"submit",variant:"primary",size:"lg",isLoading:f,className:"w-full",children:"Sign In"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Need help?"," ",e.jsx("a",{href:"#",className:"text-primary-600 hover:text-primary-700 font-medium",children:"Contact Support"})]})})]}),e.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:e.jsx("p",{children:"Access restricted to authorized personnel only"})})]})})]})},Ns=({className:i=""})=>e.jsx("div",{className:`animate-pulse bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 bg-[length:200%_100%] rounded ${i}`,style:{animation:"shimmer 1.5s ease-in-out infinite"}}),wf=()=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ns,{className:"h-4 w-24 mb-3"}),e.jsx(Ns,{className:"h-8 w-16"})]}),e.jsx(Ns,{className:"w-12 h-12 rounded-lg"})]})}),Sf=`
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}
`;if(typeof document<"u"){const i="skeleton-shimmer-style";if(!document.getElementById(i)){const o=document.createElement("style");o.id=i,o.textContent=Sf,document.head.appendChild(o)}}const it=({title:i,value:o,icon:m,color:d,trend:u,subtitle:b,isLoading:v=!1})=>v?e.jsx(wf,{}):e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:i}),e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900 animate-in fade-in duration-500",children:typeof o=="number"?o.toLocaleString():o}),u&&e.jsxs("span",{className:`text-sm font-medium ${u.isPositive?"text-green-600":"text-red-600"}`,children:[u.isPositive?"":""," ",Math.abs(u.value),"%"]})]}),b&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:b})]}),e.jsx("div",{className:`${d} p-3 rounded-lg text-white shadow-lg transform hover:scale-110 transition-transform duration-200`,children:m})]})}),Qx={getQuickStats:async()=>(await ee.get("/statistics/quick")).data.data,getDashboardStats:async()=>(await ee.get("/statistics/dashboard")).data.data,getRegionStats:async()=>(await ee.get("/statistics/regions")).data.data.regions,getCollegeStats:async i=>{const o=i?`?regionId=${i}`:"";return(await ee.get(`/statistics/colleges${o}`)).data.data.colleges}},Be=()=>{const[i,o]=h.useState([]),m=h.useCallback((f,R="success")=>{const y=Date.now().toString();o(p=>[...p,{id:y,message:f,type:R}])},[]),d=h.useCallback(f=>{o(R=>R.filter(y=>y.id!==f))},[]),u=h.useCallback(f=>m(f,"success"),[m]),b=h.useCallback(f=>m(f,"error"),[m]),v=h.useCallback(f=>m(f,"warning"),[m]),_=h.useCallback(f=>m(f,"info"),[m]);return{toasts:i,showToast:m,removeToast:d,success:u,error:b,warning:v,info:_}},Cf={success:{icon:Pe,bgColor:"bg-green-50",borderColor:"border-green-200",iconColor:"text-green-600",textColor:"text-green-800"},error:{icon:rt,bgColor:"bg-red-50",borderColor:"border-red-200",iconColor:"text-red-600",textColor:"text-red-800"},warning:{icon:Ws,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",iconColor:"text-yellow-600",textColor:"text-yellow-800"},info:{icon:Vg,bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-600",textColor:"text-blue-800"}},Af=({message:i,type:o="success",duration:m=3e3,onClose:d})=>{const u=Cf[o],b=u.icon;return h.useEffect(()=>{if(m>0){const v=setTimeout(()=>{d()},m);return()=>clearTimeout(v)}},[m,d]),e.jsxs("div",{className:`
        fixed top-4 right-4 z-50 flex items-center space-x-3 px-4 py-3 rounded-lg border shadow-lg
        ${u.bgColor} ${u.borderColor}
        animate-in slide-in-from-top-5 fade-in duration-300
      `,role:"alert",children:[e.jsx(b,{className:`w-5 h-5 flex-shrink-0 ${u.iconColor}`}),e.jsx("p",{className:`text-sm font-medium ${u.textColor} pr-2`,children:i}),e.jsx("button",{onClick:d,className:`ml-auto flex-shrink-0 p-1 rounded-lg hover:bg-white/50 transition-colors ${u.iconColor}`,children:e.jsx(gn,{className:"w-4 h-4"})})]})},ot=({toasts:i,onRemove:o})=>e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:i.map(m=>e.jsx(Af,{message:m.message,type:m.type,onClose:()=>o(m.id)},m.id))}),Df=()=>{const[i,o]=h.useState(null),[m,d]=h.useState(null),[u,b]=h.useState(!0),{toasts:v,removeToast:_,error:f}=Be();h.useEffect(()=>{R()},[]);const R=async()=>{try{b(!0);const y=await Qx.getQuickStats();o(y);const p=await Qx.getDashboardStats();d(p)}catch(y){console.error("Error fetching statistics:",y),f(y.response?.data?.message||"Failed to load statistics")}finally{b(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ot,{toasts:v,onRemove:_}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"System Administrator Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage the entire attendance system"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(it,{title:"Total Regions",value:i?.totalRegions??0,icon:e.jsx(It,{className:"w-6 h-6"}),color:"bg-blue-500",isLoading:u,subtitle:"Active regions"}),e.jsx(it,{title:"Total Colleges",value:i?.totalColleges??0,icon:e.jsx(wt,{className:"w-6 h-6"}),color:"bg-green-500",isLoading:u,subtitle:"Educational institutions"}),e.jsx(it,{title:"District Heads",value:i?.totalDistrictHeads??0,icon:e.jsx(Kx,{className:"w-6 h-6"}),color:"bg-purple-500",isLoading:u,subtitle:"Regional administrators"}),e.jsx(it,{title:"Total Students",value:i?.totalStudents??0,icon:e.jsx(Fe,{className:"w-6 h-6"}),color:"bg-orange-500",isLoading:u,subtitle:"Enrolled students"})]}),m&&!u&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(it,{title:"Total Teachers",value:m.overview.totalTeachers,icon:e.jsx(De,{className:"w-6 h-6"}),color:"bg-indigo-500",subtitle:"Active teaching staff"}),e.jsx(it,{title:"Academic Programs",value:m.overview.totalPrograms,icon:e.jsx(Ue,{className:"w-6 h-6"}),color:"bg-pink-500",subtitle:"Available programs"}),e.jsx(it,{title:"Total Sections",value:m.overview.totalSections,icon:e.jsx(wa,{className:"w-6 h-6"}),color:"bg-cyan-500",subtitle:"Active sections"})]}),m&&!u&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(It,{className:"w-5 h-5 mr-2 text-blue-500"}),"Region Assignment Status"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Regions with District Heads"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:m.regions.withDistrictHeads})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Regions without District Heads"}),e.jsx("span",{className:"text-lg font-bold text-orange-600",children:m.regions.withoutDistrictHeads})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Assignment Rate"}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[m.regions.assignmentRate,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${m.regions.assignmentRate}%`}})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Fe,{className:"w-5 h-5 mr-2 text-orange-500"}),"Student Status"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active Students"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:m.students.active.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Inactive Students"}),e.jsx("span",{className:"text-lg font-bold text-gray-600",children:m.students.inactive.toLocaleString()})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Enrolled"}),e.jsx("span",{className:"text-xl font-bold text-blue-600",children:m.students.total.toLocaleString()})]})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ws,{className:"w-5 h-5 mr-2 text-yellow-500"}),"System Overview"]}),u?e.jsx("p",{className:"text-gray-500",children:"Loading system information..."}):m?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Active Colleges"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700 mt-1",children:m.colleges.active})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Teaching Staff"}),e.jsx("p",{className:"text-2xl font-bold text-purple-700 mt-1",children:m.personnel.totalTeachers.toLocaleString()})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Academic Sections"}),e.jsx("p",{className:"text-2xl font-bold text-green-700 mt-1",children:m.academics.totalSections})]})]}):e.jsx("p",{className:"text-gray-500",children:"Unable to load system information. Please try again."})]})]})},ul=({currentPage:i,totalPages:o,onPageChange:m,totalItems:d,itemsPerPage:u})=>{const b=()=>{const _=[],f=[];for(let R=Math.max(2,i-2);R<=Math.min(o-1,i+2);R++)_.push(R);return i-2>2?f.push(1,"..."):f.push(1),f.push(..._),i+2<o-1?f.push("...",o):o>1&&f.push(o),f};return!o||o<=1?null:e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 rounded-b-xl",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>m(i-1),disabled:i===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>m(i+1),disabled:i===o,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-700",children:d&&u&&e.jsxs(e.Fragment,{children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(i-1)*u+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(i*u,d)})," ","of ",e.jsx("span",{className:"font-medium",children:d})," results"]})})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>m(i-1),disabled:i===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Kr,{className:"h-5 w-5"})}),b().map((v,_)=>e.jsx("button",{onClick:()=>typeof v=="number"&&m(v),disabled:v==="...",className:`
                  relative inline-flex items-center px-4 py-2 border text-sm font-medium
                  ${v===i?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}
                  ${v==="..."?"cursor-default":"cursor-pointer"}
                `,children:v},_)),e.jsx("button",{onClick:()=>m(i+1),disabled:i===o,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Fr,{className:"h-5 w-5"})})]})})]})]})},Vt=({isOpen:i,onClose:o,title:m,children:d,size:u="md"})=>{if(h.useEffect(()=>{const v=_=>{_.key==="Escape"&&o()};return i&&(document.addEventListener("keydown",v),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",v),document.body.style.overflow="unset"}},[i,o]),!i)return null;const b={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4 text-center sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:o}),e.jsxs("div",{className:`
            relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all
            sm:my-8 sm:w-full ${b[u]}
          `,children:[m&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:m}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-500 transition-colors",children:e.jsx(gn,{className:"w-5 h-5"})})]}),e.jsx("div",{className:m?"px-6 py-4":"p-6",children:d})]})]})})},ol={getAll:async(i=1,o=10,m="")=>{const d=new URLSearchParams({page:i.toString(),limit:o.toString(),...m&&{search:m}}),u=await ee.get(`/regions?${d}`);console.log("Raw API response:",u.data);const b=u.data.data;return{data:b.regions||[],total:b.pagination?.totalItems||0,page:b.pagination?.currentPage||i,limit:b.pagination?.perPage||o,totalPages:b.pagination?.totalPages||1}},getById:async i=>(await ee.get(`/regions/${i}`)).data.data,create:async i=>(await ee.post("/regions",i)).data.data,update:async(i,o)=>(await ee.put(`/regions/${i}`,o)).data.data,delete:async i=>{await ee.delete(`/regions/${i}`)}},ts=({title:i,subtitle:o,onClose:m,icon:d})=>e.jsxs("div",{className:"relative pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[d&&e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg bg-primary-100 flex items-center justify-center",children:d}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:i}),o&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:o})]})]}),e.jsx("button",{onClick:m,className:"absolute top-0 right-0 p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:e.jsx(gn,{className:"w-5 h-5"})})]}),ss=({children:i,className:o=""})=>e.jsx("div",{className:`flex items-center justify-end space-x-3 pt-6 border-t border-gray-200 ${o}`,children:i}),as=({children:i,className:o=""})=>e.jsx("div",{className:`py-6 ${o}`,children:i}),Le=({label:i,error:o,required:m=!1,children:d,description:u})=>e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[i,m&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),d,u&&!o&&e.jsx("p",{className:"text-xs text-gray-500",children:u}),o&&e.jsx("p",{className:"text-xs text-red-500",children:o})]}),Jr=mn.forwardRef(({className:i="",error:o,...m},d)=>e.jsx("textarea",{ref:d,className:`
          w-full px-4 py-2.5 rounded-lg border transition-all duration-200
          ${o?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500"}
          focus:outline-none focus:ring-2 focus:ring-opacity-20
          disabled:bg-gray-100 disabled:cursor-not-allowed disabled:text-gray-500
          placeholder:text-gray-400
          ${i}
        `,...m}));Jr.displayName="Textarea";const t0=({checked:i,onChange:o,label:m,description:d,disabled:u=!1})=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("button",{type:"button",role:"switch","aria-checked":i,disabled:u,onClick:()=>o(!i),className:`
          relative inline-flex h-6 w-11 flex-shrink-0 rounded-full border-2 border-transparent
          transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2
          ${i?"bg-primary-600":"bg-gray-200"}
          ${u?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        `,children:e.jsx("span",{className:`
            inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out
            ${i?"translate-x-5":"translate-x-0"}
          `,children:i&&e.jsx(Qg,{className:"w-3 h-3 text-primary-600 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})}),(m||d)&&e.jsxs("div",{className:"flex-1",children:[m&&e.jsx("span",{className:"block text-sm font-medium text-gray-700",children:m}),d&&e.jsx("span",{className:"block text-xs text-gray-500",children:d})]})]}),kf=({isOpen:i,onClose:o,onSuccess:m,onSubmit:d})=>{const[u,b]=h.useState({name:"",code:"",description:"",isActive:!0}),[v,_]=h.useState({}),[f,R]=h.useState(!1),y=k=>{const{name:O,value:w}=k.target;b(N=>({...N,[O]:w})),v[O]&&_(N=>({...N,[O]:void 0}))},p=()=>{const k={};return u.name.trim()?u.name.trim().length<3?k.name="Region name must be at least 3 characters":u.name.trim().length>100&&(k.name="Region name must not exceed 100 characters"):k.name="Region name is required",u.code.trim()?/^[A-Z0-9-_]+$/.test(u.code.trim())?u.code.trim().length<2?k.code="Region code must be at least 2 characters":u.code.trim().length>20&&(k.code="Region code must not exceed 20 characters"):k.code="Code must contain only uppercase letters, numbers, hyphens, and underscores":k.code="Region code is required",u.description.trim()&&u.description.trim().length>500&&(k.description="Description must not exceed 500 characters"),_(k),Object.keys(k).length===0},S=async k=>{if(k.preventDefault(),!!p()){R(!0);try{const O={name:u.name.trim(),code:u.code.trim().toUpperCase(),description:u.description.trim()||void 0};await d(O),E(),m()}catch(O){O.response?.data?.message?O.response.data.message.includes("code")?_({code:O.response.data.message}):O.response.data.message.includes("name")?_({name:O.response.data.message}):alert(O.response.data.message):alert("Failed to create region. Please try again.")}finally{R(!1)}}},E=()=>{f||(b({name:"",code:"",description:"",isActive:!0}),_({}),o())};return e.jsx(Vt,{isOpen:i,onClose:E,size:"lg",children:e.jsxs("form",{onSubmit:S,children:[e.jsx(ts,{title:"Add New Region",subtitle:"Create a new geographic region in the system",onClose:E,icon:e.jsx(It,{className:"w-6 h-6 text-primary-600"})}),e.jsx(as,{children:e.jsxs("div",{className:"space-y-5",children:[e.jsx(Le,{label:"Region Name",required:!0,error:v.name,description:"Enter the full name of the region",children:e.jsx(Ye,{type:"text",name:"name",placeholder:"e.g., Punjab Region",value:u.name,onChange:y,error:v.name,disabled:f,autoFocus:!0})}),e.jsx(Le,{label:"Region Code",required:!0,error:v.code,description:"Unique identifier using uppercase letters, numbers, and hyphens",children:e.jsx(Ye,{type:"text",name:"code",placeholder:"e.g., PB-01",value:u.code,onChange:k=>{const O=k.target.value.toUpperCase();b(w=>({...w,code:O})),v.code&&_(w=>({...w,code:void 0}))},error:v.code,disabled:f,maxLength:20})}),e.jsxs(Le,{label:"Description",error:v.description,description:"Provide additional details about this region (optional)",children:[e.jsx(Jr,{name:"description",placeholder:"Enter a description for the region...",value:u.description,onChange:y,error:v.description,disabled:f,rows:4,maxLength:500}),e.jsx("div",{className:"flex justify-end mt-1",children:e.jsxs("span",{className:"text-xs text-gray-400",children:[u.description.length,"/500"]})})]}),e.jsx(Le,{label:"Status",children:e.jsx(t0,{checked:u.isActive,onChange:k=>b(O=>({...O,isActive:k})),label:u.isActive?"Active":"Inactive",description:u.isActive?"Region is active and visible to users":"Region is inactive and hidden from users",disabled:f})})]})}),e.jsxs(ss,{children:[e.jsx(Ae,{type:"button",variant:"outline",onClick:E,disabled:f,children:"Cancel"}),e.jsx(Ae,{type:"submit",variant:"primary",disabled:f,icon:f?e.jsx(Fx,{className:"w-4 h-4 animate-spin"}):void 0,children:f?"Creating...":"Create Region"})]})]})})},Mf=()=>{const[i,o]=h.useState([]),[m,d]=h.useState(!0),[u,b]=h.useState(1),[v,_]=h.useState(1),[f,R]=h.useState(0),[y,p]=h.useState(""),[S,E]=h.useState(null),[k,O]=h.useState(!1),[w,N]=h.useState(!1),[$,P]=h.useState(null),{toasts:ae,removeToast:te,success:A,error:X}=Be(),g=10,M=async()=>{try{d(!0),console.log("Fetching regions:",{currentPage:u,itemsPerPage:g,searchQuery:y});const z=await ol.getAll(u,g,y);console.log("Regions API response:",z),o(z?.data||[]),_(z?.totalPages||1),R(z?.total||0),console.log("Regions set:",z?.data||[])}catch(z){console.error("Error fetching regions:",z),o([]),_(1),R(0)}finally{d(!1)}};h.useEffect(()=>{M()},[u,y]);const T=z=>{p(z.target.value),b(1)},V=z=>{E(z),O(!0)},W=async(z,B)=>{B.stopPropagation(),P(z)},se=async()=>{if($)try{await ol.delete($),P(null),M(),A("Region deleted successfully")}catch(z){console.error("Error deleting region:",z),X(z.response?.data?.message||"Failed to delete region")}},le=async z=>{await ol.create(z)},ne=async()=>{A("Region created successfully!"),p(""),await new Promise(z=>setTimeout(z,100)),u===1&&y===""?M():b(1)},D=[{key:"code",header:"Code"},{key:"name",header:"Region Name"},{key:"districtHeadId",header:"District Head"},{key:"status",header:"Status"},{key:"createdAt",header:"Created"},{key:"actions",header:"Actions"}],G=z=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>V(z),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono font-semibold text-primary-600",children:z.code})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:z.name}),z.description&&e.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:z.description})]})}),e.jsx("td",{className:"px-6 py-4",children:z.districtHeadId&&typeof z.districtHeadId=="object"?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:z.districtHeadId.name}),e.jsx("p",{className:"text-xs text-gray-500",children:z.districtHeadId.email})]}):z.districtHeadId?e.jsx("span",{className:"text-gray-600",children:"Assigned"}):e.jsx("span",{className:"text-gray-500 italic",children:"Not Assigned"})}),e.jsx("td",{className:"px-6 py-4",children:z.isActive?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Pe,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(rt,{className:"w-3 h-3 mr-1"}),"Inactive"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-gray-600",children:new Date(z.createdAt).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex space-x-2",onClick:B=>B.stopPropagation(),children:[e.jsx("button",{onClick:B=>{B.stopPropagation(),V(z)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(Cs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:B=>W(z._id,B),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(zx,{className:"w-4 h-4"})})]})})]},z._id);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ot,{toasts:ae,onRemove:te}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Regions"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage geographic regions and districts"})]}),e.jsx(Ae,{variant:"primary",icon:e.jsx(Nd,{className:"w-4 h-4"}),onClick:()=>N(!0),children:"Add Region"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(Ye,{type:"text",placeholder:"Search regions...",value:y,onChange:T,icon:e.jsx(nt,{className:"w-5 h-5"})})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:m?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:D.map(z=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:z.header},z.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.from({length:5}).map((z,B)=>e.jsx("tr",{children:D.map(U=>e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ns,{className:"h-4 w-full"})},U.key))},B))})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:D.map(z=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:z.header},z.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i&&i.length>0?i.map(z=>G(z)):e.jsx("tr",{children:e.jsxs("td",{colSpan:D.length,className:"px-6 py-12 text-center",children:[e.jsx(It,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:y?`No regions found matching "${y}"`:"No regions found."})]})})})]})}),!m&&i.length>0&&e.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:e.jsx(ul,{currentPage:u,totalPages:v,onPageChange:b,totalItems:f,itemsPerPage:g})})]})}),e.jsx(Vt,{isOpen:k,onClose:()=>O(!1),title:"Region Details",size:"lg",children:S&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"bg-primary-100 p-3 rounded-lg",children:e.jsx(It,{className:"w-8 h-8 text-primary-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:S.name}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Code: ",S.code]})]}),e.jsx("span",{className:`
                  inline-flex px-3 py-1 text-sm font-semibold rounded-full
                  ${S.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}
                `,children:S.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Region Name"}),e.jsx("p",{className:"mt-1 text-base text-gray-900",children:S.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Region Code"}),e.jsx("p",{className:"mt-1 text-base font-mono text-gray-900",children:S.code})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Description"}),e.jsx("p",{className:"mt-1 text-base text-gray-900",children:S.description||"No description provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"District Head"}),e.jsx("div",{className:"mt-1 text-base text-gray-900",children:S.districtHeadId&&typeof S.districtHeadId=="object"?e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:S.districtHeadId.name}),e.jsx("p",{className:"text-sm text-gray-500",children:S.districtHeadId.email})]}):S.districtHeadId?e.jsxs("span",{children:["Assigned (ID: ",S.districtHeadId,")"]}):e.jsx("span",{className:"text-gray-500 italic",children:"Not Assigned"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Status"}),e.jsx("p",{className:"mt-1 text-base text-gray-900",children:S.isActive?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Created At"}),e.jsx("p",{className:"mt-1 text-base text-gray-900",children:new Date(S.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Last Updated"}),e.jsx("p",{className:"mt-1 text-base text-gray-900",children:new Date(S.updatedAt).toLocaleString()})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx(Ae,{variant:"outline",onClick:()=>O(!1),children:"Close"}),e.jsx(Ae,{variant:"primary",onClick:()=>alert("Edit functionality coming soon!"),children:"Edit Region"})]})]})}),e.jsx(Vt,{isOpen:!!$,onClose:()=>P(null),title:"Delete Region",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this region? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(Ae,{variant:"outline",onClick:()=>P(null),children:"Cancel"}),e.jsx(Ae,{variant:"danger",onClick:se,icon:e.jsx(zx,{className:"w-4 h-4"}),children:"Delete"})]})]})}),e.jsx(kf,{isOpen:w,onClose:()=>N(!1),onSubmit:le,onSuccess:ne})]})},ya={getAll:async(i=1,o=10)=>{const m=new URLSearchParams({page:i.toString(),limit:o.toString()}),u=(await ee.get(`/district-heads?${m}`)).data.data;console.log("Backend response for getAll:",u);const b={data:u.districtHeads||[],total:u.pagination?.totalItems||0,page:u.pagination?.currentPage||i,limit:u.pagination?.perPage||o,totalPages:u.pagination?.totalPages||1};return console.log("Transformed data for frontend:",b),b},getById:async i=>(await ee.get(`/district-heads/${i}`)).data.data,getByRegion:async i=>(await ee.get(`/district-heads/region/${i}`)).data.data,search:async(i,o=1,m=10)=>{const d=new URLSearchParams({q:i,page:o.toString(),limit:m.toString()}),b=(await ee.get(`/district-heads/search?${d}`)).data.data;return{data:b.districtHeads||[],total:b.pagination?.totalItems||0,page:b.pagination?.currentPage||o,limit:b.pagination?.perPage||m,totalPages:b.pagination?.totalPages||1}},create:async i=>{const o={name:i.name,email:i.email,password:i.password,cnic:i.cnic,gender:i.gender,contactNumber:i.phoneNumber,address:i.address,regionId:i.regionId};console.log("Sending to backend API:",o);const m=await ee.post("/district-heads",o);return console.log("Backend response:",m.data),m.data.data},update:async(i,o)=>{const m={...o};return o.phoneNumber!==void 0&&(m.contactNumber=o.phoneNumber,delete m.phoneNumber),(await ee.put(`/district-heads/${i}`,m)).data.data},resetPassword:async i=>(await ee.post(`/district-heads/${i}/reset-password`)).data.data,exportCSV:async(i=!1)=>{const o=i?"?includePassword=true":"";return(await ee.get(`/district-heads/export/csv${o}`,{responseType:"blob"})).data}},Ef=({isOpen:i,onClose:o,onSuccess:m})=>{const[d,u]=h.useState({name:"",email:"",password:"",cnic:"",phoneNumber:"",address:"",gender:"",regionId:""}),[b,v]=h.useState({}),[_,f]=h.useState(!1),[R,y]=h.useState(""),[p,S]=h.useState([]),[E,k]=h.useState(!0);h.useEffect(()=>{i&&(async()=>{try{k(!0);const A=await ol.getAll(1,100);S(A.data||[])}catch(A){console.error("Failed to load regions:",A)}finally{k(!1)}})()},[i]);const O=(te,A)=>{switch(te){case"name":return A.trim()?A.length<3?"Name must be at least 3 characters":A.length>100?"Name must not exceed 100 characters":"":"Name is required";case"email":return A.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A)?"":"Invalid email format":"Email is required";case"password":return A.trim()?A.length<6?"Password must be at least 6 characters":"":"Password is required";case"cnic":return A.trim()?/^\d{5}-\d{7}-\d{1}$/.test(A)?"":"CNIC format: 12345-1234567-1":"CNIC is required";case"phoneNumber":if(A&&A.length>0){const M=A.replace(/[-\s]/g,"");if(!/^(\+92|92|0)?3\d{9}$/.test(M))return"Invalid phone number format (e.g., 03XX-XXXXXXX)"}return"";case"gender":return A?["Male","Female","Other"].includes(A)?"":"Gender must be Male, Female, or Other":"Gender is required";case"regionId":return A?"":"Region is required";default:return""}},w=te=>{const{name:A,value:X}=te.target;let g=X;A==="cnic"&&(g=X.replace(/\D/g,"").replace(/^(\d{5})(\d{7})(\d{1}).*/,"$1-$2-$3").substring(0,15)),u(M=>({...M,[A]:g})),b[A]&&v(M=>({...M,[A]:""})),y("")},N=te=>{const{name:A,value:X}=te.target,g=O(A,X);v(M=>({...M,[A]:g}))},$=()=>{const te={};return te.name=O("name",d.name),te.email=O("email",d.email),te.password=O("password",d.password),te.cnic=O("cnic",d.cnic),te.phoneNumber=O("phoneNumber",d.phoneNumber),te.gender=O("gender",d.gender),te.regionId=O("regionId",d.regionId),v(te),!Object.values(te).some(A=>A)},P=async te=>{if(te.preventDefault(),y(""),!!$()){f(!0);try{const A={name:d.name.trim(),email:d.email.trim().toLowerCase(),password:d.password.trim(),cnic:d.cnic.trim(),gender:d.gender,regionId:d.regionId};d.phoneNumber.trim()&&(A.phoneNumber=d.phoneNumber.trim()),d.address.trim()&&(A.address=d.address.trim()),console.log("Submitting district head data:",A),await ya.create(A),m(),ae()}catch(A){if(console.error("Failed to create district head:",A),console.log("Full error response:",A.response),console.log("Error data:",A.response?.data),console.log("Error status:",A.response?.status),A.response?.data?.errors&&Array.isArray(A.response.data.errors)){const X=A.response.data.errors,g={},M=[];console.log("Backend validation errors:",X),X.forEach(V=>{const se={name:"name",email:"email",password:"password",cnic:"cnic",phoneNumber:"phoneNumber",contactNumber:"phoneNumber",gender:"gender",regionId:"regionId"}[V.field];se&&(g[se]=V.message),M.push(`${V.field}: ${V.message}`)}),v(V=>({...V,...g}));const T=M.length>0?`Validation failed:
${M.map(V=>` ${V}`).join(`
`)}`:A.response?.data?.message||"Validation failed";y(T)}else y(A.response?.data?.message||"Failed to create district head. Please try again.")}finally{f(!1)}}},ae=()=>{u({name:"",email:"",password:"",cnic:"",phoneNumber:"",address:"",gender:"",regionId:""}),v({}),y(""),o()};return e.jsx(Vt,{isOpen:i,onClose:ae,size:"lg",children:e.jsxs("form",{onSubmit:P,children:[e.jsx(ts,{icon:e.jsx(Zg,{className:"w-6 h-6 text-primary-600"}),title:"Add New District Head",onClose:ae}),e.jsx(as,{children:e.jsxs("div",{className:"space-y-5",children:[R&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium whitespace-pre-line",children:R}),Object.keys(b).length>0&&e.jsx("ul",{className:"mt-2 text-sm space-y-1",children:Object.entries(b).map(([te,A])=>A&&e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block mr-2",children:""}),e.jsxs("span",{children:[e.jsxs("span",{className:"font-medium capitalize",children:[te,":"]})," ",A]})]},te))})]})]})}),e.jsx(Le,{label:"Full Name",required:!0,error:b.name,description:"Enter the full name of the district head",children:e.jsx(Ye,{name:"name",value:d.name,onChange:w,onBlur:N,placeholder:"e.g., Muhammad Ali Khan",error:b.name,maxLength:100})}),e.jsx(Le,{label:"Email Address",required:!0,error:b.email,description:"Official email address for login",children:e.jsx(Ye,{type:"email",name:"email",value:d.email,onChange:w,onBlur:N,placeholder:"e.g., ali.khan@punjabcolleges.edu.pk",error:b.email})}),e.jsx(Le,{label:"Password",required:!0,error:b.password,description:"Minimum 6 characters",children:e.jsx(Ye,{type:"password",name:"password",value:d.password,onChange:w,onBlur:N,placeholder:"Enter password",error:b.password,minLength:6})}),e.jsx(Le,{label:"CNIC",required:!0,error:b.cnic,description:"13-digit national identity card number",children:e.jsx(Ye,{name:"cnic",value:d.cnic,onChange:w,onBlur:N,placeholder:"12345-1234567-1",error:b.cnic,maxLength:15})}),e.jsx(Le,{label:"Phone Number",error:b.phoneNumber,description:"Optional contact number",children:e.jsx(Ye,{name:"phoneNumber",value:d.phoneNumber,onChange:w,onBlur:N,placeholder:"e.g., 03001234567",error:b.phoneNumber})}),e.jsx(Le,{label:"Gender",required:!0,error:b.gender,description:"Select gender",children:e.jsxs("select",{name:"gender",value:d.gender,onChange:w,onBlur:N,className:`w-full px-4 py-2.5 border rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 ${b.gender?"border-red-500":"border-gray-300 hover:border-gray-400"}`,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})}),e.jsx(Le,{label:"Assigned Region",required:!0,error:b.regionId,description:"Select the region to assign",children:e.jsxs("select",{name:"regionId",value:d.regionId,onChange:w,onBlur:N,disabled:E,className:`w-full px-4 py-2.5 border rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 ${b.regionId?"border-red-500":"border-gray-300 hover:border-gray-400"} ${E?"bg-gray-100 cursor-not-allowed":"bg-white"}`,children:[e.jsx("option",{value:"",children:E?"Loading regions...":"Select a region"}),p.map(te=>e.jsxs("option",{value:te._id,children:[te.name," (",te.code,")"]},te._id))]})}),e.jsxs(Le,{label:"Address",description:"Optional residential address (max 500 characters)",children:[e.jsx(Jr,{name:"address",value:d.address,onChange:w,placeholder:"Enter complete address...",rows:3,maxLength:500}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[d.address.length,"/500 characters"]})]})]})}),e.jsxs(ss,{children:[e.jsx(Ae,{type:"button",variant:"secondary",onClick:ae,children:"Cancel"}),e.jsx(Ae,{type:"submit",isLoading:_,disabled:E,children:_?"Creating...":"Create District Head"})]})]})})},Tf=({isOpen:i,onClose:o,onSuccess:m,districtHead:d})=>{const[u,b]=h.useState({name:"",email:"",cnic:"",phoneNumber:"",address:"",regionId:"",isActive:!0}),[v,_]=h.useState({}),[f,R]=h.useState(!1),[y,p]=h.useState(""),[S,E]=h.useState([]),[k,O]=h.useState(!0);h.useEffect(()=>{if(i&&d){const X=typeof d.regionId=="string"?d.regionId:d.regionId?._id||"";b({name:d.name||"",email:d.email||"",cnic:d.cnic||"",phoneNumber:d.phoneNumber||"",address:d.address||"",regionId:X,isActive:d.isActive??!0})}},[i,d]),h.useEffect(()=>{i&&(async()=>{try{O(!0);const g=await ol.getAll(1,100);E(g.data||[])}catch(g){console.error("Failed to load regions:",g)}finally{O(!1)}})()},[i]);const w=(X,g)=>{const M=String(g);switch(X){case"name":return M.trim()?M.length<3?"Name must be at least 3 characters":M.length>100?"Name must not exceed 100 characters":"":"Name is required";case"email":return M.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M)?"":"Invalid email format":"Email is required";case"cnic":return M.trim()?/^\d{5}-\d{7}-\d{1}$/.test(M)?"":"CNIC format: 12345-1234567-1":"CNIC is required";case"phoneNumber":if(M&&M.length>0){const W=M.replace(/[-\s]/g,"");if(!/^(\+92|92|0)?3\d{9}$/.test(W))return"Invalid phone number format (e.g., 03XX-XXXXXXX)"}return"";case"regionId":return M?"":"Region is required";default:return""}},N=X=>{const{name:g,value:M}=X.target;let T=M;g==="cnic"&&(T=M.replace(/\D/g,"").replace(/^(\d{5})(\d{7})(\d{1}).*/,"$1-$2-$3").substring(0,15)),b(V=>({...V,[g]:T})),v[g]&&_(V=>({...V,[g]:""})),p("")},$=X=>{b(g=>({...g,isActive:X}))},P=X=>{const{name:g,value:M}=X.target,T=w(g,M);_(V=>({...V,[g]:T}))},ae=()=>{const X={};return X.name=w("name",u.name),X.email=w("email",u.email),X.cnic=w("cnic",u.cnic),X.phoneNumber=w("phoneNumber",u.phoneNumber),X.regionId=w("regionId",u.regionId),_(X),!Object.values(X).some(g=>g)},te=async X=>{if(X.preventDefault(),p(""),!!ae()){R(!0);try{const g={name:u.name.trim(),email:u.email.trim().toLowerCase(),cnic:u.cnic.trim(),regionId:u.regionId,isActive:u.isActive};u.phoneNumber.trim()&&(g.phoneNumber=u.phoneNumber.trim()),u.address.trim()&&(g.address=u.address.trim()),await ya.update(d._id,g),m(),A()}catch(g){if(console.error("Failed to update district head:",g),g.response?.data?.errors&&Array.isArray(g.response.data.errors)){const M=g.response.data.errors,T={},V=[];M.forEach(W=>{const le={name:"name",email:"email",cnic:"cnic",phoneNumber:"phoneNumber",contactNumber:"phoneNumber",regionId:"regionId"}[W.field];le&&(T[le]=W.message),V.push(`${W.field}: ${W.message}`)}),_(W=>({...W,...T})),p(g.response?.data?.message||V.join(", "))}else p(g.response?.data?.message||"Failed to update district head. Please try again.")}finally{R(!1)}}},A=()=>{_({}),p(""),o()};return e.jsx(Vt,{isOpen:i,onClose:A,size:"lg",children:e.jsxs("form",{onSubmit:te,children:[e.jsx(ts,{icon:e.jsx(Px,{className:"w-6 h-6 text-primary-600"}),title:"Edit District Head",subtitle:`Update information for ${d?.name||""}`,onClose:A}),e.jsx(as,{children:e.jsxs("div",{className:"space-y-5",children:[y&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:y}),Object.keys(v).length>0&&e.jsx("ul",{className:"mt-2 text-sm list-disc list-inside space-y-1",children:Object.entries(v).map(([X,g])=>g&&e.jsxs("li",{children:[e.jsxs("span",{className:"font-medium capitalize",children:[X,":"]})," ",g]},X))})]})]})}),e.jsx(Le,{label:"Full Name",required:!0,error:v.name,description:"Enter the full name of the district head",children:e.jsx(Ye,{name:"name",value:u.name,onChange:N,onBlur:P,placeholder:"e.g., Muhammad Ali Khan",error:v.name,maxLength:100})}),e.jsx(Le,{label:"Email Address",required:!0,error:v.email,description:"Official email address for login",children:e.jsx(Ye,{type:"email",name:"email",value:u.email,onChange:N,onBlur:P,placeholder:"e.g., ali.khan@punjabcolleges.edu.pk",error:v.email})}),e.jsx(Le,{label:"CNIC",required:!0,error:v.cnic,description:"13-digit national identity card number",children:e.jsx(Ye,{name:"cnic",value:u.cnic,onChange:N,onBlur:P,placeholder:"12345-1234567-1",error:v.cnic,maxLength:15})}),e.jsx(Le,{label:"Phone Number",error:v.phoneNumber,description:"Optional contact number",children:e.jsx(Ye,{name:"phoneNumber",value:u.phoneNumber,onChange:N,onBlur:P,placeholder:"e.g., 03001234567",error:v.phoneNumber})}),e.jsx(Le,{label:"Assigned Region",required:!0,error:v.regionId,description:"Select the region to assign",children:e.jsxs("select",{name:"regionId",value:u.regionId,onChange:N,onBlur:P,disabled:k,className:`w-full px-4 py-2.5 border rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 ${v.regionId?"border-red-500":"border-gray-300 hover:border-gray-400"} ${k?"bg-gray-100 cursor-not-allowed":"bg-white"}`,children:[e.jsx("option",{value:"",children:k?"Loading regions...":"Select a region"}),S.map(X=>e.jsxs("option",{value:X._id,children:[X.name," (",X.code,")"]},X._id))]})}),e.jsxs(Le,{label:"Address",description:"Optional residential address (max 500 characters)",children:[e.jsx(Jr,{name:"address",value:u.address,onChange:N,placeholder:"Enter complete address...",rows:3,maxLength:500}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[u.address.length,"/500 characters"]})]}),e.jsx(Le,{label:"Active Status",description:"Enable or disable this district head's account",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(t0,{checked:u.isActive,onChange:$}),e.jsx("span",{className:"text-sm text-gray-700",children:u.isActive?"Active":"Inactive"})]})})]})}),e.jsxs(ss,{children:[e.jsx(Ae,{type:"button",variant:"secondary",onClick:A,children:"Cancel"}),e.jsx(Ae,{type:"submit",isLoading:f,disabled:k,children:f?"Updating...":"Update District Head"})]})]})})},zf=({isOpen:i,onClose:o,districtHead:m})=>{if(!m)return null;const d=b=>new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),u=({icon:b,label:v,value:_,highlight:f=!1})=>e.jsxs("div",{className:"flex items-start space-x-3 py-3 border-b border-gray-100 last:border-0",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(b,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:v}),e.jsx("p",{className:`mt-1 text-sm ${f?"font-semibold text-primary-600":"text-gray-900"}`,children:_||e.jsx("span",{className:"text-gray-400 italic",children:"Not provided"})})]})]});return e.jsxs(Vt,{isOpen:i,onClose:o,size:"lg",children:[e.jsx(ts,{icon:e.jsx(Cs,{className:"w-6 h-6 text-primary-600"}),title:"District Head Details",subtitle:`Complete information for ${m.name}`,onClose:o}),e.jsx(as,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex items-center space-x-2",children:m.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Active Account"})]}):e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Inactive Account"})]})}),e.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",m._id.substring(0,8),"..."]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3 uppercase tracking-wide",children:"Personal Information"}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg divide-y divide-gray-100",children:[e.jsx(u,{icon:Rx,label:"Full Name",value:m.name,highlight:!0}),e.jsx(u,{icon:Wt,label:"Email Address",value:m.email}),e.jsx(u,{icon:xn,label:"CNIC",value:m.cnic}),e.jsx(u,{icon:hn,label:"Phone Number",value:m.phoneNumber}),e.jsx(u,{icon:It,label:"Address",value:m.address})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3 uppercase tracking-wide",children:"Assignment Details"}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:typeof m.regionId=="object"&&m.regionId?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Assigned Region"}),e.jsx("span",{className:"px-3 py-1 bg-primary-100 text-primary-700 text-sm font-semibold rounded-full",children:m.regionId.code})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:m.regionId.name})]}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No region assigned"})})]}),m.user&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3 uppercase tracking-wide",children:"Account Information"}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg divide-y divide-gray-100",children:[e.jsx(u,{icon:Rx,label:"User Role",value:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:m.user.role})}),e.jsx(u,{icon:Wt,label:"Login Email",value:m.user.email})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3 uppercase tracking-wide",children:"Record Information"}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg divide-y divide-gray-100",children:[e.jsx(u,{icon:ht,label:"Created At",value:d(m.createdAt)}),e.jsx(u,{icon:ht,label:"Last Updated",value:d(m.updatedAt)})]})]})]})}),e.jsx(ss,{children:e.jsx(Ae,{variant:"secondary",onClick:o,children:"Close"})})]})},Rf=()=>{const[i,o]=h.useState([]),[m,d]=h.useState(!0),[u,b]=h.useState(1),[v,_]=h.useState(1),[f,R]=h.useState(0),[y,p]=h.useState(""),[S,E]=h.useState(!1),[k,O]=h.useState(!1),[w,N]=h.useState(!1),[$,P]=h.useState(!1),[ae,te]=h.useState(null),[A,X]=h.useState(!1),[g,M]=h.useState(!1),[T,V]=h.useState(!1),{success:W,error:se}=Be(),le=10,ne=h.useCallback(async()=>{try{d(!0);let Q;y.trim()?(E(!0),Q=await ya.search(y,u,le)):(E(!1),Q=await ya.getAll(u,le)),o(Q.data||[]),_(Q.totalPages||1),R(Q.total||0)}catch(Q){console.error("Failed to fetch district heads:",Q),se(Q.response?.data?.message||"Failed to load district heads"),o([])}finally{d(!1)}},[u,y,se]);h.useEffect(()=>{ne()},[ne]),h.useEffect(()=>{const Q=setTimeout(()=>{u!==1?b(1):ne()},500);return()=>clearTimeout(Q)},[y]);const D=async()=>{W("District Head created successfully!"),p(""),await new Promise(Q=>setTimeout(Q,100)),u===1&&y===""?ne():b(1)},G=async()=>{W("District Head updated successfully!"),await new Promise(Q=>setTimeout(Q,100)),ne()},z=async Q=>{try{const he=typeof Q.userId=="string"?Q.userId:Q.userId._id,Ne=await ya.getById(he);te(Ne),P(!0)}catch(he){console.error("Failed to fetch district head details:",he),se(he.response?.data?.message||"Failed to load details")}},B=Q=>{te(Q),N(!0)},U=Q=>{te(Q),X(!0)},ie=async()=>{if(ae)try{M(!0);const Q=await ya.resetPassword(ae._id);console.log("New Password:",Q.newPassword),W(`Password reset successful! New password: ${Q.newPassword}. Check console for details.`),X(!1)}catch(Q){console.error("Failed to reset password:",Q),se(Q.response?.data?.message||"Failed to reset password")}finally{M(!1)}},me=async Q=>{try{V(!0);const he=await ya.exportCSV(Q),Ne=window.URL.createObjectURL(he),ut=document.createElement("a");ut.href=Ne,ut.download=`district-heads-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(ut),ut.click(),document.body.removeChild(ut),window.URL.revokeObjectURL(Ne),W("District Heads exported successfully!")}catch(he){console.error("Failed to export:",he),se(he.response?.data?.message||"Failed to export data")}finally{V(!1)}},xe=[{key:"name",header:"Name"},{key:"email",header:"Email"},{key:"cnic",header:"CNIC"},{key:"region",header:"Region"},{key:"status",header:"Status"},{key:"actions",header:"Actions"}],I=Q=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>z(Q),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center",children:e.jsx(De,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:Q.name}),Q.phoneNumber&&e.jsx("p",{className:"text-xs text-gray-500",children:Q.phoneNumber})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:Q.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xn,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 font-mono",children:Q.cnic})]})}),e.jsx("td",{className:"px-6 py-4",children:typeof Q.regionId=="object"&&Q.regionId?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(It,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:Q.regionId.name}),e.jsx("p",{className:"text-xs text-gray-500",children:Q.regionId.code})]})]}):e.jsx("span",{className:"text-sm text-gray-500 italic",children:"Not assigned"})}),e.jsx("td",{className:"px-6 py-4",children:Q.isActive?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Pe,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(rt,{className:"w-3 h-3 mr-1"}),"Inactive"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",onClick:he=>he.stopPropagation(),children:[e.jsx("button",{onClick:()=>z(Q),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(Cs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>B(Q),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Edit",children:e.jsx(Px,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>U(Q),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Reset Password",children:e.jsx(Lx,{className:"w-4 h-4"})})]})})]},Q._id);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary-100 flex items-center justify-center",children:e.jsx(De,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"District Heads"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage district head accounts and assignments"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Ae,{variant:"secondary",onClick:()=>me(!1),isLoading:T,children:[e.jsx($g,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),e.jsxs("div",{className:"absolute right-0 mt-1 w-56 bg-white rounded-lg shadow-lg border border-gray-200 hidden group-hover:block z-10",children:[e.jsx("button",{onClick:()=>me(!1),className:"w-full text-left px-4 py-2 hover:bg-gray-50 text-sm",children:"Standard Export"}),e.jsx("button",{onClick:()=>me(!0),className:"w-full text-left px-4 py-2 hover:bg-gray-50 text-sm border-t",children:"With Password Reset"})]})]}),e.jsxs(Ae,{onClick:()=>O(!0),children:[e.jsx(Nd,{className:"w-4 h-4 mr-2"}),"Add District Head"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ye,{placeholder:"Search by name, email, or CNIC...",value:y,onChange:Q=>p(Q.target.value),icon:e.jsx(nt,{className:"w-5 h-5"})})}),e.jsxs(Ae,{variant:"outline",children:[e.jsx(Sa,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),S&&y&&e.jsxs("div",{className:"mt-4 flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(nt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Showing results for"," ",e.jsxs("span",{className:"font-semibold",children:['"',y,'"']})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:m?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:xe.map(Q=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:Q.header},Q.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.from({length:5}).map((Q,he)=>e.jsx("tr",{children:xe.map(Ne=>e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ns,{className:"h-4 w-full"})},Ne.key))},he))})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:xe.map(Q=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:Q.header},Q.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i&&i.length>0?i.map(Q=>I(Q)):e.jsx("tr",{children:e.jsx("td",{colSpan:xe.length,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[e.jsx(De,{className:"w-12 h-12 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:S?`No district heads found matching "${y}"`:"No district heads found. Add your first district head to get started."})]})})})})]})}),!m&&i.length>0&&e.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:e.jsx(ul,{currentPage:u,totalPages:v,onPageChange:b,totalItems:f,itemsPerPage:le})})]})}),e.jsx(Ef,{isOpen:k,onClose:()=>O(!1),onSuccess:D}),ae&&e.jsxs(e.Fragment,{children:[e.jsx(Tf,{isOpen:w,onClose:()=>{N(!1),te(null)},onSuccess:G,districtHead:ae}),e.jsx(zf,{isOpen:$,onClose:()=>{P(!1),te(null)},districtHead:ae})]}),A&&ae&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsx(Lx,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reset Password"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Confirm password reset"})]})]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-6",children:["Are you sure you want to reset the password for"," ",e.jsx("span",{className:"font-semibold",children:ae.name}),"? A new random password will be generated."]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(Ae,{variant:"secondary",onClick:()=>{X(!1),te(null)},children:"Cancel"}),e.jsx(Ae,{onClick:ie,isLoading:g,children:"Reset Password"})]})]})})]})},Hr={getAll:async(i=1,o=10)=>{const m=new URLSearchParams({page:i.toString(),limit:o.toString()}),u=(await ee.get(`/colleges?${m}`)).data.data;return{data:u.colleges||[],total:u.pagination?.totalItems||0,page:u.pagination?.currentPage||i,limit:u.pagination?.perPage||o,totalPages:u.pagination?.totalPages||1}},getById:async i=>(await ee.get(`/colleges/${i}`)).data.data,search:async(i,o=1,m=10)=>{const d=new URLSearchParams({q:i,page:o.toString(),limit:m.toString()}),b=(await ee.get(`/colleges/search?${d}`)).data.data;return{data:b.colleges||[],total:b.pagination?.totalItems||0,page:b.pagination?.currentPage||o,limit:b.pagination?.perPage||m,totalPages:b.pagination?.totalPages||1}},create:async i=>(await ee.post("/colleges",i)).data.data,update:async(i,o)=>(await ee.put(`/colleges/${i}`,o)).data.data,delete:async i=>{await ee.put(`/colleges/${i}`,{isActive:!1})}},Lf=({isOpen:i,onClose:o,onSuccess:m})=>{const[d,u]=h.useState({name:"",code:"",regionId:"",address:"",city:"",establishedYear:"",password:""}),[b,v]=h.useState({}),[_,f]=h.useState(""),[R,y]=h.useState(!1),[p,S]=h.useState([]),[E,k]=h.useState(!1);h.useEffect(()=>{i&&O()},[i]);const O=async()=>{try{k(!0);const X=await ol.getAll(1,100);S(X.data||[])}catch(X){console.error("Failed to fetch regions:",X)}finally{k(!1)}},w=X=>X.trim()?`${X.trim().toLowerCase()}@decfsd.edu.pk`:"",N=(X,g)=>{switch(X){case"name":return g.trim()?g.trim().length<3?"College name must be at least 3 characters":g.trim().length>200?"College name must not exceed 200 characters":"":"College name is required";case"code":return g.trim()?/^[A-Z0-9]+$/.test(g.trim())?g.trim().length<2||g.trim().length>10?"Code must be between 2 and 10 characters":"":"Code must contain only uppercase letters and numbers":"College code is required";case"regionId":return g?"":"Region is required";case"address":return g.trim()?g.trim().length<10?"Address must be at least 10 characters":g.trim().length>500?"Address must not exceed 500 characters":"":"Address is required";case"city":return g.trim()?g.trim().length<2?"City name must be at least 2 characters":g.trim().length>100?"City name must not exceed 100 characters":"":"City is required";case"establishedYear":if(g&&!/^\d{4}$/.test(g))return"Year must be a 4-digit number";const M=parseInt(g),T=new Date().getFullYear();return g&&(M<1900||M>T)?`Year must be between 1900 and ${T}`:"";case"password":return g?g.length<8?"Password must be at least 8 characters":"":"Password is required";default:return""}},$=X=>{const{name:g,value:M}=X.target,T=g==="code"?M.toUpperCase():M;u(V=>({...V,[g]:T})),b[g]&&v(V=>({...V,[g]:""}))},P=X=>{const{name:g,value:M}=X.target,T=N(g,M);v(V=>({...V,[g]:T}))},ae=()=>{const X={};return X.name=N("name",d.name),X.code=N("code",d.code),X.regionId=N("regionId",d.regionId),X.address=N("address",d.address),X.city=N("city",d.city),X.establishedYear=N("establishedYear",d.establishedYear),X.password=N("password",d.password),v(X),!Object.values(X).some(g=>g)},te=async X=>{if(X.preventDefault(),f(""),!!ae()){y(!0);try{const g=w(d.code),M={name:d.name.trim(),code:d.code.trim().toUpperCase(),regionId:d.regionId,address:d.address.trim(),city:d.city.trim(),email:g,password:d.password};d.establishedYear&&(M.establishedYear=parseInt(d.establishedYear)),console.log("Submitting college data:",M);const T=await Hr.create(M);m(T),A()}catch(g){if(console.error("Failed to create college:",g),g.response?.data?.errors&&Array.isArray(g.response.data.errors)){const M=g.response.data.errors,T={},V=[];M.forEach(se=>{const ne={name:"name",code:"code",regionId:"regionId",address:"address",city:"city",establishedYear:"establishedYear",password:"password"}[se.field];ne&&(T[ne]=se.message),V.push(`${se.field}: ${se.message}`)}),v(se=>({...se,...T}));const W=V.length>0?`Validation failed:
${V.map(se=>` ${se}`).join(`
`)}`:g.response?.data?.message||"Validation failed";f(W)}else f(g.response?.data?.message||"Failed to create college. Please try again.")}finally{y(!1)}}},A=()=>{u({name:"",code:"",regionId:"",address:"",city:"",establishedYear:"",password:""}),v({}),f(""),o()};return e.jsx(Vt,{isOpen:i,onClose:A,size:"lg",children:e.jsxs("form",{onSubmit:te,children:[e.jsx(ts,{icon:e.jsx(wt,{className:"w-6 h-6 text-blue-600"}),title:"Add New College",onClose:A}),e.jsx(as,{children:e.jsxs("div",{className:"space-y-5",children:[_&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ws,{className:"w-5 h-5 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium whitespace-pre-line",children:_})})]})}),e.jsx(Le,{label:"College Name",required:!0,error:b.name,description:"Full official name of the college",children:e.jsx(Ye,{name:"name",value:d.name,onChange:$,onBlur:P,placeholder:"e.g., Government College University",error:b.name,maxLength:200})}),e.jsx(Le,{label:"College Code",required:!0,error:b.code,description:"Unique code (uppercase letters and numbers only)",children:e.jsx(Ye,{name:"code",value:d.code,onChange:$,onBlur:P,placeholder:"e.g., GCU001",error:b.code,maxLength:10})}),e.jsx(Le,{label:"Region",required:!0,error:b.regionId,description:"Select the region this college belongs to",children:e.jsxs("select",{name:"regionId",value:d.regionId,onChange:$,onBlur:P,disabled:E,className:`w-full px-4 py-2.5 border rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ${b.regionId?"border-red-500":"border-gray-300 hover:border-gray-400"}`,children:[e.jsx("option",{value:"",children:E?"Loading regions...":"Select Region"}),p.map(X=>e.jsxs("option",{value:X._id,children:[X.name," (",X.code,")"]},X._id))]})}),e.jsx(Le,{label:"City",required:!0,error:b.city,description:"City where the college is located",children:e.jsx(Ye,{name:"city",value:d.city,onChange:$,onBlur:P,placeholder:"e.g., Lahore",error:b.city,maxLength:100})}),e.jsxs(Le,{label:"Address",required:!0,error:b.address,description:"Complete physical address",children:[e.jsx("textarea",{name:"address",value:d.address,onChange:$,onBlur:P,placeholder:"Enter complete address",rows:3,maxLength:500,className:`w-full px-4 py-2.5 border rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none ${b.address?"border-red-500":"border-gray-300 hover:border-gray-400"}`}),b.address&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:b.address})]}),e.jsx(Le,{label:"Established Year",error:b.establishedYear,description:"Optional - Year the college was established",children:e.jsx(Ye,{type:"number",name:"establishedYear",value:d.establishedYear,onChange:$,onBlur:P,placeholder:"e.g., 2005",error:b.establishedYear,min:1900,max:new Date().getFullYear()})}),e.jsxs("div",{className:"border-t border-gray-200 pt-5 mt-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-4 uppercase",children:"College Admin Account"}),e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address (Auto-generated)"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Email will be automatically generated based on college code"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("code",{className:"flex-1 px-3 py-2 bg-white border border-blue-300 rounded text-sm font-mono text-blue-900",children:d.code.trim()?w(d.code):"collegecode@decfsd.edu.pk"})}),!d.code.trim()&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a college code above to see the generated email"})]}),e.jsx(Le,{label:"Password",required:!0,error:b.password,description:"Minimum 8 characters",children:e.jsx(Ye,{type:"password",name:"password",value:d.password,onChange:$,onBlur:P,placeholder:"Enter password",error:b.password,minLength:8})})]})]})}),e.jsxs(ss,{children:[e.jsx(Ae,{type:"button",variant:"secondary",onClick:A,disabled:R,children:"Cancel"}),e.jsx(Ae,{type:"submit",disabled:R,children:R?"Creating...":"Create College"})]})]})})},_f=({isOpen:i,onClose:o,credentials:m})=>{const[d,u]=mn.useState(!1),[b,v]=mn.useState(null);if(!m)return null;const _=(R,y)=>{navigator.clipboard.writeText(R),v(y),setTimeout(()=>v(null),2e3)},f=()=>{u(!1),v(null),o()};return e.jsxs(Vt,{isOpen:i,onClose:f,size:"md",children:[e.jsx(ts,{icon:e.jsx(Pe,{className:"w-6 h-6 text-green-600"}),title:"College Created Successfully!",onClose:f}),e.jsx(as,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:m.college.name})," has been created successfully. A College Admin account has been created with the following credentials:"]})}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-amber-800 font-medium",children:" Important: Save these credentials securely. The password will not be shown again."})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email (Username)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg font-mono text-sm",children:m.credentials.email}),e.jsx("button",{type:"button",onClick:()=>_(m.credentials.email,"email"),className:"p-3 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Copy email",children:b==="email"?e.jsx(Pe,{className:"w-5 h-5 text-green-600"}):e.jsx(_x,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg font-mono text-sm",children:d?m.credentials.password:""}),e.jsx("button",{type:"button",onClick:()=>u(!d),className:"p-3 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:d?"Hide password":"Show password",children:d?e.jsx(Jx,{className:"w-5 h-5"}):e.jsx(Cs,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>_(m.credentials.password,"password"),className:"p-3 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Copy password",children:b==="password"?e.jsx(Pe,{className:"w-5 h-5 text-green-600"}):e.jsx(_x,{className:"w-5 h-5"})})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"College Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"College Code:"}),e.jsx("p",{className:"font-mono font-medium text-gray-900",children:m.college.code})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"City:"}),e.jsx("p",{className:"font-medium text-gray-900",children:m.college.city})]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Next Steps:"}),e.jsx("br",{}),"1. Share these credentials with the College Admin securely",e.jsx("br",{}),"2. Advise them to change their password after first login",e.jsx("br",{}),"3. They can access the system at the College Admin portal"]})})]})}),e.jsx(ss,{children:e.jsx(Ae,{onClick:f,children:"Close"})})]})},Of=()=>{const[i,o]=h.useState([]),[m,d]=h.useState(!0),[u,b]=h.useState(1),[v,_]=h.useState(1),[f,R]=h.useState(0),[y,p]=h.useState(""),[S,E]=h.useState(!1),[k,O]=h.useState(!1),[w,N]=h.useState(!1),[$,P]=h.useState(!1),[ae,te]=h.useState(null),[A,X]=h.useState(null),{error:g,success:M}=Be(),T=10,V=h.useCallback(async()=>{try{d(!0);let D;y.trim()?(E(!0),D=await Hr.search(y,u,T)):(E(!1),D=await Hr.getAll(u,T)),o(D.data||[]),_(D.totalPages||1),R(D.total||0)}catch(D){console.error("Failed to fetch colleges:",D),g(D.response?.data?.message||"Failed to load colleges"),o([])}finally{d(!1)}},[u,y,g]);h.useEffect(()=>{V()},[V]),h.useEffect(()=>{const D=setTimeout(()=>{u!==1?b(1):V()},500);return()=>clearTimeout(D)},[y]);const W=async D=>{try{const G=await Hr.getById(D._id);te(G),O(!0)}catch(G){console.error("Failed to fetch college details:",G),g(G.response?.data?.message||"Failed to load details")}},se=D=>{M("College created successfully!"),X(D),P(!0),V()},le=[{key:"name",header:"College Name"},{key:"code",header:"Code"},{key:"city",header:"City"},{key:"region",header:"Region"},{key:"status",header:"Status"},{key:"actions",header:"Actions"}],ne=D=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>W(D),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center",children:e.jsx(wt,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:D.name}),D.address&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:D.address})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:D.code})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(It,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:D.city})]})}),e.jsx("td",{className:"px-6 py-4",children:typeof D.regionId=="object"&&D.regionId?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:D.regionId.name}),e.jsx("p",{className:"text-xs text-gray-500",children:D.regionId.code})]}):e.jsx("span",{className:"text-sm text-gray-500 italic",children:"Not assigned"})}),e.jsx("td",{className:"px-6 py-4",children:D.isActive?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Pe,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(rt,{className:"w-3 h-3 mr-1"}),"Inactive"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center space-x-2",onClick:G=>G.stopPropagation(),children:e.jsx("button",{onClick:()=>W(D),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(Cs,{className:"w-4 h-4"})})})})]},D._id);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary-100 flex items-center justify-center",children:e.jsx(wt,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Colleges"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"View and manage all colleges in the system"})]})]}),e.jsxs(Ae,{onClick:()=>N(!0),children:[e.jsx(Nd,{className:"w-4 h-4 mr-2"}),"Add College"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ye,{placeholder:"Search by name, code, or city...",value:y,onChange:D=>p(D.target.value),icon:e.jsx(nt,{className:"w-5 h-5"})})}),e.jsxs(Ae,{variant:"outline",children:[e.jsx(Sa,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),S&&y&&e.jsxs("div",{className:"mt-4 flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(nt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Showing results for"," ",e.jsxs("span",{className:"font-semibold",children:['"',y,'"']})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:m?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:le.map(D=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:D.header},D.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.from({length:5}).map((D,G)=>e.jsx("tr",{children:le.map(z=>e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ns,{className:"h-4 w-full"})},z.key))},G))})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:le.map(D=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:D.header},D.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i&&i.length>0?i.map(D=>ne(D)):e.jsx("tr",{children:e.jsx("td",{colSpan:le.length,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[e.jsx(wt,{className:"w-12 h-12 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:S?`No colleges found matching "${y}"`:"No colleges found in the system."})]})})})})]})}),!m&&i.length>0&&e.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:e.jsx(ul,{currentPage:u,totalPages:v,onPageChange:b,totalItems:f,itemsPerPage:T})})]})}),ae&&e.jsxs(Vt,{isOpen:k,onClose:()=>O(!1),size:"lg",children:[e.jsx(ts,{icon:e.jsx(wt,{className:"w-6 h-6 text-primary-600"}),title:"College Details",subtitle:ae.name,onClose:()=>O(!1)}),e.jsx(as,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex items-center space-x-2",children:ae.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Active College"})]}):e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Inactive College"})]})}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Code: ",ae.code]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3 uppercase tracking-wide",children:"College Information"}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg divide-y divide-gray-100",children:[e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(wt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"College Name"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-primary-600",children:ae.name})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(It,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Location"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:ae.city}),ae.address&&e.jsx("p",{className:"mt-0.5 text-xs text-gray-500",children:ae.address})]})]})]})]}),ae.region&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3 uppercase tracking-wide",children:"Region Assignment"}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Assigned Region"}),e.jsx("span",{className:"px-3 py-1 bg-primary-100 text-primary-700 text-sm font-semibold rounded-full",children:ae.region.code})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-2",children:ae.region.name})]})]})]})}),e.jsx(ss,{children:e.jsx(Ae,{variant:"secondary",onClick:()=>O(!1),children:"Close"})})]}),e.jsx(Lf,{isOpen:w,onClose:()=>N(!1),onSuccess:se}),e.jsx(_f,{isOpen:$,onClose:()=>P(!1),credentials:A})]})},bd={getAll:async(i=1,o=10)=>{const m=new URLSearchParams({page:i.toString(),limit:o.toString()});return(await ee.get(`/teachers?${m}`)).data.data},getById:async i=>(await ee.get(`/teachers/${i}`)).data.data,search:async(i,o=1,m=10)=>{const d=new URLSearchParams({q:i,page:o.toString(),limit:m.toString()});return(await ee.get(`/teachers/search?${d}`)).data.data}},Uf=()=>{const[i,o]=h.useState([]),[m,d]=h.useState(!0),[u,b]=h.useState(1),[v,_]=h.useState(1),[f,R]=h.useState(0),[y,p]=h.useState(""),[S,E]=h.useState(!1),[k,O]=h.useState(!1),[w,N]=h.useState(null),{error:$}=Be(),P=10,ae=h.useCallback(async()=>{try{d(!0);let g;y.trim()?(E(!0),g=await bd.search(y,u,P)):(E(!1),g=await bd.getAll(u,P)),o(g.data||[]),_(g.totalPages||1),R(g.total||0)}catch(g){console.error("Failed to fetch teachers:",g),$(g.response?.data?.message||"Failed to load teachers"),o([])}finally{d(!1)}},[u,y,$]);h.useEffect(()=>{ae()},[ae]),h.useEffect(()=>{const g=setTimeout(()=>{u!==1?b(1):ae()},500);return()=>clearTimeout(g)},[y]);const te=async g=>{try{const M=await bd.getById(g._id);N(M),O(!0)}catch(M){console.error("Failed to fetch teacher details:",M),$(M.response?.data?.message||"Failed to load details")}},A=[{key:"name",header:"Teacher Name"},{key:"email",header:"Email"},{key:"cnic",header:"CNIC"},{key:"college",header:"College"},{key:"qualification",header:"Qualification"},{key:"status",header:"Status"},{key:"actions",header:"Actions"}],X=g=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>te(g),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:e.jsx(De,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.name}),g.phoneNumber&&e.jsx("p",{className:"text-xs text-gray-500",children:g.phoneNumber})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:g.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xn,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 font-mono",children:g.cnic})]})}),e.jsx("td",{className:"px-6 py-4",children:g.college?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.college.name}),e.jsx("p",{className:"text-xs text-gray-500",children:g.college.code})]}):e.jsx("span",{className:"text-sm text-gray-500 italic",children:"Not assigned"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[g.qualification&&e.jsx("p",{className:"text-sm text-gray-900",children:g.qualification}),g.experience!==void 0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[g.experience," years exp."]}),!g.qualification&&e.jsx("span",{className:"text-sm text-gray-500 italic",children:"N/A"})]})}),e.jsx("td",{className:"px-6 py-4",children:g.isActive?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Pe,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(rt,{className:"w-3 h-3 mr-1"}),"Inactive"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center space-x-2",onClick:M=>M.stopPropagation(),children:e.jsx("button",{onClick:()=>te(g),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(Cs,{className:"w-4 h-4"})})})})]},g._id);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsx(De,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teachers"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"View and manage all teachers in the system"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ye,{placeholder:"Search by name, email, or CNIC...",value:y,onChange:g=>p(g.target.value),icon:e.jsx(nt,{className:"w-5 h-5"})})}),e.jsxs(Ae,{variant:"outline",children:[e.jsx(Sa,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),S&&y&&e.jsxs("div",{className:"mt-4 flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(nt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Showing results for"," ",e.jsxs("span",{className:"font-semibold",children:['"',y,'"']})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:m?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:A.map(g=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:g.header},g.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.from({length:5}).map((g,M)=>e.jsx("tr",{children:A.map(T=>e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ns,{className:"h-4 w-full"})},T.key))},M))})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:A.map(g=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:g.header},g.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i&&i.length>0?i.map(g=>X(g)):e.jsx("tr",{children:e.jsx("td",{colSpan:A.length,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[e.jsx(De,{className:"w-12 h-12 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:S?`No teachers found matching "${y}"`:"No teachers found in the system."})]})})})})]})}),!m&&i.length>0&&e.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:e.jsx(ul,{currentPage:u,totalPages:v,onPageChange:b,totalItems:f,itemsPerPage:P})})]})}),w&&e.jsxs(Vt,{isOpen:k,onClose:()=>O(!1),size:"lg",children:[e.jsx(ts,{icon:e.jsx(De,{className:"w-6 h-6 text-purple-600"}),title:"Teacher Details",subtitle:w.name,onClose:()=>O(!1)}),e.jsx(as,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:e.jsx("div",{className:"flex items-center space-x-2",children:w.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Active Teacher"})]}):e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Inactive Teacher"})]})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3 uppercase tracking-wide",children:"Personal Information"}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg divide-y divide-gray-100",children:[e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(De,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:w.name})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(Wt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:w.email})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(xn,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"CNIC"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:w.cnic})]})]}),w.phoneNumber&&e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(hn,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:w.phoneNumber})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3 uppercase tracking-wide",children:"Professional Details"}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg divide-y divide-gray-100",children:[w.qualification&&e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(Na,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Qualification"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:w.qualification})]})]}),w.experience!==void 0&&e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(Na,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Experience"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[w.experience," years"]})]})]}),w.college&&e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(wt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Assigned College"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:w.college.name}),e.jsx("p",{className:"text-xs text-gray-500",children:w.college.code})]})]})]})]})]})}),e.jsx(ss,{children:e.jsx(Ae,{variant:"secondary",onClick:()=>O(!1),children:"Close"})})]})]})},yd={getAll:async(i=1,o=10)=>{const m=new URLSearchParams({page:i.toString(),limit:o.toString()});return(await ee.get(`/students?${m}`)).data.data},getById:async i=>(await ee.get(`/students/${i}`)).data.data,search:async(i,o=1,m=10)=>{const d=new URLSearchParams({q:i,page:o.toString(),limit:m.toString()});return(await ee.get(`/students/search?${d}`)).data.data}},Bf=()=>{const[i,o]=h.useState([]),[m,d]=h.useState(!0),[u,b]=h.useState(1),[v,_]=h.useState(1),[f,R]=h.useState(0),[y,p]=h.useState(""),[S,E]=h.useState(!1),[k,O]=h.useState(!1),[w,N]=h.useState(null),{error:$}=Be(),P=10,ae=h.useCallback(async()=>{try{d(!0);let g;y.trim()?(E(!0),g=await yd.search(y,u,P)):(E(!1),g=await yd.getAll(u,P)),o(g.data||[]),_(g.totalPages||1),R(g.total||0)}catch(g){$(g.response?.data?.message||"Failed to load students"),o([])}finally{d(!1)}},[u,y,$]);h.useEffect(()=>{ae()},[ae]),h.useEffect(()=>{const g=setTimeout(()=>{u!==1?b(1):ae()},500);return()=>clearTimeout(g)},[y]);const te=async g=>{try{const M=await yd.getById(g._id);N(M),O(!0)}catch(M){$(M.response?.data?.message||"Failed to load details")}},A=[{key:"name",header:"Student Name"},{key:"rollNumber",header:"Roll Number"},{key:"email",header:"Email"},{key:"program",header:"Program"},{key:"section",header:"Section"},{key:"status",header:"Status"},{key:"actions",header:"Actions"}],X=g=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>te(g),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Fe,{className:"w-5 h-5 text-blue-600"})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:g.rollNumber})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:g.email})]})}),e.jsx("td",{className:"px-6 py-4",children:g.program?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.program.name}),e.jsx("p",{className:"text-xs text-gray-500",children:g.program.code})]}):e.jsx("span",{className:"text-sm text-gray-500 italic",children:"Not assigned"})}),e.jsx("td",{className:"px-6 py-4",children:g.section?e.jsx("span",{className:"text-sm text-gray-900",children:g.section.name}):e.jsx("span",{className:"text-sm text-gray-500 italic",children:"N/A"})}),e.jsx("td",{className:"px-6 py-4",children:g.isActive?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Pe,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(rt,{className:"w-3 h-3 mr-1"}),"Inactive"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:M=>{M.stopPropagation(),te(g)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(Cs,{className:"w-4 h-4"})})})]},g._id);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx(Fe,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Students"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"View and manage all students"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ye,{placeholder:"Search by name, roll number, email, or CNIC...",value:y,onChange:g=>p(g.target.value),icon:e.jsx(nt,{className:"w-5 h-5"})})}),e.jsxs(Ae,{variant:"outline",children:[e.jsx(Sa,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),S&&y&&e.jsxs("div",{className:"mt-4 flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(nt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Showing results for ",e.jsxs("span",{className:"font-semibold",children:['"',y,'"']})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:m?e.jsx("div",{className:"p-6",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:A.map(g=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:g.header},g.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.from({length:5}).map((g,M)=>e.jsx("tr",{children:A.map(T=>e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ns,{className:"h-4 w-full"})},T.key))},M))})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:A.map(g=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:g.header},g.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i&&i.length>0?i.map(g=>X(g)):e.jsx("tr",{children:e.jsxs("td",{colSpan:A.length,className:"px-6 py-12 text-center",children:[e.jsx(Fe,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:S?`No students found matching "${y}"`:"No students found."})]})})})]})}),!m&&i.length>0&&e.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:e.jsx(ul,{currentPage:u,totalPages:v,onPageChange:b,totalItems:f,itemsPerPage:P})})]})}),w&&e.jsxs(Vt,{isOpen:k,onClose:()=>O(!1),size:"lg",children:[e.jsx(ts,{icon:e.jsx(Fe,{className:"w-6 h-6 text-blue-600"}),title:"Student Details",subtitle:w.name,onClose:()=>O(!1)}),e.jsx(as,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex items-center space-x-2",children:w.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Active Student"})]}):e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Inactive Student"})]})}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Roll: ",w.rollNumber]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3 uppercase",children:"Personal Information"}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg divide-y divide-gray-100",children:[e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(Fe,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:w.name})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(Wt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:w.email})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(xn,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"CNIC"}),e.jsx("p",{className:"mt-1 text-sm font-mono text-gray-900",children:w.cnic})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3 uppercase",children:"Academic Information"}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg divide-y divide-gray-100",children:[w.program&&e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(Ue,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Program"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:w.program.name}),e.jsx("p",{className:"text-xs text-gray-500",children:w.program.code})]})]}),w.section&&e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(Ue,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Section"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:w.section.name})]})]})]})]})]})}),e.jsx(ss,{children:e.jsx(Ae,{variant:"secondary",onClick:()=>O(!1),children:"Close"})})]})]})},jd={getAll:async(i=1,o=10)=>{const m=new URLSearchParams({page:i.toString(),limit:o.toString()});return(await ee.get(`/subjects?${m}`)).data.data},getById:async i=>(await ee.get(`/subjects/${i}`)).data.data,search:async(i,o=1,m=10)=>{const d=new URLSearchParams({q:i,page:o.toString(),limit:m.toString()});return(await ee.get(`/subjects/search?${d}`)).data.data}},qf=()=>{const[i,o]=h.useState([]),[m,d]=h.useState(!0),[u,b]=h.useState(1),[v,_]=h.useState(1),[f,R]=h.useState(0),[y,p]=h.useState(""),[S,E]=h.useState(!1),[k,O]=h.useState(!1),[w,N]=h.useState(null),{error:$}=Be(),P=10,ae=h.useCallback(async()=>{try{d(!0);let g;y.trim()?(E(!0),g=await jd.search(y,u,P)):(E(!1),g=await jd.getAll(u,P)),o(g.data||[]),_(g.totalPages||1),R(g.total||0)}catch(g){$(g.response?.data?.message||"Failed to load subjects"),o([])}finally{d(!1)}},[u,y,$]);h.useEffect(()=>{ae()},[ae]),h.useEffect(()=>{const g=setTimeout(()=>{u!==1?b(1):ae()},500);return()=>clearTimeout(g)},[y]);const te=async g=>{try{const M=await jd.getById(g._id);N(M),O(!0)}catch(M){$(M.response?.data?.message||"Failed to load details")}},A=[{key:"name",header:"Subject Name"},{key:"code",header:"Code"},{key:"credits",header:"Credits"},{key:"description",header:"Description"},{key:"status",header:"Status"},{key:"actions",header:"Actions"}],X=g=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>te(g),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center",children:e.jsx(Ue,{className:"w-5 h-5 text-emerald-600"})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 font-mono",children:g.code})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Na,{className:"w-4 h-4 text-emerald-500"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:g.credits})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-600 truncate max-w-xs",children:g.description||e.jsx("span",{className:"italic text-gray-400",children:"No description"})})}),e.jsx("td",{className:"px-6 py-4",children:g.isActive?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Pe,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(rt,{className:"w-3 h-3 mr-1"}),"Inactive"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:M=>{M.stopPropagation(),te(g)},className:"p-2 text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(Cs,{className:"w-4 h-4"})})})]},g._id);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-emerald-100 flex items-center justify-center",children:e.jsx(Ue,{className:"w-6 h-6 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Subjects"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"View and manage all subjects"})]})]})}),e.jsx("div",{className:"flex-1",children:e.jsx(Ye,{placeholder:"Search by subject name or code...",value:y,onChange:g=>p(g.target.value),icon:e.jsx(nt,{className:"w-5 h-5"})})}),S&&y&&e.jsxs("div",{className:"mt-4 flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(nt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Showing results for ",e.jsxs("span",{className:"font-semibold",children:['"',y,'"']})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:m?e.jsx("div",{className:"p-6",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:A.map(g=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:g.header},g.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.from({length:5}).map((g,M)=>e.jsx("tr",{children:A.map(T=>e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ns,{className:"h-4 w-full"})},T.key))},M))})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:A.map(g=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:g.header},g.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i&&i.length>0?i.map(g=>X(g)):e.jsx("tr",{children:e.jsxs("td",{colSpan:A.length,className:"px-6 py-12 text-center",children:[e.jsx(Ue,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:S?`No subjects found matching "${y}"`:"No subjects found."})]})})})]})}),!m&&i.length>0&&e.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:e.jsx(ul,{currentPage:u,totalPages:v,onPageChange:b,totalItems:f,itemsPerPage:P})})]})}),w&&e.jsxs(Vt,{isOpen:k,onClose:()=>O(!1),size:"md",children:[e.jsx(ts,{icon:e.jsx(Ue,{className:"w-6 h-6 text-emerald-600"}),title:"Subject Details",subtitle:w.name,onClose:()=>O(!1)}),e.jsx(as,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex items-center space-x-2",children:w.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Active Subject"})]}):e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Inactive Subject"})]})}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:[e.jsx(Na,{className:"w-3 h-3 mr-1"}),w.credits," Credits"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3 uppercase",children:"Subject Information"}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg divide-y divide-gray-100",children:[e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(Ue,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Subject Name"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:w.name})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(Ue,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Subject Code"}),e.jsx("p",{className:"mt-1 text-sm font-mono text-gray-900",children:w.code})]})]}),w.description&&e.jsxs("div",{className:"flex items-start space-x-3 py-3 px-4",children:[e.jsx(Ue,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Description"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:w.description})]})]})]})]})]})}),e.jsx(ss,{children:e.jsx(Ae,{variant:"secondary",onClick:()=>O(!1),children:"Close"})})]})]})},Yf=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"District Head Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor colleges in your region"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(_r,{title:"My Colleges",value:"12",icon:e.jsx(wt,{className:"w-6 h-6"}),color:"bg-blue-500"}),e.jsx(_r,{title:"Total Teachers",value:"248",icon:e.jsx(De,{className:"w-6 h-6"}),color:"bg-green-500"}),e.jsx(_r,{title:"Total Students",value:"3,542",icon:e.jsx(De,{className:"w-6 h-6"}),color:"bg-purple-500"}),e.jsx(_r,{title:"Avg Attendance",value:"87%",icon:e.jsx(wa,{className:"w-6 h-6"}),color:"bg-orange-500"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"College Overview"}),e.jsx("p",{className:"text-gray-500",children:"Dashboard content will be implemented here..."})]})]}),_r=({title:i,value:o,icon:m,color:d})=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:i}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:o})]}),e.jsx("div",{className:`${d} p-3 rounded-lg text-white`,children:m})]})}),Or={getQuickStats:async()=>(await ee.get("/college-admin/statistics/quick")).data.data,getDashboardStats:async()=>(await ee.get("/college-admin/statistics/dashboard")).data.data,getProgramStats:async()=>(await ee.get("/college-admin/statistics/programs")).data.data.programs,getSectionStats:async()=>(await ee.get("/college-admin/statistics/sections")).data.data.sections,getTeacherStats:async()=>(await ee.get("/college-admin/statistics/teachers")).data.data,getRecentEnrollments:async(i=10)=>(await ee.get(`/college-admin/statistics/recent-enrollments?limit=${i}`)).data.data.enrollments,getCapacityStats:async()=>(await ee.get("/college-admin/statistics/capacity")).data.data},Hf=()=>{const{profile:i}=pn(N=>N.auth),[o,m]=h.useState(null),[d,u]=h.useState(null),[b,v]=h.useState([]),[_,f]=h.useState([]),[R,y]=h.useState(!0),{toasts:p,removeToast:S,error:E}=Be();h.useEffect(()=>{k()},[]);const k=async()=>{try{y(!0);const[N,$,P,ae]=await Promise.all([Or.getQuickStats().catch(()=>null),Or.getDashboardStats().catch(()=>null),Or.getProgramStats().catch(()=>[]),Or.getRecentEnrollments(5).catch(()=>[])]);m(N),u($),v(P||[]),f(ae||[])}catch(N){console.error("Error fetching statistics:",N),E(N.response?.data?.message||"Failed to load dashboard statistics. Please try again."),v([]),f([])}finally{y(!1)}},O=i&&typeof i=="object"&&"name"in i?i.name:d?.college.name||"College",w=i&&typeof i=="object"&&"code"in i?i.code:d?.college.code||"";return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(ot,{toasts:p,onRemove:S}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:e.jsx(wt,{className:"w-8 h-8 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:O}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["College Code: ",w,"  College Administration Dashboard"]})]})]}),d&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"City"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:d.college.city})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(it,{title:"Total Teachers",value:o?.totalTeachers??0,icon:e.jsx(De,{className:"w-6 h-6"}),color:"bg-blue-500",isLoading:R,subtitle:"Teaching staff"}),e.jsx(it,{title:"Total Students",value:o?.totalStudents??0,icon:e.jsx(Fe,{className:"w-6 h-6"}),color:"bg-green-500",isLoading:R,subtitle:"Enrolled students"}),e.jsx(it,{title:"Programs",value:o?.totalPrograms??0,icon:e.jsx(Ue,{className:"w-6 h-6"}),color:"bg-purple-500",isLoading:R,subtitle:"Academic programs"}),e.jsx(it,{title:"Sections",value:o?.totalSections??0,icon:e.jsx(ht,{className:"w-6 h-6"}),color:"bg-orange-500",isLoading:R,subtitle:"Active sections"}),e.jsx(it,{title:"Subjects",value:o?.totalSubjects??0,icon:e.jsx(Xr,{className:"w-6 h-6"}),color:"bg-pink-500",isLoading:R,subtitle:"Total subjects"})]}),d&&!R&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(it,{title:"Active Students",value:d.statistics?.students?.active??0,icon:e.jsx(vd,{className:"w-6 h-6"}),color:"bg-emerald-500",subtitle:`${(d.statistics?.students?.activePercentage??0).toFixed(1)}% of total`}),e.jsx(it,{title:"Inactive Students",value:d.statistics?.students?.inactive??0,icon:e.jsx(Kg,{className:"w-6 h-6"}),color:"bg-red-500",subtitle:"Not currently enrolled"}),e.jsx(it,{title:"Male Students",value:d.statistics?.students?.byGender?.male??0,icon:e.jsx(De,{className:"w-6 h-6"}),color:"bg-blue-500",subtitle:"Gender breakdown"}),e.jsx(it,{title:"Female Students",value:d.statistics?.students?.byGender?.female??0,icon:e.jsx(De,{className:"w-6 h-6"}),color:"bg-pink-500",subtitle:"Gender breakdown"})]}),d&&!R&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(wa,{className:"w-5 h-5 mr-2 text-blue-500"}),"Academic Performance Metrics"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ox,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Avg. Students per Section"})]}),e.jsx("span",{className:"text-xl font-bold text-blue-600",children:(d.statistics?.academics?.averageStudentsPerSection??0).toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ox,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Avg. Teachers per Program"})]}),e.jsx("span",{className:"text-xl font-bold text-purple-600",children:(d.statistics?.academics?.averageTeachersPerProgram??0).toFixed(1)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(De,{className:"w-5 h-5 mr-2 text-green-500"}),"Teacher Demographics"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Male Teachers"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:d.statistics?.teachers?.byGender?.male??0})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${(d.statistics?.teachers?.byGender?.male??0)/(d.statistics?.teachers?.total||1)*100}%`}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Female Teachers"}),e.jsx("span",{className:"text-lg font-bold text-pink-600",children:d.statistics?.teachers?.byGender?.female??0})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-pink-500 h-2 rounded-full",style:{width:`${(d.statistics?.teachers?.byGender?.female??0)/(d.statistics?.teachers?.total||1)*100}%`}})})]})]})]}),b&&b.length>0&&!R&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ue,{className:"w-5 h-5 mr-2 text-purple-500"}),"Program-wise Student Distribution"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Program Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Students"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Active"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sections"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(N=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.programName||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:N.totalStudents||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:N.activeStudents||0})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.totalSections||0})]},N.programId))})]})})]}),_&&_.length>0&&!R&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Fe,{className:"w-5 h-5 mr-2 text-green-500"}),"Recent Student Enrollments"]}),e.jsx("div",{className:"space-y-3",children:_.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Fe,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.studentName||"Unknown Student"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Roll: ",N.rollNumber||"N/A"," "," ",N.programName||"N/A"," "," ",N.sectionName||"N/A"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:N.status||"Unknown"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N.enrollmentDate?new Date(N.enrollmentDate).toLocaleDateString():"N/A"})]})]},N._id))})]})]})},ja={getAll:async(i=1,o=10)=>{const m=await ee.get(`/college-admin/teachers?page=${i}&limit=${o}`);return{data:m.data.data.teachers||[],total:m.data.data.pagination.total,page:m.data.data.pagination.page,limit:m.data.data.pagination.limit,totalPages:m.data.data.pagination.pages}},search:async(i,o=1,m=10)=>{const d=await ee.get(`/college-admin/teachers/search?q=${encodeURIComponent(i)}&page=${o}&limit=${m}`);return{data:d.data.data.teachers||[],total:d.data.data.pagination.total,page:d.data.data.pagination.page,limit:d.data.data.pagination.limit,totalPages:d.data.data.pagination.pages}},getById:async i=>(await ee.get(`/college-admin/teachers/${i}`)).data.data,create:async i=>(await ee.post("/college-admin/teachers",i)).data.data,update:async(i,o)=>(await ee.put(`/college-admin/teachers/${i}`,o)).data.data,delete:async i=>{await ee.delete(`/college-admin/teachers/${i}`)},resetPassword:async i=>(await ee.post(`/college-admin/teachers/${i}/reset-password`)).data.data,bulkImport:async i=>(await ee.post("/college-admin/teachers/bulk-import",{teachers:i})).data.data},Gf=({isOpen:i,onClose:o,onSuccess:m,onShowCredentials:d,success:u,error:b})=>{const[v,_]=h.useState(!1),[f,R]=h.useState({name:"",fatherName:"",gender:"Male",cnic:"",dateOfBirth:"",maritalStatus:"Single",religion:"",highestQualification:"",domicile:"",contactNumber:"",contactEmail:"",presentAddress:"",personalNumber:"",designation:"",bps:1,employmentStatus:"Regular",superannuation:"",joinedServiceAt:"",joinedCollegeAt:""}),y=async p=>{p.preventDefault(),_(!0);try{const S=await ja.create(f);u("Teacher created successfully!"),d({loginEmail:S.credentials.loginEmail,password:S.credentials.password,name:S.teacher.name}),o(),m()}catch(S){b(S?.response?.data?.message||"Failed to create teacher")}finally{_(!1)}};return i?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Teacher"}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("form",{onSubmit:y,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Personal Information"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,minLength:3,maxLength:100,value:f.name,onChange:p=>R({...f,name:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Father's Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,minLength:3,maxLength:100,value:f.fatherName,onChange:p=>R({...f,fatherName:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Gender ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:f.gender,onChange:p=>R({...f,gender:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["CNIC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,pattern:"\\d{5}-\\d{7}-\\d{1}",placeholder:"12345-1234567-1",value:f.cnic,onChange:p=>R({...f,cnic:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date of Birth ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:f.dateOfBirth,onChange:p=>R({...f,dateOfBirth:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Marital Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:f.maritalStatus,onChange:p=>R({...f,maritalStatus:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"Single",children:"Single"}),e.jsx("option",{value:"Married",children:"Married"}),e.jsx("option",{value:"Divorced",children:"Divorced"}),e.jsx("option",{value:"Widowed",children:"Widowed"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Religion ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,minLength:2,maxLength:50,value:f.religion,onChange:p=>R({...f,religion:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Domicile ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,minLength:2,maxLength:100,value:f.domicile,onChange:p=>R({...f,domicile:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"col-span-2 mt-4",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Contact Information"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Contact Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",required:!0,pattern:"03\\d{9}",placeholder:"03XXXXXXXXX",value:f.contactNumber,onChange:p=>R({...f,contactNumber:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Contact Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",required:!0,value:f.contactEmail,onChange:p=>R({...f,contactEmail:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Present Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{required:!0,minLength:10,maxLength:500,rows:2,value:f.presentAddress,onChange:p=>R({...f,presentAddress:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"col-span-2 mt-4",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Professional Information"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Personal Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,minLength:3,maxLength:50,value:f.personalNumber,onChange:p=>R({...f,personalNumber:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Designation ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,minLength:2,maxLength:100,value:f.designation,onChange:p=>R({...f,designation:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["BPS ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",required:!0,min:1,max:22,value:f.bps,onChange:p=>R({...f,bps:parseInt(p.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Employment Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:f.employmentStatus,onChange:p=>R({...f,employmentStatus:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"Regular",children:"Regular"}),e.jsx("option",{value:"Contract",children:"Contract"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Highest Qualification ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,minLength:2,maxLength:100,value:f.highestQualification,onChange:p=>R({...f,highestQualification:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Superannuation Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:f.superannuation,onChange:p=>R({...f,superannuation:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Joined Service At ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:f.joinedServiceAt,onChange:p=>R({...f,joinedServiceAt:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Joined College At ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:f.joinedCollegeAt,onChange:p=>R({...f,joinedCollegeAt:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:v,className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:v?"Creating...":"Create Teacher"})]})]})]})}):null},Xf=({isOpen:i,onClose:o,credentials:m,success:d})=>!i||!m?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Login Credentials"}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[e.jsxs("p",{className:"text-sm text-green-800 font-medium mb-2",children:["Teacher account created successfully for ",m.name,"!"]}),e.jsx("p",{className:"text-xs text-green-700",children:"Please save these credentials securely. They will not be shown again."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Login Email"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:m.loginEmail,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg"}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(m.loginEmail),d("Email copied!")},className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Copy"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:m.password,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg font-mono"}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(m.password),d("Password copied!")},className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Copy"})]})]})]}),e.jsx("button",{onClick:o,className:"w-full mt-6 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Done"})]})}),Vf=({isOpen:i,onClose:o,onSuccess:m,success:d,error:u})=>{const[b,v]=h.useState(!1),[_,f]=h.useState(""),[R,y]=h.useState(null),p=async O=>{if(O.preventDefault(),!_.trim()){u("Please paste CSV data");return}v(!0),y(null);try{const w=_.trim().split(`
`),N=w[0].split(",").map(ae=>ae.trim()),$=w.slice(1).map(ae=>{const te=ae.split(",").map(X=>X.trim()),A={};return N.forEach((X,g)=>{const M=X.toLowerCase().replace(/\s+/g,"");let T=te[g]||"";const W={name:"name",fullname:"name",fathername:"fatherName",father:"fatherName",gender:"gender",cnic:"cnic",dateofbirth:"dateOfBirth",dob:"dateOfBirth",maritalstatus:"maritalStatus",marital:"maritalStatus",religion:"religion",qualification:"highestQualification",highestqualification:"highestQualification",education:"highestQualification",domicile:"domicile",contactnumber:"contactNumber",phone:"contactNumber",mobile:"contactNumber",contactemail:"contactEmail",email:"contactEmail",personalemail:"contactEmail",address:"presentAddress",presentaddress:"presentAddress",personalnumber:"personalNumber",designation:"designation",bps:"bps",employmentstatus:"employmentStatus",employment:"employmentStatus",superannuation:"superannuation",joinedserviceat:"joinedServiceAt",servicedate:"joinedServiceAt",joinedcollegeat:"joinedCollegeAt",collegedate:"joinedCollegeAt"}[M];W&&(W==="bps"?A[W]=parseInt(T)||1:A[W]=T)}),A});if($.length===0){u("No valid teacher data found"),v(!1);return}if($.length>500){u("Maximum 500 teachers allowed per import"),v(!1);return}const P=await ja.bulkImport($);y(P),P.summary.successful>0&&(d(`Successfully imported ${P.summary.successful} teacher(s)`),m()),P.summary.failed>0&&u(`${P.summary.failed} teacher(s) failed to import`)}catch(w){u(w?.response?.data?.message||"Bulk import failed")}finally{v(!1)}},S=()=>{f(""),y(null)},E=()=>{const O=["Name,FatherName,Gender,CNIC,DateOfBirth,MaritalStatus,Religion,Qualification,Domicile,ContactNumber,ContactEmail,Address,PersonalNumber,Designation,BPS,EmploymentStatus,Superannuation,JoinedServiceAt,JoinedCollegeAt","John Doe,Richard Doe,Male,12345-1234567-1,1990-01-15,Married,Islam,Master of Science,Punjab,03001234567,john.doe@example.com,123 Main Street Lahore,P001,Lecturer,17,Regular,2050-01-15,2020-01-15,2021-01-15","Jane Smith,William Smith,Female,54321-7654321-1,1992-05-20,Single,Islam,Bachelor of Science,Sindh,03009876543,jane.smith@example.com,456 Park Avenue Karachi,P002,Assistant Professor,18,Contract,2052-05-20,2022-06-01,2023-01-01"].join(`
`),w=new Blob([O],{type:"text/csv"}),N=URL.createObjectURL(w),$=document.createElement("a");$.href=N,$.download="teacher-import-template.csv",$.click(),URL.revokeObjectURL(N)},k=()=>{if(!R||R.results.successful.length===0)return;const O=["Row,Name,Login Email,Password",...R.results.successful.map(P=>`${P.row},${P.name},${P.loginEmail},${P.password}`)].join(`
`),w=new Blob([O],{type:"text/csv"}),N=URL.createObjectURL(w),$=document.createElement("a");$.href=N,$.download=`teacher-credentials-${Date.now()}.csv`,$.click(),URL.revokeObjectURL(N)};return i?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Bulk Import Teachers"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Import up to 500 teachers at once using CSV format"})]}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsx("div",{className:"p-6",children:R?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:R.summary.total}),e.jsx("div",{className:"text-sm text-blue-700",children:"Total Processed"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:R.summary.successful}),e.jsx("div",{className:"text-sm text-green-700",children:"Successful"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-red-900",children:R.summary.failed}),e.jsx("div",{className:"text-sm text-red-700",children:"Failed"})]})]}),R.results.successful.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-900",children:["Successfully Imported (",R.results.successful.length,")"]}),e.jsx("button",{onClick:k,className:"px-3 py-1 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Download Credentials"})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg overflow-hidden",children:e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-green-100 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-green-900",children:"Row"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-green-900",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-green-900",children:"Login Email"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-green-900",children:"Password"})]})}),e.jsx("tbody",{className:"divide-y divide-green-200",children:R.results.successful.map(O=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-green-900",children:O.row}),e.jsx("td",{className:"px-3 py-2 text-green-900",children:O.name}),e.jsx("td",{className:"px-3 py-2 text-green-900 font-mono text-xs",children:O.loginEmail}),e.jsx("td",{className:"px-3 py-2 text-green-900 font-mono text-xs",children:O.password})]},O.row))})]})})})]}),R.results.failed.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-900 mb-3",children:["Failed to Import (",R.results.failed.length,")"]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg overflow-hidden",children:e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-red-100 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-red-900",children:"Row"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-red-900",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-red-900",children:"Error"})]})}),e.jsx("tbody",{className:"divide-y divide-red-200",children:R.results.failed.map((O,w)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-red-900",children:O.row}),e.jsx("td",{className:"px-3 py-2 text-red-900",children:O.data?.name||"N/A"}),e.jsx("td",{className:"px-3 py-2 text-red-900",children:O.error})]},w))})]})})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:S,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Import More"}),e.jsx("button",{onClick:o,className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Done"})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"CSV Format Guide"}),e.jsx("button",{type:"button",onClick:E,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Download Template"})]}),e.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Required columns (comma-separated):"}),e.jsx("code",{className:"text-xs bg-white px-2 py-1 rounded block overflow-x-auto",children:"Name,FatherName,Gender,CNIC,DateOfBirth,MaritalStatus,Religion,Qualification,Domicile,ContactNumber,ContactEmail,Address,PersonalNumber,Designation,BPS,EmploymentStatus,Superannuation,JoinedServiceAt,JoinedCollegeAt"}),e.jsxs("div",{className:"mt-3 text-xs text-blue-700",children:[e.jsx("p",{className:"font-medium mb-1",children:"Field Notes:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Gender: Male, Female, or Other"}),e.jsx("li",{children:"CNIC: Format 12345-1234567-1"}),e.jsx("li",{children:"Dates: YYYY-MM-DD format"}),e.jsx("li",{children:"MaritalStatus: Single, Married, Divorced, or Widowed"}),e.jsx("li",{children:"EmploymentStatus: Regular or Contract"}),e.jsx("li",{children:"BPS: Number between 1-22"}),e.jsx("li",{children:"ContactNumber: Pakistani mobile (03XXXXXXXXX)"})]})]})]}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paste CSV Data"}),e.jsx("textarea",{value:_,onChange:O=>f(O.target.value),placeholder:`Name,FatherName,Gender,CNIC,DateOfBirth,MaritalStatus,Religion,Qualification,Domicile,ContactNumber,ContactEmail,Address,PersonalNumber,Designation,BPS,EmploymentStatus,Superannuation,JoinedServiceAt,JoinedCollegeAt
John Doe,Richard Doe,Male,12345-1234567-1,1990-01-15,Married,Islam,Master,Punjab,03001234567,john@example.com,123 Street,P001,Lecturer,17,Regular,2050-01-15,2020-01-15,2021-01-15`,rows:10,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Paste your CSV data above (including header row)"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b||!_.trim(),className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:b?"Importing...":"Import Teachers"})]})]})]})})]})}):null},Qf=()=>{const[i,o]=h.useState([]),[m,d]=h.useState(!0),[u,b]=h.useState(""),[v,_]=h.useState(1),[f]=h.useState(10),[R,y]=h.useState(0),[p,S]=h.useState(0),{toasts:E,removeToast:k,success:O,error:w}=Be(),[N,$]=h.useState(!1),[P,ae]=h.useState(!1),[te,A]=h.useState(!1),[X,g]=h.useState(null),M=async()=>{d(!0);try{const se=u?await ja.search(u,v,f):await ja.getAll(v,f);o(se.data||[]),y(se.total),S(se.totalPages)}catch(se){w(se?.response?.data?.message||"Failed to fetch teachers"),o([])}finally{d(!1)}};h.useEffect(()=>{M()},[v]);const T=se=>{se.preventDefault(),_(1),M()},V=async(se,le)=>{if(confirm(`Are you sure you want to delete ${le}?`))try{await ja.delete(se),O("Teacher deleted successfully"),M()}catch(ne){w(ne?.response?.data?.message||"Failed to delete teacher")}},W=async(se,le)=>{if(confirm(`Reset password for ${le}?`))try{const ne=await ja.resetPassword(se);g({loginEmail:ne.loginEmail,password:ne.newPassword,name:ne.name}),A(!0),O("Password reset successfully")}catch(ne){w(ne?.response?.data?.message||"Failed to reset password")}};return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teacher Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your college teachers"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("form",{onSubmit:T,className:"flex-1 flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search by name, CNIC, designation...",value:u,onChange:se=>b(se.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Search"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>ae(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Bulk Import"]}),e.jsxs("button",{onClick:()=>$(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Teacher"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No teachers found"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CNIC"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(se=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:se.name}),e.jsx("p",{className:"text-sm text-gray-500",children:typeof se.userId=="object"?se.userId.email:"N/A"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:se.cnic}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:se.designation}),e.jsxs("p",{className:"text-xs text-gray-500",children:["BPS-",se.bps,"  ",se.employmentStatus]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:se.contactNumber}),e.jsx("p",{className:"text-xs text-gray-500",children:se.contactEmail})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${se.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:se.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>W(se._id,se.name),className:"p-1 text-blue-600 hover:text-blue-800",title:"Reset Password",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),e.jsx("button",{onClick:()=>V(se._id,se.name),className:"p-1 text-red-600 hover:text-red-800",title:"Delete",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},se._id))})]})}),!m&&i.length>0&&e.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex items-center justify-between border-t",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(v-1)*f+1," to"," ",Math.min(v*f,R)," of ",R," teachers"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_(v-1),disabled:v===1,className:"px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(p,5)},(se,le)=>{const ne=p<=5||v<=3?le+1:v>=p-2?p-4+le:v-2+le;return e.jsx("button",{onClick:()=>_(ne),className:`px-3 py-1 border rounded-lg ${v===ne?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:ne},ne)})}),e.jsx("button",{onClick:()=>_(v+1),disabled:v===p,className:"px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),e.jsx(Gf,{isOpen:N,onClose:()=>$(!1),onSuccess:()=>{M()},onShowCredentials:se=>{g(se),A(!0)},success:O,error:w}),e.jsx(Xf,{isOpen:te,onClose:()=>A(!1),credentials:X,success:O}),e.jsx(Vf,{isOpen:P,onClose:()=>ae(!1),onSuccess:()=>{M()},success:O,error:w}),e.jsx(ot,{toasts:E,onRemove:k})]})},Zf="modulepreload",$f=function(i){return"/"+i},Zx={},Kf=function(o,m,d){let u=Promise.resolve();if(m&&m.length>0){let f=function(R){return Promise.all(R.map(y=>Promise.resolve(y).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),_=v?.nonce||v?.getAttribute("nonce");u=f(m.map(R=>{if(R=$f(R),R in Zx)return;Zx[R]=!0;const y=R.endsWith(".css"),p=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${R}"]${p}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":Zf,y||(S.as="script"),S.crossOrigin="",S.href=R,_&&S.setAttribute("nonce",_),document.head.appendChild(S),y)return new Promise((E,k)=>{S.addEventListener("load",E),S.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${R}`)))})}))}function b(v){const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=v,window.dispatchEvent(_),!_.defaultPrevented)throw v}return u.then(v=>{for(const _ of v||[])_.status==="rejected"&&b(_.reason);return o().catch(b)})},va={getAll:async(i=1,o=50,m={})=>{const d=new URLSearchParams({page:i.toString(),limit:o.toString()});m.programId&&d.append("programId",m.programId),m.sectionId&&d.append("sectionId",m.sectionId),m.status&&d.append("status",m.status);const u=await ee.get(`/college-admin/students?${d.toString()}`);return{data:u.data.data.students||[],total:u.data.data.pagination.total,page:u.data.data.pagination.page,limit:u.data.data.pagination.limit,totalPages:u.data.data.pagination.pages}},search:async(i,o=1,m=50)=>{const d=await ee.get(`/college-admin/students/search?query=${encodeURIComponent(i)}&page=${o}&limit=${m}`);return{data:d.data.data.students||[],total:d.data.data.pagination.total,page:d.data.data.pagination.page,limit:d.data.data.pagination.limit,totalPages:d.data.data.pagination.pages}},getById:async i=>(await ee.get(`/college-admin/students/${i}`)).data.data,create:async i=>(await ee.post("/college-admin/students",i)).data.data,update:async(i,o)=>(await ee.put(`/college-admin/students/${i}`,o)).data.data,delete:async i=>{await ee.delete(`/college-admin/students/${i}`)},bulkImport:async(i,o=!1)=>(await ee.post("/college-admin/students/bulk-import",{students:i,createLoginAccounts:o})).data.data,bulkImportCSV:async(i,o=!1)=>(await ee.post("/college-admin/students/bulk-import-csv",{students:i,createLoginAccounts:o})).data.data,export:async(i={})=>{const o=new URLSearchParams;return i.programId&&o.append("programId",i.programId),i.sectionId&&o.append("sectionId",i.sectionId),(await ee.get(`/college-admin/students/export?${o.toString()}`)).data.data}},kd={async getAll(){try{return((await ee.get("/college-admin/statistics/programs")).data.data||[]).map(m=>({_id:m._id,name:m.name,code:m.code||"",duration:m.duration,isActive:!0}))}catch(i){return console.error("Failed to fetch programs:",i),[]}}},Ff={async getAll(){try{return((await ee.get("/college-admin/statistics/sections")).data.data||[]).map(m=>({_id:m._id,name:m.name,year:m.semester||"N/A",shift:m.shift||"N/A",program:m.programId,isActive:!0}))}catch(i){return console.error("Failed to fetch sections:",i),[]}}},Jf=i=>{const o=[],m=i.split(/\r?\n/);for(const d of m){if(!d.trim())continue;const u=[];let b="",v=!1;for(let _=0;_<d.length;_++){const f=d[_];f==='"'?v&&d[_+1]==='"'?(b+='"',_++):v=!v:f===","&&!v?(u.push(b.trim()),b=""):b+=f}u.push(b.trim()),o.push(u)}return o},Pf=({isOpen:i,onClose:o,onSuccess:m,onShowCredentials:d,success:u,error:b,programs:v,sections:_})=>{const[f,R]=h.useState(!1),[y,p]=h.useState({name:"",rollNumber:"",fatherName:"",contactNumber:"",cnic:"",email:"",dateOfBirth:"",gender:"Male",address:"",programId:"",sectionId:"",enrollmentDate:new Date().toISOString().split("T")[0],status:"Active",createLoginAccount:!0}),S=async E=>{E.preventDefault(),R(!0);try{const k=await va.create(y);u("Student created successfully!"),k.credentials&&d({loginEmail:k.credentials.loginEmail,password:k.credentials.password,name:k.student.name,rollNumber:k.student.rollNumber}),o(),m()}catch(k){b(k?.response?.data?.message||"Failed to create student")}finally{R(!1)}};return i?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center z-10",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Student"}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("form",{onSubmit:S,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-2",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Personal Information"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,minLength:2,maxLength:100,value:y.name,onChange:E=>p({...y,name:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Roll Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,minLength:1,maxLength:50,value:y.rollNumber,onChange:E=>p({...y,rollNumber:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Father's Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,minLength:2,maxLength:100,value:y.fatherName,onChange:E=>p({...y,fatherName:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),e.jsxs("select",{value:y.gender,onChange:E=>p({...y,gender:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CNIC (13 digits)"}),e.jsx("input",{type:"text",pattern:"\\d{13}|\\d{5}-\\d{7}-\\d{1}",placeholder:"1234567890123 or 12345-1234567-1",value:y.cnic,onChange:E=>p({...y,cnic:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",value:y.dateOfBirth,onChange:E=>p({...y,dateOfBirth:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"col-span-2 mt-4",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Contact Information"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),e.jsx("input",{type:"tel",pattern:"03\\d{9}",placeholder:"03XXXXXXXXX",value:y.contactNumber,onChange:E=>p({...y,contactNumber:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:y.email,onChange:E=>p({...y,email:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("textarea",{maxLength:500,rows:2,value:y.address,onChange:E=>p({...y,address:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"col-span-2 mt-4",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Academic Information"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:y.programId,onChange:E=>p({...y,programId:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Program"}),v.map(E=>e.jsxs("option",{value:E._id,children:[E.name," (",E.code,")"]},E._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Section ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:y.sectionId,onChange:E=>p({...y,sectionId:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Section"}),_.map(E=>e.jsxs("option",{value:E._id,children:[E.name," - ",E.year," (",E.shift,")"]},E._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enrollment Date"}),e.jsx("input",{type:"date",value:y.enrollmentDate,onChange:E=>p({...y,enrollmentDate:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:y.status,onChange:E=>p({...y,status:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Graduated",children:"Graduated"}),e.jsx("option",{value:"Dropped",children:"Dropped"})]})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y.createLoginAccount,onChange:E=>p({...y,createLoginAccount:E.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Create login account for student (Email will be:"," ",y.rollNumber||"rollnumber","@collegecode.edu.pk)"]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:f?"Creating...":"Create Student"})]})]})]})}):null},If=({isOpen:i,onClose:o,credentials:m,success:d})=>!i||!m?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Login Credentials"}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[e.jsxs("p",{className:"text-sm text-green-800 font-medium mb-2",children:["Student account created successfully for ",m.name," (Roll:"," ",m.rollNumber,")!"]}),e.jsx("p",{className:"text-xs text-green-700",children:"Please save these credentials securely. They will not be shown again."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Login Email"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:m.loginEmail,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg"}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(m.loginEmail),d("Email copied!")},className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Copy"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:m.password,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg font-mono"}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(m.password),d("Password copied!")},className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Copy"})]})]})]}),e.jsx("button",{onClick:o,className:"w-full mt-6 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Done"})]})}),Wf=({isOpen:i,onClose:o,onSuccess:m,success:d,error:u})=>{const[b,v]=h.useState(!1),[_,f]=h.useState(""),[R,y]=h.useState(!0),[p,S]=h.useState(null),[E,k]=h.useState("file"),[O,w]=h.useState(null),[N,$]=h.useState([]),P=()=>{const g=["Student Name,Roll No,Father Name,Program,Class,Subject-Combination,Student Phone,Student CNIC/FORM-B,Email,Date of Birth,Gender,Address,Status",'"Ahmed Ali",001,"Muhammad Ali","F.Sc. (Pre-Engineering)-Mathematics, Chemistry, Physics","1st Year","1st Shift - Mathematics, Chemistry, Physics",03001234567,12345-1234567-1,ahmed@example.com,2005-01-15,Male,"123 Main St",Active','"Sara Khan",002,"Imran Khan","F.Sc. (Pre-Medical)-Biology, Chemistry, Physics","1st Year","1st Shift - Biology, Chemistry, Physics",03009876543,32109-8765432-1,sara@example.com,2006-03-20,Female,"456 Park Ave",Active'].join(`
`),M=new Blob([g],{type:"text/csv"}),T=URL.createObjectURL(M),V=document.createElement("a");V.href=T,V.download="student-import-template.csv",V.click(),URL.revokeObjectURL(T)},ae=async g=>{const M=g.target.files?.[0];if(!M)return;const T=M.name.split(".").pop()?.toLowerCase();if(!["csv","xls","xlsx"].includes(T||"")){u("Please upload a CSV or Excel file (.csv, .xls, .xlsx)");return}w(M);const V=new FileReader;V.onload=async W=>{const se=W.target?.result;if(T==="csv")f(se);else try{const le=await Kf(()=>import("./utils-vendor-Bu_id1U-.js").then(z=>z.x),[]),ne=le.read(se,{type:"binary"}),D=ne.Sheets[ne.SheetNames[0]],G=le.utils.sheet_to_csv(D);f(G)}catch{u("Failed to parse Excel file. Please ensure it's a valid Excel file or use CSV format.")}},T==="csv"?V.readAsText(M):V.readAsBinaryString(M)},te=async g=>{if(g.preventDefault(),!_.trim()){u("Please paste CSV data");return}v(!0),S(null),$([]);try{const M=Jf(_.trim());if(M.length<2){u("CSV must contain headers and at least one data row"),v(!1);return}const T=M[0].map(le=>le.trim()),W=M.slice(1).map(le=>{const ne={};return T.forEach((D,G)=>{const z=(le[G]||"").trim(),B={"Student Name":"Student Name",studentname:"Student Name",name:"Student Name","Roll No":"Roll No",rollno:"Roll No",rollnumber:"Roll No","Father Name":"Father Name",fathername:"Father Name",father:"Father Name",Program:"Program",program:"Program",Class:"Class",class:"Class",year:"Class","Subject-Combination":"Subject-Combination",subjectcombination:"Subject-Combination",section:"Subject-Combination","Student Phone":"Student Phone",studentphone:"Student Phone",phone:"Student Phone",contactnumber:"Student Phone","Student CNIC/FORM-B":"Student CNIC/FORM-B","studentcnic/form-b":"Student CNIC/FORM-B",cnic:"Student CNIC/FORM-B",Email:"Email",email:"Email","Date of Birth":"Date of Birth",dateofbirth:"Date of Birth",dob:"Date of Birth",Gender:"Gender",gender:"Gender",Address:"Address",address:"Address",Status:"Status",status:"Status"},U=D.toLowerCase().replace(/\s+/g,""),ie=B[D]||B[U];ie&&z&&(ne[ie]=z)}),ne});if(W.length===0){u("No valid student data found"),v(!1);return}if(W.length>500){u("Maximum 500 students allowed per import"),v(!1);return}console.log("Importing students (CSV format):",{count:W.length,createLoginAccounts:R,sampleStudent:W[0]});const se=await va.bulkImportCSV(W,R);S(se),se.summary.successful>0&&(d(`Successfully imported ${se.summary.successful} student(s)`),m()),se.summary.failed>0&&u(`${se.summary.failed} student(s) failed to import`)}catch(M){if(console.error("Bulk import error:",M),M?.response?.status===400&&M?.response?.data?.errors){const T=M.response.data.errors;$(T);const V=T.map(W=>{const se=W.field||"unknown",le=W.message||"Validation error",ne=se.match(/students\[(\d+)\]/),D=ne?parseInt(ne[1])+1:null;return D?`Row ${D}: ${le} (${se.split(".").pop()})`:`${le} (${se})`}).slice(0,5).join(`
`);u(`Validation failed:
${V}${T.length>5?`
...and ${T.length-5} more errors`:""}`)}else u(M?.response?.data?.message||"Bulk import failed")}finally{v(!1)}},A=()=>{f(""),$([]),S(null)},X=()=>{if(!p||p.results.successful.length===0)return;const g=[R?"Row,Roll Number,Name,Login Email,Password":"Row,Roll Number,Name",...p.results.successful.map(W=>R?`${W.row},${W.rollNumber},${W.name},${W.credentials?.loginEmail||""},${W.credentials?.password||""}`:`${W.row},${W.rollNumber},${W.name}`)].join(`
`),M=new Blob([g],{type:"text/csv"}),T=URL.createObjectURL(M),V=document.createElement("a");V.href=T,V.download=`student-import-results-${Date.now()}.csv`,V.click(),URL.revokeObjectURL(T)};return i?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Bulk Import Students"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Import up to 500 students at once"})]}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsx("div",{className:"p-6",children:p?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:p.summary.total}),e.jsx("div",{className:"text-sm text-blue-700",children:"Total"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:p.summary.successful}),e.jsx("div",{className:"text-sm text-green-700",children:"Successful"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-red-900",children:p.summary.failed}),e.jsx("div",{className:"text-sm text-red-700",children:"Failed"})]})]}),p.results.successful.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-900",children:["Successfully Imported (",p.results.successful.length,")"]}),e.jsx("button",{onClick:X,className:"px-3 py-1 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Download Results"})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg overflow-hidden max-h-64 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-green-100 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-green-900",children:"Row"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-green-900",children:"Roll"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-green-900",children:"Name"}),R&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-green-900",children:"Email"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-green-900",children:"Password"})]})]})}),e.jsx("tbody",{className:"divide-y divide-green-200",children:p.results.successful.map(g=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-green-900",children:g.row}),e.jsx("td",{className:"px-3 py-2 text-green-900",children:g.rollNumber}),e.jsx("td",{className:"px-3 py-2 text-green-900",children:g.name}),R&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-3 py-2 text-green-900 font-mono text-xs",children:g.credentials?.loginEmail||"N/A"}),e.jsx("td",{className:"px-3 py-2 text-green-900 font-mono text-xs",children:g.credentials?.password||"N/A"})]})]},g.row))})]})})]}),p.results.failed.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-900 mb-3",children:["Failed (",p.results.failed.length,")"]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg overflow-hidden max-h-64 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-red-100 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-red-900",children:"Row"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-red-900",children:"Error"})]})}),e.jsx("tbody",{className:"divide-y divide-red-200",children:p.results.failed.map((g,M)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-red-900",children:g.row}),e.jsx("td",{className:"px-3 py-2 text-red-900",children:g.error})]},M))})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:A,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Import More"}),e.jsx("button",{onClick:o,className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Done"})]})]})}):e.jsxs(e.Fragment,{children:[N.length>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Validation Errors Found"}),e.jsx("div",{className:"space-y-1 text-sm text-red-800 max-h-48 overflow-y-auto",children:N.map((g,M)=>{const T=g.field||"unknown",V=g.message||"Validation error",W=T.match(/students\[(\d+)\]/),se=W?parseInt(W[1])+1:null,le=T.split(".").pop();return e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-600 font-mono text-xs",children:""}),e.jsx("span",{children:se?e.jsxs(e.Fragment,{children:[e.jsxs("strong",{children:["Row ",se]}),": ",V,e.jsxs("span",{className:"text-red-600",children:[" ","(",le,")"]})]}):e.jsxs(e.Fragment,{children:[V," ",e.jsxs("span",{className:"text-red-600",children:["(",T,")"]})]})})]},M)})}),N.length>10&&e.jsxs("p",{className:"text-xs text-red-700 mt-2",children:["Showing first 10 errors. Total:"," ",N.length," errors"]}),e.jsx("button",{onClick:()=>$([]),className:"mt-3 text-xs text-red-700 hover:text-red-900 underline",children:"Clear errors"})]})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"Import Guide"}),e.jsx("button",{type:"button",onClick:P,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Download CSV Template"})]}),e.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Required columns: Student Name, Roll No, Father Name, Program"}),e.jsx("p",{className:"text-xs text-blue-700 mb-2",children:"Optional: Class, Subject-Combination, Student Phone, Student CNIC/FORM-B, Email, Date of Birth, Gender, Address, Status"}),e.jsx("p",{className:"text-xs text-blue-700 mb-2",children:'Program format: "F.Sc. (Pre-Engineering)-Mathematics, Chemistry, Physics" (use commas to separate subjects)'}),e.jsx("p",{className:"text-xs text-blue-700",children:"Supported formats: CSV (.csv), Excel (.xls, .xlsx)"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>k("file"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${E==="file"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Upload File (CSV/Excel)"}),e.jsx("button",{type:"button",onClick:()=>k("paste"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${E==="paste"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Paste CSV Data"})]})}),e.jsxs("form",{onSubmit:te,children:[E==="file"?e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload File"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex-1 flex flex-col items-center px-4 py-6 bg-white border-2 border-gray-300 border-dashed rounded-lg cursor-pointer hover:border-blue-500 transition-colors",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("span",{className:"text-sm text-gray-600",children:O?O.name:"Click to upload CSV or Excel file"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Supports: .csv, .xls, .xlsx"}),e.jsx("input",{type:"file",accept:".csv,.xls,.xlsx",onChange:ae,className:"hidden"})]})}),O&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-green-600",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"File loaded: ",O.name]})]}):e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paste CSV Data"}),e.jsx("textarea",{value:_,onChange:g=>f(g.target.value),rows:10,placeholder:`name,rollNumber,fatherName,programId,sectionId
Ahmed Ali,123,Muhammad Ali,PROGRAM_ID,SECTION_ID`,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-mono text-sm"})]}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:g=>y(g.target.checked),className:"w-4 h-4 text-green-600 rounded"}),e.jsxs("span",{className:"text-sm font-medium text-green-900",children:["Create login accounts for all students",e.jsx("span",{className:"text-green-700 font-normal ml-1",children:"(Recommended - generates rollnumber@collegecode.edu.pk)"})]})]})})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b||!_.trim(),className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:b?"Importing...":"Import Students"})]})]})]})})]})}):null},ep=()=>{const[i,o]=h.useState([]),[m,d]=h.useState(!0),[u,b]=h.useState(""),[v,_]=h.useState(1),[f]=h.useState(20),[R,y]=h.useState(0),[p,S]=h.useState(0),[E,k]=h.useState({}),[O,w]=h.useState([]),[N,$]=h.useState([]),{toasts:P,removeToast:ae,success:te,error:A}=Be(),[X,g]=h.useState(!1),[M,T]=h.useState(!1),[V,W]=h.useState(!1),[se,le]=h.useState(null),ne=async()=>{d(!0);try{const B=u?await va.search(u,v,f):await va.getAll(v,f,E);o(B.data||[]),y(B.total),S(B.totalPages)}catch(B){A(B?.response?.data?.message||"Failed to fetch students"),o([])}finally{d(!1)}};h.useEffect(()=>{ne()},[v,E]),h.useEffect(()=>{(async()=>{try{const[U,ie]=await Promise.all([kd.getAll(),Ff.getAll()]);w(U),$(ie),console.log("Fetched programs:",U.length),console.log("Fetched sections:",ie.length),(U.length===0||ie.length===0)&&A("Warning: No programs or sections found. Please ensure you have programs and sections configured in your college.")}catch(U){console.error("Error fetching programs/sections:",U),A(U?.response?.data?.message||"Failed to fetch programs and sections")}})()},[]);const D=B=>{B.preventDefault(),_(1),ne()},G=async(B,U)=>{if(confirm(`Are you sure you want to delete ${U}?`))try{await va.delete(B),te("Student deleted successfully"),ne()}catch(ie){A(ie?.response?.data?.message||"Failed to delete student")}},z=async()=>{try{const U=["Roll Number,Name,Father Name,Contact,CNIC,Email,Login Email,Program,Section,Year,Shift,Status,Enrollment Date",...(await va.export(E)).map(I=>`${I.rollNumber},${I.name},${I.fatherName},${I.contactNumber||""},${I.cnic||""},${I.email||""},${I.loginEmail||""},${I.program},${I.section},${I.year},${I.shift},${I.status},${I.enrollmentDate}`)].join(`
`),ie=new Blob([U],{type:"text/csv"}),me=URL.createObjectURL(ie),xe=document.createElement("a");xe.href=me,xe.download=`students-export-${Date.now()}.csv`,xe.click(),URL.revokeObjectURL(me),te("Students exported successfully")}catch(B){A(B?.response?.data?.message||"Failed to export students")}};return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your college students"})]}),e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("form",{onSubmit:D,className:"flex-1 flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search by name, roll number, CNIC...",value:u,onChange:B=>b(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Search"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:z,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]}),e.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Bulk Import"]}),e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Student"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("select",{value:E.programId||"",onChange:B=>k({...E,programId:B.target.value||void 0}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Programs"}),O.map(B=>e.jsx("option",{value:B._id,children:B.name},B._id))]}),e.jsxs("select",{value:E.sectionId||"",onChange:B=>k({...E,sectionId:B.target.value||void 0}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Sections"}),N.map(B=>e.jsxs("option",{value:B._id,children:[B.name," - ",B.year]},B._id))]}),e.jsxs("select",{value:E.status||"",onChange:B=>k({...E,status:B.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Graduated",children:"Graduated"}),e.jsx("option",{value:"Dropped",children:"Dropped"})]}),(E.programId||E.sectionId||E.status)&&e.jsx("button",{onClick:()=>k({}),className:"px-3 py-2 text-sm text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Clear Filters"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No students found"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Roll Number"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Father Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Program"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Section"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(B=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:B.rollNumber}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:B.name}),B.email&&e.jsx("p",{className:"text-xs text-gray-500",children:B.email})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:B.fatherName}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:typeof B.programId=="object"?B.programId.name:"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:typeof B.sectionId=="object"?`${B.sectionId.name} - ${B.sectionId.year}`:"N/A"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${B.status==="Active"?"bg-green-100 text-green-800":B.status==="Graduated"?"bg-blue-100 text-blue-800":B.status==="Inactive"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:B.status})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>G(B._id,B.name),className:"p-1 text-red-600 hover:text-red-800",title:"Delete",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},B._id))})]})}),!m&&i.length>0&&e.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex items-center justify-between border-t",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(v-1)*f+1," to"," ",Math.min(v*f,R)," of ",R," students"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_(v-1),disabled:v===1,className:"px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(p,5)},(B,U)=>{const ie=p<=5||v<=3?U+1:v>=p-2?p-4+U:v-2+U;return e.jsx("button",{onClick:()=>_(ie),className:`px-3 py-1 border rounded-lg ${v===ie?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:ie},ie)})}),e.jsx("button",{onClick:()=>_(v+1),disabled:v===p,className:"px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),e.jsx(Pf,{isOpen:X,onClose:()=>g(!1),onSuccess:ne,onShowCredentials:B=>{le(B),W(!0)},success:te,error:A,programs:O,sections:N}),e.jsx(If,{isOpen:V,onClose:()=>W(!1),credentials:se,success:te}),e.jsx(Wf,{isOpen:M,onClose:()=>T(!1),onSuccess:ne,success:te,error:A}),e.jsx(ot,{toasts:P,onRemove:ae})]})},ws={create:async i=>(await ee.post("/college-admin/subjects",i)).data.data,getAll:async(i=1,o=50)=>(await ee.get("/college-admin/subjects",{params:{page:i,limit:o}})).data.data,getById:async i=>(await ee.get(`/college-admin/subjects/${i}`)).data.data,update:async(i,o)=>(await ee.put(`/college-admin/subjects/${i}`,o)).data.data,delete:async i=>{await ee.delete(`/college-admin/subjects/${i}`)},search:async(i,o=1,m=50)=>(await ee.get("/college-admin/subjects",{params:{page:o,limit:m,search:i}})).data.data},tp=({isOpen:i,onClose:o,onSuccess:m,editSubject:d,success:u,error:b})=>{const[v,_]=h.useState(!1),[f,R]=h.useState({name:"",code:"",description:""});h.useEffect(()=>{R(d?{name:d.name,code:d.code,description:d.description||""}:{name:"",code:"",description:""})},[d,i]);const y=async p=>{p.preventDefault(),_(!0);try{d?(await ws.update(d._id,f),u("Subject updated successfully!")):(await ws.create(f),u("Subject created successfully!")),o(),m()}catch(S){b(S?.response?.data?.message||"Failed to save subject")}finally{_(!1)}};return i?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"border-b px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:d?"Edit Subject":"Add New Subject"}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),e.jsxs("form",{onSubmit:y,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:f.name,onChange:p=>R({...f,name:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Mathematics"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:f.code,onChange:p=>R({...f,code:p.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase",placeholder:"e.g., MATH",maxLength:10})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:f.description,onChange:p=>R({...f,description:p.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Optional description..."})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:o,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:v,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Saving...":d?"Update":"Create"})]})]})]})}):null},sp=({isOpen:i,onClose:o,onConfirm:m,subjectName:d,loading:u})=>i?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Subject"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Are you sure you want to delete ",e.jsxs("strong",{children:['"',d,'"']}),"?"]})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"This action cannot be undone. All associated data will be permanently removed."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:o,disabled:u,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:m,disabled:u,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Deleting...":"Delete"})]})]})}):null,ap=()=>{const{success:i,error:o,toasts:m,removeToast:d}=Be(),[u,b]=h.useState([]),[v,_]=h.useState(!0),[f,R]=h.useState(""),[y,p]=h.useState(1),[S,E]=h.useState(1),[k,O]=h.useState(0),[w,N]=h.useState(!1),[$,P]=h.useState(!1),[ae,te]=h.useState(null),[A,X]=h.useState(null),[g,M]=h.useState(!1),T=20;h.useEffect(()=>{V()},[y]);const V=async()=>{_(!0);try{const G=await ws.getAll(y,T);b(G.subjects),E(G.totalPages),O(G.totalSubjects)}catch(G){o(G?.response?.data?.message||"Failed to fetch subjects")}finally{_(!1)}},W=async()=>{if(!f.trim()){V();return}_(!0);try{const G=await ws.search(f,y,T);b(G.subjects),E(G.totalPages),O(G.totalSubjects)}catch(G){o(G?.response?.data?.message||"Search failed")}finally{_(!1)}},se=G=>{te(G),N(!0)},le=G=>{X(G),P(!0)},ne=async()=>{if(A){M(!0);try{await ws.delete(A._id),i("Subject deleted successfully!"),P(!1),X(null),V()}catch(G){o(G?.response?.data?.message||"Failed to delete subject")}finally{M(!1)}}},D=f?u.filter(G=>G.name.toLowerCase().includes(f.toLowerCase())||G.code.toLowerCase().includes(f.toLowerCase())):u;return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx(ot,{toasts:m,onRemove:d}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Subjects"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Create and manage subjects for your college"})]}),e.jsxs("button",{onClick:()=>{te(null),N(!0)},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium shadow-sm flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Subject"]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:f,onChange:G=>R(G.target.value),onKeyPress:G=>G.key==="Enter"&&W(),placeholder:"Search by subject name or code...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsx("button",{onClick:W,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Search"}),f&&e.jsx("button",{onClick:()=>{R(""),V()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Clear"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Subjects"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",y," of ",S]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto",children:v?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):D.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No subjects found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:f?"Try adjusting your search criteria":"Get started by creating your first subject"}),!f&&e.jsx("button",{onClick:()=>N(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Add First Subject"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(G=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:G.name}),e.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded",children:G.code})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>se(G),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>le(G),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Delete",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),G.description&&e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:G.description}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Created:"," ",new Date(G.createdAt).toLocaleDateString()]}),e.jsx("span",{className:`px-2 py-1 rounded ${G.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:G.isActive?"Active":"Inactive"})]})]},G._id))}),S>1&&e.jsxs("div",{className:"mt-6 flex justify-center items-center gap-2",children:[e.jsx("button",{onClick:()=>p(G=>Math.max(1,G-1)),disabled:y===1,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex gap-2",children:Array.from({length:S},(G,z)=>z+1).map(G=>e.jsx("button",{onClick:()=>p(G),className:`px-4 py-2 rounded-lg font-medium ${y===G?"bg-blue-600 text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:G},G))}),e.jsx("button",{onClick:()=>p(G=>Math.min(S,G+1)),disabled:y===S,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}),e.jsx(tp,{isOpen:w,onClose:()=>{N(!1),te(null)},onSuccess:V,editSubject:ae,success:i,error:o}),e.jsx(sp,{isOpen:$,onClose:()=>{P(!1),X(null)},onConfirm:ne,subjectName:A?.name||"",loading:g})]})},Is={create:async i=>(await ee.post("/college-admin/sections",i)).data.data,getAll:async(i={})=>{const{page:o=1,limit:m=50,...d}=i;return(await ee.get("/college-admin/sections",{params:{page:o,limit:m,...d}})).data.data},getById:async i=>(await ee.get(`/college-admin/sections/${i}`)).data.data,update:async(i,o)=>(await ee.put(`/college-admin/sections/${i}`,o)).data.data,delete:async i=>{await ee.delete(`/college-admin/sections/${i}`)},splitByRollRanges:async i=>(await ee.post("/college-admin/sections/split-by-roll-ranges",i)).data.data,assignStudent:async i=>{await ee.post("/college-admin/sections/assign-student",i)},bulkAssign:async i=>{await ee.post("/college-admin/sections/bulk-assign",i)}},lp=({isOpen:i,onClose:o,onSuccess:m,editSection:d,programs:u,subjects:b,success:v,error:_})=>{const[f,R]=h.useState(!1),[y,p]=h.useState({name:"",programId:"",year:"1st Year",shift:"1st Shift",rollNumberRange:{start:1,end:50},subjects:[],capacity:50});h.useEffect(()=>{p(d?{name:d.name,programId:d.programId,year:d.year,shift:d.shift,rollNumberRange:d.rollNumberRange,subjects:d.subjects,capacity:d.capacity}:{name:"",programId:"",year:"1st Year",shift:"1st Shift",rollNumberRange:{start:1,end:50},subjects:[],capacity:50})},[d,i]);const S=async E=>{if(E.preventDefault(),!y.programId){_("Please select a program");return}if(y.rollNumberRange.start>=y.rollNumberRange.end){_("End roll number must be greater than start roll number");return}R(!0);try{d?(await Is.update(d._id,y),v("Section updated successfully!")):(await Is.create(y),v("Section created successfully!")),o(),m()}catch(k){_(k?.response?.data?.message||"Failed to save section")}finally{R(!1)}};return i?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:d?"Edit Section":"Add New Section"}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),e.jsxs("form",{onSubmit:S,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Section Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:y.name,onChange:E=>p({...y,name:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Section A"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:y.programId,onChange:E=>p({...y,programId:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Program"}),u.map(E=>e.jsxs("option",{value:E._id,children:[E.name," (",E.code,")"]},E._id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Year ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:y.year,onChange:E=>p({...y,year:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"1st Year",children:"1st Year"}),e.jsx("option",{value:"2nd Year",children:"2nd Year"}),e.jsx("option",{value:"3rd Year",children:"3rd Year"}),e.jsx("option",{value:"4th Year",children:"4th Year"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Shift ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:y.shift,onChange:E=>p({...y,shift:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"1st Shift",children:"1st Shift"}),e.jsx("option",{value:"2nd Shift",children:"2nd Shift"}),e.jsx("option",{value:"Morning",children:"Morning"}),e.jsx("option",{value:"Evening",children:"Evening"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Start Roll No ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",required:!0,min:"1",value:y.rollNumberRange.start,onChange:E=>p({...y,rollNumberRange:{...y.rollNumberRange,start:parseInt(E.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["End Roll No ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",required:!0,min:"1",value:y.rollNumberRange.end,onChange:E=>p({...y,rollNumberRange:{...y.rollNumberRange,end:parseInt(E.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Capacity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",required:!0,min:"1",value:y.capacity,onChange:E=>p({...y,capacity:parseInt(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subjects"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto",children:b.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No subjects available"}):e.jsx("div",{className:"space-y-2",children:b.map(E=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y.subjects.includes(E._id),onChange:k=>{k.target.checked?p({...y,subjects:[...y.subjects,E._id]}):p({...y,subjects:y.subjects.filter(O=>O!==E._id)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-700",children:[E.name," (",E.code,")"]})]},E._id))})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select subjects for this section"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:o,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Saving...":d?"Update":"Create"})]})]})]})}):null},np=({isOpen:i,onClose:o,onSuccess:m,programs:d,subjects:u,success:b,error:v})=>{const[_,f]=h.useState(!1),[R,y]=h.useState(""),[p,S]=h.useState("1st Year"),[E,k]=h.useState([{name:"Section A",start:1,end:50,shift:"1st Shift",subjects:[],capacity:50}]),[O,w]=h.useState(!1),[N,$]=h.useState(null),P=()=>{const M=E[E.length-1],T=M.end+1,V=T+49,W=String.fromCharCode(65+E.length);k([...E,{name:`Section ${W}`,start:T,end:V,shift:M.shift,subjects:[...M.subjects],capacity:50}])},ae=M=>{E.length>1&&k(E.filter((T,V)=>V!==M))},te=(M,T,V)=>{const W=[...E];W[M]={...W[M],[T]:V},k(W)},A=()=>{for(let M=0;M<E.length;M++){const T=E[M];if(T.start>=T.end)return v(`Section ${T.name}: End roll number must be greater than start`),!1;for(let V=M+1;V<E.length;V++){const W=E[V];if(T.start>=W.start&&T.start<=W.end||T.end>=W.start&&T.end<=W.end||W.start>=T.start&&W.start<=T.end)return v(`Roll number ranges overlap between ${T.name} and ${W.name}`),!1}}return!0},X=async M=>{if(M.preventDefault(),!R){v("Please select a program");return}if(A()){f(!0);try{const T={programId:R,year:p,sectionRanges:E},V=await Is.splitByRollRanges(T);$(V),w(!0),b(`Successfully created ${V.summary.totalSections} sections and assigned ${V.summary.totalStudentsAssigned} students!`)}catch(T){v(T?.response?.data?.message||"Failed to split sections")}finally{f(!1)}}},g=()=>{O&&m(),y(""),S("1st Year"),k([{name:"Section A",start:1,end:50,shift:"1st Shift",subjects:[],capacity:50}]),w(!1),$(null),o()};return i?O&&N?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Split Results"}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:" Success!"}),e.jsxs("p",{className:"text-green-800",children:["Created ",N.summary.totalSections," sections and assigned"," ",N.summary.totalStudentsAssigned," students"]})]}),e.jsx("div",{className:"space-y-4",children:N.assignedStudents.map((M,T)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:M.sectionName}),e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded",children:[M.studentCount," students"]})]}),M.students.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Assigned Students:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[M.students.slice(0,10).map(V=>e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:[V.rollNumber," - ",V.name]},V._id)),M.students.length>10&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:["+",M.students.length-10," more"]})]})]})]},T))}),e.jsx("button",{onClick:g,className:"w-full mt-6 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Done"})]})]})}):e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Split Sections by Roll Number Ranges "}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create multiple sections and automatically assign students"})]}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),e.jsxs("form",{onSubmit:X,className:"p-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" How it works:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" Define roll number ranges for each section"}),e.jsx("li",{children:" Students will be automatically assigned based on their roll numbers"}),e.jsx("li",{children:" No overlapping ranges allowed"})]})]}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Program ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:R,onChange:M=>y(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Program"}),d.map(M=>e.jsxs("option",{value:M._id,children:[M.name," (",M.code,")"]},M._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Year ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:p,onChange:M=>S(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"1st Year",children:"1st Year"}),e.jsx("option",{value:"2nd Year",children:"2nd Year"}),e.jsx("option",{value:"3rd Year",children:"3rd Year"}),e.jsx("option",{value:"4th Year",children:"4th Year"})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Section Ranges"}),e.jsxs("button",{type:"button",onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Section"]})]}),E.map((M,T)=>e.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",style:{borderLeftColor:`hsl(${T*60}, 70%, 50%)`,borderLeftWidth:"4px"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:M.name}),E.length>1&&e.jsx("button",{type:"button",onClick:()=>ae(T),className:"text-red-600 hover:text-red-700",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Section Name"}),e.jsx("input",{type:"text",required:!0,value:M.name,onChange:V=>te(T,"name",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Shift"}),e.jsxs("select",{value:M.shift,onChange:V=>te(T,"shift",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"1st Shift",children:"1st Shift"}),e.jsx("option",{value:"2nd Shift",children:"2nd Shift"}),e.jsx("option",{value:"Morning",children:"Morning"}),e.jsx("option",{value:"Evening",children:"Evening"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Roll No"}),e.jsx("input",{type:"number",required:!0,min:"1",value:M.start,onChange:V=>te(T,"start",parseInt(V.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Roll No"}),e.jsx("input",{type:"number",required:!0,min:"1",value:M.end,onChange:V=>te(T,"end",parseInt(V.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Capacity"}),e.jsx("input",{type:"number",required:!0,min:"1",value:M.capacity,onChange:V=>te(T,"capacity",parseInt(V.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Subjects"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-2 max-h-32 overflow-y-auto bg-gray-50",children:u.length===0?e.jsx("p",{className:"text-gray-500 text-xs",children:"No subjects available"}):e.jsx("div",{className:"space-y-1",children:u.map(V=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-xs",children:[e.jsx("input",{type:"checkbox",checked:M.subjects.includes(V._id),onChange:W=>{const se=W.target.checked?[...M.subjects,V._id]:M.subjects.filter(le=>le!==V._id);te(T,"subjects",se)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("span",{className:"text-gray-700",children:[V.name," (",V.code,")"]})]},V._id))})})]}),e.jsxs("div",{className:"mt-3 p-2 bg-gray-50 rounded text-xs text-gray-600",children:["Roll Range: ",M.start," - ",M.end," (",M.end-M.start+1," students)"]})]},T))]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:g,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:_,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Creating Sections...":"Create Sections"})]})]})]})}):null},rp=({isOpen:i,onClose:o,onConfirm:m,sectionName:d,loading:u})=>i?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Section"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Are you sure you want to delete ",e.jsxs("strong",{children:['"',d,'"']}),"?"]})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"This action cannot be undone. All student assignments will be removed."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:o,disabled:u,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:m,disabled:u,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Deleting...":"Delete"})]})]})}):null,ip=()=>{const{success:i,error:o,toasts:m,removeToast:d}=Be(),[u,b]=h.useState([]),[v,_]=h.useState([]),[f,R]=h.useState([]),[y,p]=h.useState(!0),[S,E]=h.useState(1),[k,O]=h.useState(1),[w,N]=h.useState(0),[$,P]=h.useState(!1),[ae,te]=h.useState(!1),[A,X]=h.useState(!1),[g,M]=h.useState(null),[T,V]=h.useState(null),[W,se]=h.useState(!1),[le,ne]=h.useState(""),[D,G]=h.useState(""),z=12;h.useEffect(()=>{B()},[]),h.useEffect(()=>{U()},[S,le,D]);const B=async()=>{try{const[Q,he]=await Promise.all([kd.getAll(),ws.getAll(1,100)]);_(Q),R(he.subjects)}catch{o("Failed to load programs or subjects")}},U=async()=>{p(!0);try{const Q={page:S,limit:z};le&&(Q.programId=le),D&&(Q.year=D);const he=await Is.getAll(Q);b(he.sections),O(he.totalPages),N(he.totalSections)}catch(Q){o(Q?.response?.data?.message||"Failed to fetch sections")}finally{p(!1)}},ie=Q=>{M(Q),P(!0)},me=Q=>{V(Q),X(!0)},xe=async()=>{if(T){se(!0);try{await Is.delete(T._id),i("Section deleted successfully!"),X(!1),V(null),U()}catch(Q){o(Q?.response?.data?.message||"Failed to delete section")}finally{se(!1)}}},I=()=>{ne(""),G(""),E(1)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx(ot,{toasts:m,onRemove:d}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Sections"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Create sections and split by roll number ranges"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>te(!0),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium shadow-sm flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Split Sections "]}),e.jsxs("button",{onClick:()=>{M(null),P(!0)},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium shadow-sm flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Section"]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:le,onChange:Q=>{ne(Q.target.value),E(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Programs"}),v.map(Q=>e.jsx("option",{value:Q._id,children:Q.name},Q._id))]}),e.jsxs("select",{value:D,onChange:Q=>{G(Q.target.value),E(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Years"}),e.jsx("option",{value:"1st Year",children:"1st Year"}),e.jsx("option",{value:"2nd Year",children:"2nd Year"}),e.jsx("option",{value:"3rd Year",children:"3rd Year"}),e.jsx("option",{value:"4th Year",children:"4th Year"})]}),(le||D)&&e.jsx("button",{onClick:I,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Clear Filters"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Sections"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",S," of ",k||1]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto",children:y?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):u.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No sections found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:le||D?"Try adjusting your filters":"Get started by creating your first section"}),!le&&!D&&e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>P(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Add Section"}),e.jsx("button",{onClick:()=>te(!0),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium",children:"Split Sections"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(Q=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:Q.name}),e.jsx("p",{className:"text-sm text-gray-600",children:Q.program?.name||"Unknown Program"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ie(Q),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>me(Q),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Delete",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{children:[Q.year,"  ",Q.shift]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),e.jsxs("span",{children:["Roll: ",Q.rollNumberRange.start," -"," ",Q.rollNumberRange.end]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsxs("span",{children:[Q.currentStrength||0," / ",Q.capacity," ","students"]})]})]}),Q.subjects&&Q.subjects.length>0&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Subjects:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[Q.subjects.slice(0,3).map((he,Ne)=>{const ut=f.find(de=>de._id===he);return ut?e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:ut.code},Ne):null}),Q.subjects.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded",children:["+",Q.subjects.length-3]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Created:"," ",new Date(Q.createdAt).toLocaleDateString()]}),e.jsx("span",{className:`px-2 py-1 rounded ${Q.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Q.isActive?"Active":"Inactive"})]})]},Q._id))}),k>1&&e.jsxs("div",{className:"mt-6 flex justify-center items-center gap-2",children:[e.jsx("button",{onClick:()=>E(Q=>Math.max(1,Q-1)),disabled:S===1,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex gap-2",children:Array.from({length:Math.min(k,5)},(Q,he)=>{let Ne;return k<=5||S<=3?Ne=he+1:S>=k-2?Ne=k-4+he:Ne=S-2+he,e.jsx("button",{onClick:()=>E(Ne),className:`px-4 py-2 rounded-lg font-medium ${S===Ne?"bg-blue-600 text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:Ne},Ne)})}),e.jsx("button",{onClick:()=>E(Q=>Math.min(k,Q+1)),disabled:S===k,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}),e.jsx(lp,{isOpen:$,onClose:()=>{P(!1),M(null)},onSuccess:U,editSection:g,programs:v,subjects:f,success:i,error:o}),e.jsx(np,{isOpen:ae,onClose:()=>te(!1),onSuccess:U,programs:v,subjects:f,success:i,error:o}),e.jsx(rp,{isOpen:A,onClose:()=>{X(!1),V(null)},onConfirm:xe,sectionName:T?.name||"",loading:W})]})},Zr={create:async i=>(await ee.post("/college-admin/teacher-assignments",i)).data.data,getAll:async(i={})=>{const{page:o=1,limit:m=50,...d}=i;return(await ee.get("/college-admin/teacher-assignments",{params:{page:o,limit:m,...d}})).data.data},getTeacherSchedule:async(i,o={})=>{const{page:m=1,limit:d=100,...u}=o;return(await ee.get(`/college-admin/teacher-assignments/teacher/${i}`,{params:{page:m,limit:d,...u}})).data.data},getSectionTeachers:async(i,o={})=>{const{page:m=1,limit:d=100,...u}=o;return(await ee.get(`/college-admin/teacher-assignments/section/${i}`,{params:{page:m,limit:d,...u}})).data.data},update:async(i,o)=>(await ee.put(`/college-admin/teacher-assignments/${i}`,o)).data.data,delete:async i=>{await ee.delete(`/college-admin/teacher-assignments/${i}`)}},cp=({isOpen:i,onClose:o,onSuccess:m,editAssignment:d,teachers:u,subjects:b,sections:v,success:_,error:f})=>{const[R,y]=h.useState(!1),[p,S]=h.useState({teacherId:"",subjectId:"",sectionId:"",academicYear:"2025-2026",semester:"Fall"});h.useEffect(()=>{S(d?{teacherId:d.teacherId,subjectId:d.subjectId,sectionId:d.sectionId,academicYear:d.academicYear,semester:d.semester}:{teacherId:"",subjectId:"",sectionId:"",academicYear:"2025-2026",semester:"Fall"})},[d,i]);const E=async k=>{if(k.preventDefault(),!p.teacherId||!p.subjectId||!p.sectionId){f("Please fill all required fields");return}y(!0);try{d?(await Zr.update(d._id,p),_("Assignment updated successfully!")):(await Zr.create(p),_("Assignment created successfully!")),o(),m()}catch(O){f(O?.response?.data?.message||"Failed to save assignment")}finally{y(!1)}};return i?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[e.jsxs("div",{className:"border-b px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:d?"Edit Assignment":"Add New Assignment"}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),e.jsxs("form",{onSubmit:E,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Teacher ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:p.teacherId,onChange:k=>S({...p,teacherId:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Teacher"}),u.map(k=>e.jsxs("option",{value:k._id,children:[k.name," - ",k.email]},k._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:p.subjectId,onChange:k=>S({...p,subjectId:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Subject"}),b.map(k=>e.jsxs("option",{value:k._id,children:[k.name," (",k.code,")"]},k._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Section ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:p.sectionId,onChange:k=>S({...p,sectionId:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Section"}),v.map(k=>e.jsxs("option",{value:k._id,children:[k.name," - ",k.year," (",k.shift,")"]},k._id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Academic Year ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:p.academicYear,onChange:k=>S({...p,academicYear:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 2025-2026"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Semester ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:p.semester,onChange:k=>S({...p,semester:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"Fall",children:"Fall"}),e.jsx("option",{value:"Spring",children:"Spring"}),e.jsx("option",{value:"Summer",children:"Summer"})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:o,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:R,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Saving...":d?"Update":"Assign"})]})]})]})}):null},dp=({isOpen:i,onClose:o,onConfirm:m,loading:d})=>i?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Remove Assignment"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Are you sure you want to remove this assignment?"})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"This action cannot be undone. The teacher will no longer be assigned to this section."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:o,disabled:d,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:m,disabled:d,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Removing...":"Remove"})]})]})}):null,op=()=>{const{success:i,error:o,toasts:m,removeToast:d}=Be(),[u,b]=h.useState([]),[v,_]=h.useState([]),[f,R]=h.useState([]),[y,p]=h.useState([]),[S,E]=h.useState([]),[k,O]=h.useState(!0),[w,N]=h.useState(1),[$,P]=h.useState(1),[ae,te]=h.useState(0),[A,X]=h.useState(!1),[g,M]=h.useState(!1),[T,V]=h.useState(null),[W,se]=h.useState(null),[le,ne]=h.useState(!1),[D,G]=h.useState("2025-2026"),[z,B]=h.useState(""),[U,ie]=h.useState(""),me=20;h.useEffect(()=>{xe()},[]),h.useEffect(()=>{I()},[w,D,z,U]);const xe=async()=>{try{const[de,gt,mt,ml]=await Promise.all([ja.getAll(1,200),ws.getAll(1,100),Is.getAll({page:1,limit:200}),kd.getAll()]);_(de.data),R(gt.subjects),p(mt.sections),E(ml)}catch{o("Failed to load initial data")}},I=async()=>{O(!0);try{const de={page:w,limit:me};D&&(de.academicYear=D),z&&(de.semester=z),U&&(de.programId=U);const gt=await Zr.getAll(de);b(gt.assignments),P(gt.totalPages),te(gt.totalAssignments)}catch(de){o(de?.response?.data?.message||"Failed to fetch assignments")}finally{O(!1)}},Q=de=>{V(de),X(!0)},he=de=>{se(de),M(!0)},Ne=async()=>{if(W){ne(!0);try{await Zr.delete(W._id),i("Assignment removed successfully!"),M(!1),se(null),I()}catch(de){o(de?.response?.data?.message||"Failed to remove assignment")}finally{ne(!1)}}},ut=()=>{G("2025-2026"),B(""),ie(""),N(1)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx(ot,{toasts:m,onRemove:d}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teacher Assignments"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Assign teachers to sections for subjects"})]}),e.jsxs("button",{onClick:()=>{V(null),X(!0)},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium shadow-sm flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Assignment"]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx("input",{type:"text",value:D,onChange:de=>{G(de.target.value),N(1)},placeholder:"Academic Year (e.g., 2025-2026)",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsxs("select",{value:z,onChange:de=>{B(de.target.value),N(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Semesters"}),e.jsx("option",{value:"Fall",children:"Fall"}),e.jsx("option",{value:"Spring",children:"Spring"}),e.jsx("option",{value:"Summer",children:"Summer"})]}),e.jsxs("select",{value:U,onChange:de=>{ie(de.target.value),N(1)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Programs"}),S.map(de=>e.jsx("option",{value:de._id,children:de.name},de._id))]}),(z||U||D!=="2025-2026")&&e.jsx("button",{onClick:ut,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Clear Filters"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ae}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Assignments"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",w," of ",$||1]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto",children:k?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):u.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No assignments found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:z||U?"Try adjusting your filters":"Get started by creating your first assignment"}),!z&&!U&&e.jsx("button",{onClick:()=>X(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"New Assignment"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Section"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academic Year"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Semester"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(de=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-medium text-sm",children:de.teacher?.name?.charAt(0)||"T"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:de.teacher?.name||"Unknown"}),e.jsx("div",{className:"text-sm text-gray-500",children:de.teacher?.email||""})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:de.subject?.name||"Unknown"}),e.jsx("div",{className:"text-sm text-gray-500",children:de.subject?.code||""})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:de.section?.name||"Unknown"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[de.section?.year||""," "," ",de.section?.shift||""]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:de.academicYear}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${de.semester==="Fall"?"bg-orange-100 text-orange-800":de.semester==="Spring"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:de.semester})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${de.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:de.isActive?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>Q(de),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>he(de),className:"text-red-600 hover:text-red-900",children:"Remove"})]})]},de._id))})]})})}),$>1&&e.jsxs("div",{className:"mt-6 flex justify-center items-center gap-2",children:[e.jsx("button",{onClick:()=>N(de=>Math.max(1,de-1)),disabled:w===1,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex gap-2",children:Array.from({length:Math.min($,5)},(de,gt)=>{let mt;return $<=5||w<=3?mt=gt+1:w>=$-2?mt=$-4+gt:mt=w-2+gt,e.jsx("button",{onClick:()=>N(mt),className:`px-4 py-2 rounded-lg font-medium ${w===mt?"bg-blue-600 text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:mt},mt)})}),e.jsx("button",{onClick:()=>N(de=>Math.min($,de+1)),disabled:w===$,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}),e.jsx(cp,{isOpen:A,onClose:()=>{X(!1),V(null)},onSuccess:I,editAssignment:T,teachers:v,subjects:f,sections:y,success:i,error:o}),e.jsx(dp,{isOpen:g,onClose:()=>{M(!1),se(null)},onConfirm:Ne,loading:le})]})},$r={markAttendance:async i=>(await ee.post("/college-admin/attendance/mark",i)).data.data,getAttendance:async i=>{const{page:o=1,limit:m=200,...d}=i;return(await ee.get("/college-admin/attendance",{params:{page:o,limit:m,...d}})).data.data},getStudentAttendance:async(i,o={})=>{const{page:m=1,limit:d=100,...u}=o;return(await ee.get(`/college-admin/attendance/student/${i}`,{params:{page:m,limit:d,...u}})).data.data},getStudentStats:async(i,o={})=>(await ee.get(`/college-admin/attendance/stats/student/${i}`,{params:o})).data.data,getSectionStats:async(i,o,m,d,u=1,b=100)=>(await ee.get(`/college-admin/attendance/stats/section/${i}`,{params:{subjectId:o,startDate:m,endDate:d,page:u,limit:b}})).data.data,generateSheet:async(i,o)=>(await ee.get(`/college-admin/attendance/sheet/${i}`,{params:{subjectId:o}})).data.data,update:async(i,o)=>(await ee.put(`/college-admin/attendance/${i}`,o)).data.data,delete:async i=>{await ee.delete(`/college-admin/attendance/${i}`)}},up=({student:i,status:o,remarks:m,onStatusChange:d,onRemarksChange:u})=>{const v={Present:{color:"text-green-700",bgColor:"bg-green-100",icon:""},Absent:{color:"text-red-700",bgColor:"bg-red-100",icon:""},Late:{color:"text-yellow-700",bgColor:"bg-yellow-100",icon:""},Leave:{color:"text-blue-700",bgColor:"bg-blue-100",icon:""},Excused:{color:"text-purple-700",bgColor:"bg-purple-100",icon:""}}[o];return e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white border border-gray-200 rounded-lg hover:shadow-sm transition-shadow",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full ${v.bgColor} flex items-center justify-center flex-shrink-0`,children:e.jsx("span",{className:`text-lg ${v.color}`,children:v.icon})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:i.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Roll: ",i.rollNumber,i.fatherName&&`  Father: ${i.fatherName}`]})]})]})}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{type:"button",onClick:()=>d("Present"),className:`px-3 py-1 rounded text-xs font-medium ${o==="Present"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,title:"Present (P)",children:" P"}),e.jsx("button",{type:"button",onClick:()=>d("Absent"),className:`px-3 py-1 rounded text-xs font-medium ${o==="Absent"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,title:"Absent (A)",children:" A"}),e.jsx("button",{type:"button",onClick:()=>d("Late"),className:`px-3 py-1 rounded text-xs font-medium ${o==="Late"?"bg-yellow-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,title:"Late (L)",children:" L"}),e.jsx("button",{type:"button",onClick:()=>d("Leave"),className:`px-3 py-1 rounded text-xs font-medium ${o==="Leave"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,title:"Leave (V)",children:" V"}),e.jsx("button",{type:"button",onClick:()=>d("Excused"),className:`px-3 py-1 rounded text-xs font-medium ${o==="Excused"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,title:"Excused (E)",children:" E"})]}),e.jsx("div",{className:"w-48",children:e.jsx("input",{type:"text",value:m,onChange:_=>u(_.target.value),placeholder:"Remarks...",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})]})},mp=()=>{const{success:i,error:o,toasts:m,removeToast:d}=Be(),[u,b]=h.useState([]),[v,_]=h.useState([]),[f,R]=h.useState(""),[y,p]=h.useState(""),[S,E]=h.useState(new Date().toISOString().split("T")[0]),[k,O]=h.useState(1),[w,N]=h.useState(null),[$,P]=h.useState(new Map),[ae,te]=h.useState(!1),[A,X]=h.useState(!1),[g,M]=h.useState(!1),[T,V]=h.useState(null);h.useEffect(()=>{W()},[]),h.useEffect(()=>{const B=U=>{if(U.ctrlKey||U.metaKey)switch(U.key.toLowerCase()){case"p":U.preventDefault(),D("Present");break;case"a":U.preventDefault(),D("Absent");break}};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[w]);const W=async()=>{try{const[B,U]=await Promise.all([Is.getAll({page:1,limit:200}),ws.getAll(1,100)]);b(B.sections),_(U.subjects)}catch{o("Failed to load data")}},se=async()=>{if(!f||!y){o("Please select section and subject");return}te(!0);try{const B=await $r.generateSheet(f,y);N(B);const U=new Map;B.students.forEach(ie=>{U.set(ie._id,{status:"Present",remarks:""})}),P(U),i("Attendance sheet generated successfully!")}catch(B){o(B?.response?.data?.message||"Failed to generate attendance sheet")}finally{te(!1)}},le=(B,U)=>{const ie=new Map($),me=ie.get(B)||{status:"Present",remarks:""};ie.set(B,{...me,status:U}),P(ie)},ne=(B,U)=>{const ie=new Map($),me=ie.get(B)||{status:"Present",remarks:""};ie.set(B,{...me,remarks:U}),P(ie)},D=B=>{if(!w)return;const U=new Map($);w.students.forEach(ie=>{const me=U.get(ie._id)||{status:"Present",remarks:""};U.set(ie._id,{...me,status:B})}),P(U),i(`Marked all students as ${B}`)},G=async()=>{if(!f||!y||!w){o("Please generate attendance sheet first");return}if($.size===0){o("No attendance records to submit");return}X(!0);try{const B=Array.from($.entries()).map(([ie,me])=>({studentId:ie,status:me.status,remarks:me.remarks})),U=await $r.markAttendance({sectionId:f,subjectId:y,date:S,period:k,attendanceRecords:B});V(U),M(!0),i("Attendance marked successfully!"),N(null),P(new Map),R(""),p("")}catch(B){o(B?.response?.data?.message||"Failed to mark attendance")}finally{X(!1)}},z=B=>Array.from($.values()).filter(U=>U.status===B).length;return g&&T?e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx(ot,{toasts:m,onRemove:d}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Attendance Marked Successfully! "}),e.jsxs("p",{className:"text-gray-600",children:[T.successfulRecords," out of"," ",T.totalRecords," records saved"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Date"}),e.jsx("p",{className:"font-medium text-gray-900",children:T.date})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Period"}),e.jsx("p",{className:"font-medium text-gray-900",children:T.period})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Section"}),e.jsx("p",{className:"font-medium text-gray-900",children:u.find(B=>B._id===T.sectionId)?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Subject"}),e.jsx("p",{className:"font-medium text-gray-900",children:v.find(B=>B._id===T.subjectId)?.name||"N/A"})]})]})]}),e.jsx("button",{onClick:()=>{M(!1),V(null)},className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Mark Another Attendance"})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx(ot,{toasts:m,onRemove:d}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mark Attendance "}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Mark attendance for entire section at once"})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Section ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:f,onChange:B=>R(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!!w,children:[e.jsx("option",{value:"",children:"Select Section"}),u.map(B=>e.jsxs("option",{value:B._id,children:[B.name," - ",B.year," (",B.shift,")"]},B._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:y,onChange:B=>p(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!!w,children:[e.jsx("option",{value:"",children:"Select Subject"}),v.map(B=>e.jsxs("option",{value:B._id,children:[B.name," (",B.code,")"]},B._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:S,onChange:B=>E(B.target.value),max:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!!w})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Period ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"1",max:"8",value:k,onChange:B=>O(parseInt(B.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!!w})]})]}),w?e.jsx("button",{onClick:()=>{N(null),P(new Map)},className:"w-full px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium",children:"Change Selection"}):e.jsx("button",{onClick:se,disabled:ae||!f||!y,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ae?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Generating Sheet..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Generate Attendance Sheet"]})})]})}),w&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-1",children:[w.section.name," -"," ",w.subject.name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[w.totalStudents," students  ",S,"  Period"," ",k]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{type:"button",onClick:()=>D("Present"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium",children:"Mark All Present (Ctrl+P)"}),e.jsx("button",{type:"button",onClick:()=>D("Absent"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium",children:"Mark All Absent (Ctrl+A)"})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 text-lg",children:""})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:z("Present")}),e.jsx("p",{className:"text-sm text-gray-600",children:"Present"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-red-600 text-lg",children:""})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:z("Absent")}),e.jsx("p",{className:"text-sm text-gray-600",children:"Absent"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-yellow-600 text-lg",children:""})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:z("Late")}),e.jsx("p",{className:"text-sm text-gray-600",children:"Late"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 text-lg",children:""})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:z("Leave")}),e.jsx("p",{className:"text-sm text-gray-600",children:"Leave"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 text-lg",children:""})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:z("Excused")}),e.jsx("p",{className:"text-sm text-gray-600",children:"Excused"})]})]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsx("div",{className:"space-y-2",children:w.students.map(B=>{const U=$.get(B._id)||{status:"Present",remarks:""};return e.jsx(up,{student:B,status:U.status,remarks:U.remarks,onStatusChange:ie=>le(B._id,ie),onRemarksChange:ie=>ne(B._id,ie)},B._id)})})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Ready to Submit?"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Please review all attendance records before submitting"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:$.size}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Records"})]})]}),e.jsx("button",{onClick:G,disabled:A||$.size===0,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:A?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Submitting Attendance..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Submit Attendance"]})})]})})]}),!w&&e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:" How to Mark Attendance:"}),e.jsxs("ol",{className:"space-y-2 text-sm text-blue-800",children:[e.jsx("li",{children:"1. Select the section, subject, date, and period"}),e.jsx("li",{children:'2. Click "Generate Attendance Sheet" to load all students'}),e.jsx("li",{children:'3. All students are marked as "Present" by default'}),e.jsx("li",{children:"4. Click status buttons to change individual student status"}),e.jsx("li",{children:"5. Add remarks if needed (optional)"}),e.jsx("li",{children:'6. Review the summary and click "Submit Attendance"'})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-200",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Keyboard Shortcuts:"}),e.jsxs("div",{className:"flex gap-4 text-xs text-blue-800",children:[e.jsx("span",{children:" Ctrl+P: Mark All Present"}),e.jsx("span",{children:" Ctrl+A: Mark All Absent"})]})]})]})})]})},xp=({stats:i,onClose:o})=>{const m=[{name:"Present",value:i.stats.present,color:"#10b981"},{name:"Absent",value:i.stats.absent,color:"#ef4444"},{name:"Late",value:i.stats.late,color:"#f59e0b"},{name:"Leave",value:i.stats.leave,color:"#3b82f6"},{name:"Excused",value:i.stats.excused,color:"#8b5cf6"}],d=u=>u>=90?"text-green-600 bg-green-100":u>=75?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100";return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i.student.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Roll: ",i.student.rollNumber,"  ",i.student.program," "," ",i.student.section]})]}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Classes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i.stats.totalClasses})]}),e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-green-600 mb-1",children:"Present"}),e.jsx("p",{className:"text-3xl font-bold text-green-700",children:i.stats.present})]}),e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-red-600 mb-1",children:"Absent"}),e.jsx("p",{className:"text-3xl font-bold text-red-700",children:i.stats.absent})]}),e.jsxs("div",{className:`rounded-lg p-4 border-2 ${d(i.stats.attendancePercentage)}`,children:[e.jsx("p",{className:"text-sm mb-1",children:"Attendance %"}),e.jsxs("p",{className:"text-3xl font-bold",children:[i.stats.attendancePercentage.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Attendance Distribution"}),e.jsx(Vr,{width:"100%",height:300,children:e.jsxs(wd,{children:[e.jsx(Sd,{data:m,cx:"50%",cy:"50%",labelLine:!1,label:({name:u,value:b})=>`${u}: ${b}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:m.map((u,b)=>e.jsx(Cd,{fill:u.color},`cell-${b}`))}),e.jsx(Qr,{})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Detailed Breakdown"}),e.jsx("div",{className:"space-y-3",children:m.map(u=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:u.color}}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:u.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:u.value}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",(u.value/i.stats.totalClasses*100).toFixed(1),"%)"]})]})]},u.name))})]})]}),i.subjectWiseStats&&i.subjectWiseStats.length>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Subject-wise Attendance"}),e.jsx(Vr,{width:"100%",height:300,children:e.jsxs(Fg,{data:i.subjectWiseStats,children:[e.jsx(Jg,{strokeDasharray:"3 3"}),e.jsx(Pg,{dataKey:"subject.code"}),e.jsx(Ig,{}),e.jsx(Qr,{}),e.jsx(Ix,{}),e.jsx(Ux,{dataKey:"present",fill:"#10b981",name:"Present"}),e.jsx(Ux,{dataKey:"absent",fill:"#ef4444",name:"Absent"})]})}),e.jsx("div",{className:"mt-4 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Total"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Present"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Absent"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"%"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.subjectWiseStats.map((u,b)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:u.subject.name}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-700 text-center",children:u.totalClasses}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-green-600 text-center font-medium",children:u.present}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-red-600 text-center font-medium",children:u.absent}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-center",children:e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d(u.attendancePercentage)}`,children:[u.attendancePercentage.toFixed(1),"%"]})})]},b))})]})})]}),e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Statistics Period:"," ",new Date(i.dateRange.startDate).toLocaleDateString()," to"," ",new Date(i.dateRange.endDate).toLocaleDateString()]})}),e.jsx("button",{onClick:o,className:"w-full mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Close"})]})]})})},hp=()=>{const{success:i,error:o,toasts:m,removeToast:d}=Be(),[u,b]=h.useState("student"),[v,_]=h.useState([]),[f,R]=h.useState([]),[y,p]=h.useState([]),[S,E]=h.useState(""),[k,O]=h.useState(""),[w,N]=h.useState(""),[$,P]=h.useState(new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0]),[ae,te]=h.useState(new Date().toISOString().split("T")[0]),[A,X]=h.useState(null),[g,M]=h.useState(null),[T,V]=h.useState(!1),[W,se]=h.useState(!1);h.useEffect(()=>{le()},[]);const le=async()=>{try{const[z,B,U]=await Promise.all([Is.getAll({page:1,limit:200}),ws.getAll(1,100),va.getAll(1,500)]);_(z.sections),R(B.subjects),p(U.data)}catch{o("Failed to load data")}},ne=async()=>{if(!S){o("Please select a student");return}V(!0);try{const z=await $r.getStudentStats(S,{subjectId:w||void 0,startDate:$,endDate:ae});X(z),se(!0),i("Statistics generated successfully!")}catch(z){o(z?.response?.data?.message||"Failed to generate statistics")}finally{V(!1)}},D=async()=>{if(!k||!w){o("Please select section and subject");return}V(!0);try{const z=await $r.getSectionStats(k,w,$,ae);M(z),se(!0),i("Statistics generated successfully!")}catch(z){o(z?.response?.data?.message||"Failed to generate statistics")}finally{V(!1)}},G=z=>z>=90?"bg-green-100 text-green-800":z>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx(ot,{toasts:m,onRemove:d}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Attendance Statistics "}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View detailed attendance reports and analytics"})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{b("student"),se(!1)},className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all ${u==="student"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Student Statistics"]})}),e.jsx("button",{onClick:()=>{b("section"),se(!1)},className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all ${u==="section"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Section Statistics"]})})]})})}),!W&&e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Filters"}),u==="student"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Student ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:S,onChange:z=>E(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Student"}),y.map(z=>e.jsxs("option",{value:z._id,children:[z.name," (",z.rollNumber,")"]},z._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject (Optional)"}),e.jsxs("select",{value:w,onChange:z=>N(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Subjects"}),f.map(z=>e.jsxs("option",{value:z._id,children:[z.name," (",z.code,")"]},z._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:$,onChange:z=>P(z.target.value),max:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:ae,onChange:z=>te(z.target.value),min:$,max:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Section ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:k,onChange:z=>O(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Section"}),v.map(z=>e.jsxs("option",{value:z._id,children:[z.name," - ",z.year," (",z.shift,")"]},z._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:w,onChange:z=>N(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Subject"}),f.map(z=>e.jsxs("option",{value:z._id,children:[z.name," (",z.code,")"]},z._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:$,onChange:z=>P(z.target.value),max:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:ae,onChange:z=>te(z.target.value),min:$,max:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsx("button",{onClick:u==="student"?ne:D,disabled:T,className:"w-full mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:T?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Generating Statistics..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Generate Statistics"]})})]})}),W&&u==="section"&&g&&e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>se(!1),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Filters"]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:[g.section.name," - ",g.subject.name]}),e.jsxs("p",{className:"text-gray-600",children:[g.section.year,"  ",g.section.shift," "," ",new Date(g.dateRange.startDate).toLocaleDateString()," ","to ",new Date(g.dateRange.endDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Students"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:g.overallStats.totalStudents})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Classes"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:g.overallStats.totalClasses})]}),e.jsxs("div",{className:`rounded-lg shadow-sm p-6 ${G(g.overallStats.averageAttendance)}`,children:[e.jsx("p",{className:"text-sm mb-1",children:"Average Attendance"}),e.jsxs("p",{className:"text-4xl font-bold",children:[g.overallStats.averageAttendance.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"Student-wise Attendance"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Present"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Absent"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Late"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Excused"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"%"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.studentStats.map((z,B)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:z.student.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Roll: ",z.student.rollNumber]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900",children:z.totalClasses}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-green-600 font-medium",children:z.present}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-red-600 font-medium",children:z.absent}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-yellow-600",children:z.late}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-blue-600",children:z.leave}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-purple-600",children:z.excused}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${G(z.attendancePercentage)}`,children:[z.attendancePercentage.toFixed(1),"%"]})})]},B))})]})})]})]}),W&&u==="student"&&A&&e.jsx(xp,{stats:A,onClose:()=>se(!1)}),!W&&e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:" Statistics Features:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Student Statistics:"})," View individual student attendance with subject-wise breakdown and charts"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Section Statistics:"})," View entire section's attendance with student-wise comparison"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Color Coding:"})," Green (90%), Yellow (75-89%), Red (<75%)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Date Range:"})," Select custom date ranges to filter statistics"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Export Ready:"})," Tables can be copied for reports"]})]})]})})]})};class gp{basePath="/teacher-portal";async getMyAssignments(o){return(await ee.get(`${this.basePath}/my-assignments`,{params:o})).data}async getMySections(o){return(await ee.get(`${this.basePath}/my-sections`,{params:o})).data}async getMySubjects(o){return(await ee.get(`${this.basePath}/my-subjects`,{params:o})).data}async getSectionStudents(o,m){return(await ee.get(`${this.basePath}/sections/${o}/students`,{params:m})).data}async markAttendance(o){return(await ee.post(`${this.basePath}/attendance/mark`,o)).data}async getAttendance(o){return(await ee.get(`${this.basePath}/attendance`,{params:o})).data}async generateAttendanceSheet(o,m,d){return(await ee.get(`${this.basePath}/attendance/sheet`,{params:{sectionId:o,subjectId:m,date:d}})).data}async getStudentStats(o,m){return(await ee.get(`${this.basePath}/attendance/stats/student/${o}`,{params:m})).data}async getSectionStats(o,m,d,u){return(await ee.get(`${this.basePath}/attendance/stats/section/${o}`,{params:{subjectId:m,startDate:d,endDate:u}})).data}}const ct=new gp,fp=()=>{const{toasts:i,removeToast:o,error:m}=Be(),d=es(),[u,b]=h.useState([]),[v,_]=h.useState(!0),[f,R]=h.useState({totalAssignments:0,uniqueSections:0,uniqueSubjects:0,todayClasses:0});h.useEffect(()=>{y()},[]);const y=async()=>{try{_(!0);const[k,O,w]=await Promise.all([ct.getMyAssignments({page:1,limit:100}),ct.getMySections(),ct.getMySubjects()]);b(k.assignments);const N=new Date().toLocaleDateString("en-US",{weekday:"long"}),$=k.assignments.filter(P=>P.schedule?.some(ae=>ae.day===N)).length;R({totalAssignments:k.total,uniqueSections:O.sections.length,uniqueSubjects:w.subjects.length,todayClasses:$})}catch(k){m(k?.response?.data?.message||"Failed to load dashboard data")}finally{_(!1)}},p=()=>{const k=new Date().toLocaleDateString("en-US",{weekday:"long"});return u.filter(O=>O.schedule?.some(w=>w.day===k)).map(O=>({assignment:O,schedule:O.schedule.filter(w=>w.day===k)})).sort((O,w)=>{const N=O.schedule[0]?.startTime||"",$=w.schedule[0]?.startTime||"";return N.localeCompare($)})},S=k=>{switch(k){case"Fall":return"bg-orange-100 text-orange-800";case"Spring":return"bg-green-100 text-green-800";case"Summer":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};if(v)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading dashboard..."})]})});const E=p();return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx(ot,{toasts:i,onRemove:o}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teacher Dashboard "}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's your teaching overview."})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Today's Date"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Assignments"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:f.totalAssignments})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(Ue,{className:"w-8 h-8 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Unique Sections"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:f.uniqueSections})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(De,{className:"w-8 h-8 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-purple-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Unique Subjects"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:f.uniqueSubjects})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:e.jsx(Fe,{className:"w-8 h-8 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-orange-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Today's Classes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:f.todayClasses})]}),e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:e.jsx(Ps,{className:"w-8 h-8 text-orange-600"})})]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>d("/teacher/my-classes"),className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all group",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg group-hover:bg-blue-500 transition-colors",children:e.jsx(Ue,{className:"w-6 h-6 text-blue-600 group-hover:text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"My Classes"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View assignments"})]})]}),e.jsxs("button",{onClick:()=>d("/teacher/mark-attendance"),className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:border-green-500 hover:bg-green-50 transition-all group",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg group-hover:bg-green-500 transition-colors",children:e.jsx(Ad,{className:"w-6 h-6 text-green-600 group-hover:text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Mark Attendance"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Take attendance"})]})]}),e.jsxs("button",{onClick:()=>d("/teacher/attendance-records"),className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-all group",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg group-hover:bg-purple-500 transition-colors",children:e.jsx(ht,{className:"w-6 h-6 text-purple-600 group-hover:text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"View Records"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Attendance history"})]})]}),e.jsxs("button",{onClick:()=>d("/teacher/statistics"),className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition-all group",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg group-hover:bg-orange-500 transition-colors",children:e.jsx(Xr,{className:"w-6 h-6 text-orange-600 group-hover:text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Statistics"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View analytics"})]})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Today's Schedule"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[E.length," ",E.length===1?"class":"classes"," today"]})]}),E.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ht,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No classes scheduled for today"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Enjoy your day off! "})]}):e.jsx("div",{className:"space-y-3",children:E.map(({assignment:k,schedule:O})=>O.map((w,N)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-500 transition-all hover:shadow-md",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsx(Ps,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[w.startTime," - ",w.endTime]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Period ",w.period]})]})]}),e.jsxs("div",{className:"ml-12 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-500"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[k.subject.name," (",k.subject.code,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 text-gray-500"}),e.jsxs("p",{className:"text-sm text-gray-700",children:[k.section.name," -"," ",k.section.program.name]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S(k.semester)}`,children:[k.semester," ",k.academicYear]})})]})]}),e.jsx("button",{onClick:()=>d(`/teacher/mark-attendance?section=${k.section._id}&subject=${k.subject._id}`),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium transition-colors",children:"Mark Attendance"})]})},`${k._id}-${N}`)))})]})}),e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"My Assignments Overview"}),e.jsx("button",{onClick:()=>d("/teacher/my-classes"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All "})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.slice(0,6).map(k=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-500 transition-all hover:shadow-md",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsx(Ue,{className:"w-5 h-5 text-blue-600"})}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S(k.semester)}`,children:k.semester})]}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:k.subject.name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[k.subject.code,"  ",k.subject.creditHours," ","Credits"]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 text-gray-500"}),e.jsx("p",{className:"text-sm text-gray-700",children:k.section.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4 text-gray-500"}),e.jsx("p",{className:"text-sm text-gray-700",children:k.section.program.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wa,{className:"w-4 h-4 text-gray-500"}),e.jsxs("p",{className:"text-sm text-gray-700",children:[k.section.year," Year "," ",k.section.shift]})]})]}),e.jsx("button",{onClick:()=>d(`/teacher/mark-attendance?section=${k.section._id}&subject=${k.subject._id}`),className:"w-full px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 text-sm font-medium transition-colors",children:"Mark Attendance"})]},k._id))})]})})]})},pp=()=>{const{toasts:i,removeToast:o,error:m}=Be(),d=es(),[u,b]=h.useState([]),[v,_]=h.useState(!0),[f,R]=h.useState(1),[y,p]=h.useState(1),[S,E]=h.useState(0),[k,O]=h.useState({academicYear:"",semester:"",search:""}),w=12;h.useEffect(()=>{N()},[f,k.academicYear,k.semester]);const N=async()=>{try{_(!0);const A=await ct.getMyAssignments({page:f,limit:w,academicYear:k.academicYear||void 0,semester:k.semester||void 0});b(A.assignments),p(A.totalPages),E(A.total)}catch(A){m(A?.response?.data?.message||"Failed to load assignments")}finally{_(!1)}},$=(A,X)=>{O(g=>({...g,[A]:X})),R(1)},P=A=>{switch(A){case"Fall":return"bg-orange-100 text-orange-800";case"Spring":return"bg-green-100 text-green-800";case"Summer":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},ae=A=>!A||A.length===0?"No schedule":[...new Set(A.map(g=>g.day))].join(", "),te=u.filter(A=>{if(!k.search)return!0;const X=k.search.toLowerCase();return A.subject.name.toLowerCase().includes(X)||A.subject.code.toLowerCase().includes(X)||A.section.name.toLowerCase().includes(X)||A.section.program.name.toLowerCase().includes(X)});return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx(ot,{toasts:i,onRemove:o}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Classes "}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View all your teaching assignments"})]}),e.jsxs("div",{className:"bg-white px-4 py-2 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Assignments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Sa,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:k.search,onChange:A=>$("search",A.target.value),placeholder:"Search by subject or section...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year"}),e.jsxs("select",{value:k.academicYear,onChange:A=>$("academicYear",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Years"}),e.jsx("option",{value:"2024-2025",children:"2024-2025"}),e.jsx("option",{value:"2025-2026",children:"2025-2026"}),e.jsx("option",{value:"2026-2027",children:"2026-2027"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Semester"}),e.jsxs("select",{value:k.semester,onChange:A=>$("semester",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Semesters"}),e.jsx("option",{value:"Fall",children:"Fall"}),e.jsx("option",{value:"Spring",children:"Spring"}),e.jsx("option",{value:"Summer",children:"Summer"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{O({academicYear:"",semester:"",search:""}),R(1)},className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium transition-colors",children:"Clear Filters"})})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto",children:v?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading assignments..."})]})}):te.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(Ue,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No assignments found"}),e.jsx("p",{className:"text-gray-600",children:k.search||k.academicYear||k.semester?"Try adjusting your filters":"You don't have any teaching assignments yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:te.map(A=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:border-blue-500 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(Ue,{className:"w-6 h-6 text-blue-600"})}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(A.semester)}`,children:A.semester})]}),e.jsx("h3",{className:"font-bold text-gray-900 text-lg mb-1",children:A.subject.name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[A.subject.code,"  ",A.subject.creditHours," ","Credits"]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 text-gray-500"}),e.jsx("p",{className:"text-sm text-gray-700",children:e.jsx("span",{className:"font-medium",children:A.section.name})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4 text-gray-500"}),e.jsx("p",{className:"text-sm text-gray-700",children:A.section.program.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ps,{className:"w-4 h-4 text-gray-500"}),e.jsxs("p",{className:"text-sm text-gray-700",children:[A.section.year," Year "," ",A.section.shift]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"w-4 h-4 text-gray-500"}),e.jsx("p",{className:"text-sm text-gray-700",children:ae(A.schedule)})]})]}),A.schedule&&A.schedule.length>0&&e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Class Schedule:"}),e.jsxs("div",{className:"space-y-1",children:[A.schedule.slice(0,3).map((X,g)=>e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:X.day}),e.jsxs("span",{children:[X.startTime," - ",X.endTime," (P",X.period,")"]})]},g)),A.schedule.length>3&&e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+",A.schedule.length-3," more"]})]})]}),e.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:["Academic Year: ",A.academicYear]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(`/teacher/mark-attendance?section=${A.section._id}&subject=${A.subject._id}`),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium transition-colors",children:"Mark Attendance"}),e.jsx("button",{onClick:()=>d(`/teacher/statistics?section=${A.section._id}&subject=${A.subject._id}`),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-medium transition-colors",children:""})]})]},A._id))}),y>1&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(f-1)*w+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(f*w,S)})," ","of ",e.jsx("span",{className:"font-medium",children:S})," assignments"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>R(A=>Math.max(1,A-1)),disabled:f===1,className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Kr,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:y},(A,X)=>X+1).filter(A=>A===1||A===y||A>=f-1&&A<=f+1).map((A,X,g)=>e.jsxs(mn.Fragment,{children:[X>0&&g[X-1]!==A-1&&e.jsx("span",{className:"px-2 text-gray-500",children:"..."}),e.jsx("button",{onClick:()=>R(A),className:`px-4 py-2 rounded-lg font-medium transition-colors ${f===A?"bg-blue-600 text-white":"border border-gray-300 hover:bg-gray-50"}`,children:A})]},A))}),e.jsx("button",{onClick:()=>R(A=>Math.min(y,A+1)),disabled:f===y,className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Fr,{className:"w-5 h-5"})})]})]})})]})})]})},bp=()=>{const{success:i,error:o,toasts:m,removeToast:d}=Be(),u=es(),[b]=$x(),[v,_]=h.useState([]),[f,R]=h.useState([]),[y,p]=h.useState(b.get("section")||""),[S,E]=h.useState(b.get("subject")||""),[k,O]=h.useState(new Date().toISOString().split("T")[0]),[w,N]=h.useState(""),[$,P]=h.useState([]),[ae,te]=h.useState(""),[A,X]=h.useState(!1),[g,M]=h.useState(!1),[T,V]=h.useState(!1),[W,se]=h.useState(!1);h.useEffect(()=>{le()},[]);const le=async()=>{try{const[I,Q]=await Promise.all([ct.getMySections(),ct.getMySubjects()]);_(I.sections),R(Q.subjects)}catch{o("Failed to load initial data")}},ne=async()=>{if(!y||!S||!k){o("Please select section, subject, and date");return}X(!0);try{const I=await ct.generateAttendanceSheet(y,S,k),Q=I.students.map(he=>({...he,status:"Present",remarks:""}));P(Q),M(!0),se(I.alreadyMarked),I.alreadyMarked?o(" Attendance already marked for this date and period!"):i("Attendance sheet generated successfully!")}catch(I){o(I?.response?.data?.message||"Failed to generate attendance sheet")}finally{X(!1)}},D=(I,Q)=>{P(he=>he.map(Ne=>Ne._id===I?{...Ne,status:Q}:Ne))},G=(I,Q)=>{P(he=>he.map(Ne=>Ne._id===I?{...Ne,remarks:Q}:Ne))},z=I=>{P(Q=>Q.map(he=>({...he,status:I}))),i(`Marked all students as ${I}`)},B=async()=>{if(!w){o("Please enter the period number");return}V(!0);try{const I={sectionId:y,subjectId:S,date:k,period:w,attendanceRecords:$.map(Q=>({studentId:Q._id,status:Q.status,remarks:Q.remarks||void 0}))};await ct.markAttendance(I),i(" Attendance marked successfully!"),setTimeout(()=>{u("/teacher/attendance-records")},2e3)}catch(I){o(I?.response?.data?.message||"Failed to mark attendance")}finally{V(!1)}},U=I=>{switch(I){case"Present":return"bg-green-100 text-green-800 border-green-300";case"Absent":return"bg-red-100 text-red-800 border-red-300";case"Late":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"Leave":return"bg-blue-100 text-blue-800 border-blue-300";case"Excused":return"bg-purple-100 text-purple-800 border-purple-300"}},ie=I=>{switch(I){case"Present":return e.jsx(Ad,{className:"w-4 h-4"});case"Absent":return e.jsx(rt,{className:"w-4 h-4"});case"Late":return e.jsx(Ps,{className:"w-4 h-4"});case"Leave":return e.jsx(Ss,{className:"w-4 h-4"});case"Excused":return e.jsx(Ss,{className:"w-4 h-4"})}},me=$.filter(I=>I.name.toLowerCase().includes(ae.toLowerCase())||I.rollNumber.toLowerCase().includes(ae.toLowerCase())),xe={Present:$.filter(I=>I.status==="Present").length,Absent:$.filter(I=>I.status==="Absent").length,Late:$.filter(I=>I.status==="Late").length,Leave:$.filter(I=>I.status==="Leave").length,Excused:$.filter(I=>I.status==="Excused").length};return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx(ot,{toasts:m,onRemove:d}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("button",{onClick:()=>u("/teacher/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(fn,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mark Attendance "}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Take attendance for your assigned classes"})]})]})}),!g&&e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Class Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Section ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:y,onChange:I=>p(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Section"}),v.map(I=>e.jsxs("option",{value:I._id,children:[I.name," - ",I.program.name," (",I.year," ","Year)"]},I._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:S,onChange:I=>E(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Subject"}),f.map(I=>e.jsxs("option",{value:I._id,children:[I.name," (",I.code,")"]},I._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:k,onChange:I=>O(I.target.value),max:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:ne,disabled:A||!y||!S||!k,className:"w-full px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors flex items-center justify-center gap-2",children:A?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"w-4 h-4"}),"Generate Sheet"]})})})]})]})}),g&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Period ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:w,onChange:I=>N(I.target.value),placeholder:"e.g., 1, 2, 3...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quick Actions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z("Present"),className:"flex-1 px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 font-medium transition-colors",children:"Mark All Present"}),e.jsx("button",{onClick:()=>z("Absent"),className:"flex-1 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 font-medium transition-colors",children:"Mark All Absent"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(xe).map(([I,Q])=>e.jsx("div",{className:`rounded-lg p-4 border-2 ${U(I)}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:I}),e.jsx("p",{className:"text-2xl font-bold",children:Q})]}),ie(I)]})},I))})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:ae,onChange:I=>te(I.target.value),placeholder:"Search by name or roll number...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"font-semibold text-gray-900",children:["Students (",me.length,")"]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:me.map(I=>e.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${I.status!=="Present"?"bg-red-50":""}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:I.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Roll: ",I.rollNumber]})]}),e.jsx("div",{className:"flex gap-2",children:["Present","Absent","Late","Leave","Excused"].map(Q=>e.jsx("button",{onClick:()=>D(I._id,Q),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${I.status===Q?U(Q)+" border-2":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:Q,children:Q.charAt(0)},Q))}),e.jsx("div",{className:"w-64",children:e.jsx("input",{type:"text",value:I.remarks,onChange:Q=>G(I._id,Q.target.value),placeholder:"Remarks (optional)",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})]})},I._id))})]})}),e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("button",{onClick:B,disabled:T||!w||W,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors flex items-center justify-center gap-2",children:T?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Wg,{className:"w-5 h-5"}),"Submit Attendance"]})}),W&&e.jsx("p",{className:"mt-3 text-center text-sm text-red-600",children:" Attendance already marked for this date and period. This will overwrite existing data."})]})})]}),e.jsx("div",{className:"max-w-7xl mx-auto mt-6",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:" Instructions:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[e.jsx("li",{children:" Select your section, subject, and date to generate attendance sheet"}),e.jsx("li",{children:' All students are marked "Present" by default'}),e.jsx("li",{children:" Click status buttons: P (Present), A (Absent), L (Late), V (Leave), E (Excused)"}),e.jsx("li",{children:' Use "Mark All Present" or "Mark All Absent" for quick actions'}),e.jsx("li",{children:" Add remarks for specific students if needed"}),e.jsx("li",{children:" Enter the period number before submitting"})]})]})})]})},yp=()=>{const{toasts:i,removeToast:o,error:m}=Be(),[d,u]=h.useState([]),[b,v]=h.useState([]),[_,f]=h.useState([]),[R,y]=h.useState(!0),[p,S]=h.useState(1),[E,k]=h.useState(1),[O,w]=h.useState(0),[N,$]=h.useState({sectionId:"",subjectId:"",date:"",startDate:"",endDate:"",period:"",search:""}),P=20;h.useEffect(()=>{ae()},[]),h.useEffect(()=>{te()},[p,N.sectionId,N.subjectId,N.date,N.startDate,N.endDate,N.period]);const ae=async()=>{try{const[T,V]=await Promise.all([ct.getMySections(),ct.getMySubjects()]);v(T.sections),f(V.subjects)}catch{m("Failed to load initial data")}},te=async()=>{try{y(!0);const T=await ct.getAttendance({page:p,limit:P,sectionId:N.sectionId||void 0,subjectId:N.subjectId||void 0,date:N.date||void 0,startDate:N.startDate||void 0,endDate:N.endDate||void 0,period:N.period||void 0});u(T.attendance),k(T.totalPages),w(T.total)}catch(T){m(T?.response?.data?.message||"Failed to load attendance records")}finally{y(!1)}},A=(T,V)=>{$(W=>({...W,[T]:V})),S(1)},X=()=>{$({sectionId:"",subjectId:"",date:"",startDate:"",endDate:"",period:"",search:""}),S(1)},g=T=>{switch(T){case"Present":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded-full",children:[e.jsx(Ad,{className:"w-3 h-3"}),"Present"]});case"Absent":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded-full",children:[e.jsx(rt,{className:"w-3 h-3"}),"Absent"]});case"Late":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-semibold rounded-full",children:[e.jsx(Ps,{className:"w-3 h-3"}),"Late"]});case"Leave":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs font-semibold rounded-full",children:[e.jsx(Ss,{className:"w-3 h-3"}),"Leave"]});case"Excused":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-800 text-xs font-semibold rounded-full",children:[e.jsx(Ss,{className:"w-3 h-3"}),"Excused"]});default:return null}},M=d.filter(T=>{if(!N.search)return!0;const V=N.search.toLowerCase();return T.student.name.toLowerCase().includes(V)||T.student.rollNumber.toLowerCase().includes(V)});return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx(ot,{toasts:i,onRemove:o}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Attendance Records "}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View attendance history for your classes"})]}),e.jsxs("div",{className:"bg-white px-4 py-2 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Records"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:O})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Sa,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),e.jsxs("select",{value:N.sectionId,onChange:T=>A("sectionId",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Sections"}),b.map(T=>e.jsxs("option",{value:T._id,children:[T.name," - ",T.program.name]},T._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),e.jsxs("select",{value:N.subjectId,onChange:T=>A("subjectId",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Subjects"}),_.map(T=>e.jsxs("option",{value:T._id,children:[T.name," (",T.code,")"]},T._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specific Date"}),e.jsx("input",{type:"date",value:N.date,onChange:T=>A("date",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),e.jsx("input",{type:"text",value:N.period,onChange:T=>A("period",T.target.value),placeholder:"e.g., 1, 2, 3...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:N.startDate,onChange:T=>A("startDate",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:N.endDate,onChange:T=>A("endDate",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:X,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium transition-colors",children:"Clear Filters"})})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:N.search,onChange:T=>A("search",T.target.value),placeholder:"Search by student name or roll number...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto",children:R?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading records..."})]})}):M.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(ht,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No records found"}),e.jsx("p",{className:"text-gray-600",children:N.sectionId||N.subjectId||N.date||N.search?"Try adjusting your filters":"No attendance records available"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden mb-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Section"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(T=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.student.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Roll: ",T.student.rollNumber]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:T.section.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-900",children:T.subject.name}),e.jsx("div",{className:"text-xs text-gray-500",children:T.subject.code})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:new Date(T.date).toLocaleDateString()})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:T.period})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:g(T.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:T.remarks||"-"})})]},T._id))})]})})}),E>1&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(p-1)*P+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(p*P,O)})," ","of ",e.jsx("span",{className:"font-medium",children:O})," records"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>S(T=>Math.max(1,T-1)),disabled:p===1,className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Kr,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:E},(T,V)=>V+1).filter(T=>T===1||T===E||T>=p-1&&T<=p+1).map((T,V,W)=>e.jsxs(mn.Fragment,{children:[V>0&&W[V-1]!==T-1&&e.jsx("span",{className:"px-2 text-gray-500",children:"..."}),e.jsx("button",{onClick:()=>S(T),className:`px-4 py-2 rounded-lg font-medium transition-colors ${p===T?"bg-blue-600 text-white":"border border-gray-300 hover:bg-gray-50"}`,children:T})]},T))}),e.jsx("button",{onClick:()=>S(T=>Math.min(E,T+1)),disabled:p===E,className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Fr,{className:"w-5 h-5"})})]})]})})]})})]})},jp=({stats:i,onClose:o})=>{const m=[{name:"Present",value:i.stats.present,color:"#10b981"},{name:"Absent",value:i.stats.absent,color:"#ef4444"},{name:"Late",value:i.stats.late,color:"#f59e0b"},{name:"Leave",value:i.stats.leave,color:"#3b82f6"},{name:"Excused",value:i.stats.excused,color:"#8b5cf6"}],d=u=>u>=90?"text-green-600 bg-green-100":u>=75?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100";return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i.student.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Roll: ",i.student.rollNumber,"  ",i.student.program," "," ",i.student.section]})]}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Classes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i.stats.totalClasses})]}),e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-green-600 mb-1",children:"Present"}),e.jsx("p",{className:"text-3xl font-bold text-green-700",children:i.stats.present})]}),e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-red-600 mb-1",children:"Absent"}),e.jsx("p",{className:"text-3xl font-bold text-red-700",children:i.stats.absent})]}),e.jsxs("div",{className:`rounded-lg p-4 border-2 ${d(i.stats.attendancePercentage)}`,children:[e.jsx("p",{className:"text-sm mb-1",children:"Attendance %"}),e.jsxs("p",{className:"text-3xl font-bold",children:[i.stats.attendancePercentage.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Attendance Distribution"}),e.jsx(Vr,{width:"100%",height:300,children:e.jsxs(wd,{children:[e.jsx(Sd,{data:m,cx:"50%",cy:"50%",labelLine:!1,label:({name:u,value:b})=>`${u}: ${b}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:m.map((u,b)=>e.jsx(Cd,{fill:u.color},`cell-${b}`))}),e.jsx(Qr,{})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Detailed Breakdown"}),e.jsx("div",{className:"space-y-3",children:m.map(u=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:u.color}}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:u.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:u.value}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",(u.value/i.stats.totalClasses*100).toFixed(1),"%)"]})]})]},u.name))})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Statistics Period:"," ",new Date(i.dateRange.startDate).toLocaleDateString()," to"," ",new Date(i.dateRange.endDate).toLocaleDateString()]})}),e.jsx("button",{onClick:o,className:"w-full mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Close"})]})]})})},vp=()=>{const{success:i,error:o,toasts:m,removeToast:d}=Be(),[u]=$x(),[b,v]=h.useState("section"),[_,f]=h.useState([]),[R,y]=h.useState([]),[p,S]=h.useState([]),[E,k]=h.useState(""),[O,w]=h.useState(u.get("section")||""),[N,$]=h.useState(u.get("subject")||""),[P,ae]=h.useState(new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0]),[te,A]=h.useState(new Date().toISOString().split("T")[0]),[X,g]=h.useState(null),[M,T]=h.useState(null),[V,W]=h.useState(!1),[se,le]=h.useState(!1);h.useEffect(()=>{ne()},[]),h.useEffect(()=>{O&&D()},[O]);const ne=async()=>{try{const[U,ie]=await Promise.all([ct.getMySections(),ct.getMySubjects()]);f(U.sections),y(ie.subjects)}catch{o("Failed to load data")}},D=async()=>{try{const U=await ct.getSectionStudents(O,{page:1,limit:500});S(U.students)}catch{}},G=async()=>{if(!E){o("Please select a student");return}W(!0);try{const U=await ct.getStudentStats(E,{subjectId:N||void 0,startDate:P,endDate:te});g(U),le(!0),i("Statistics generated successfully!")}catch(U){o(U?.response?.data?.message||"Failed to generate statistics")}finally{W(!1)}},z=async()=>{if(!O||!N){o("Please select section and subject");return}W(!0);try{const U=await ct.getSectionStats(O,N,P,te);T(U),le(!0),i("Statistics generated successfully!")}catch(U){o(U?.response?.data?.message||"Failed to generate statistics")}finally{W(!1)}},B=U=>U>=90?"bg-green-100 text-green-800":U>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx(ot,{toasts:m,onRemove:d}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Attendance Statistics "}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View detailed attendance reports and analytics"})]})}),e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{v("section"),le(!1)},className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all ${b==="section"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Section Statistics"}),e.jsx("button",{onClick:()=>{v("student"),le(!1)},className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all ${b==="student"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Student Statistics"})]})})}),!se&&e.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Filters"}),b==="section"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Section ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:O,onChange:U=>w(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Section"}),_.map(U=>e.jsxs("option",{value:U._id,children:[U.name," - ",U.year," (",U.shift,")"]},U._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:N,onChange:U=>$(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Subject"}),R.map(U=>e.jsxs("option",{value:U._id,children:[U.name," (",U.code,")"]},U._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:P,onChange:U=>ae(U.target.value),max:te,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:te,onChange:U=>A(U.target.value),min:P,max:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Section ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:O,onChange:U=>w(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Section"}),_.map(U=>e.jsxs("option",{value:U._id,children:[U.name," - ",U.program.name]},U._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Student ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:E,onChange:U=>k(U.target.value),disabled:!O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Student"}),p.map(U=>e.jsxs("option",{value:U._id,children:[U.name," (",U.rollNumber,")"]},U._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject (Optional)"}),e.jsxs("select",{value:N,onChange:U=>$(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Subjects"}),R.map(U=>e.jsxs("option",{value:U._id,children:[U.name," (",U.code,")"]},U._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"date",value:P,onChange:U=>ae(U.target.value),className:"flex-1 px-2 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"date",value:te,onChange:U=>A(U.target.value),className:"flex-1 px-2 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsx("button",{onClick:b==="student"?G:z,disabled:V,className:"w-full mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:V?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Generating Statistics..."]}):"Generate Statistics"})]})}),se&&b==="section"&&M&&e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx("button",{onClick:()=>le(!1),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium",children:" Back to Filters"})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:[M.section.name," - ",M.subject.name]}),e.jsxs("p",{className:"text-gray-600",children:[M.section.year,"  ",M.section.shift," "," ",new Date(M.dateRange.startDate).toLocaleDateString()," ","to ",new Date(M.dateRange.endDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Students"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:M.overallStats.totalStudents})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Classes"}),e.jsx("p",{className:"text-4xl font-bold text-gray-900",children:M.overallStats.totalClasses})]}),e.jsxs("div",{className:`rounded-lg shadow-sm p-6 ${B(M.overallStats.averageAttendance)}`,children:[e.jsx("p",{className:"text-sm mb-1",children:"Average Attendance"}),e.jsxs("p",{className:"text-4xl font-bold",children:[M.overallStats.averageAttendance.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"Student-wise Attendance"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Present"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Absent"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Late"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leave"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Excused"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"%"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.studentStats.map((U,ie)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.student.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Roll: ",U.student.rollNumber]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900",children:U.totalClasses}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-green-600 font-medium",children:U.present}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-red-600 font-medium",children:U.absent}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-yellow-600",children:U.late}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-blue-600",children:U.leave}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-purple-600",children:U.excused}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${B(U.attendancePercentage)}`,children:[U.attendancePercentage.toFixed(1),"%"]})})]},ie))})]})})]})]}),se&&b==="student"&&X&&e.jsx(jp,{stats:X,onClose:()=>le(!1)})]})};class Np{async getMyProfile(){return(await ee.get("/student/profile")).data.data}async getMySectionDetails(){return(await ee.get("/student/section")).data.data}async getMyAttendance(o={}){const m=new URLSearchParams;return o.subject&&m.append("subject",o.subject),o.startDate&&m.append("startDate",o.startDate),o.endDate&&m.append("endDate",o.endDate),o.page&&m.append("page",o.page.toString()),o.limit&&m.append("limit",o.limit.toString()),(await ee.get(`/student/attendance?${m.toString()}`)).data}async getMyAttendanceStats(o){const m=o?`?subject=${o}`:"";return(await ee.get(`/student/attendance/statistics${m}`)).data.data}async getMyAttendanceSummary(){return(await ee.get("/student/attendance/summary")).data.data}async getMyClassmates(){return(await ee.get("/student/classmates")).data.data}formatDate(o){return new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}formatDateTime(o){return new Date(o).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}getStatusColor(o){return{Present:"text-green-600 bg-green-50 border-green-200",Absent:"text-red-600 bg-red-50 border-red-200",Late:"text-yellow-600 bg-yellow-50 border-yellow-200",Leave:"text-blue-600 bg-blue-50 border-blue-200",Excused:"text-purple-600 bg-purple-50 border-purple-200",active:"text-green-600 bg-green-50 border-green-200",inactive:"text-gray-600 bg-gray-50 border-gray-200",graduated:"text-blue-600 bg-blue-50 border-blue-200",expelled:"text-red-600 bg-red-50 border-red-200"}[o]||"text-gray-600 bg-gray-50 border-gray-200"}getPercentageColor(o){return o>=85?"text-green-600":o>=75?"text-orange-600":"text-red-600"}getStatusBadge(o){return o>=85?{text:"Excellent",color:"bg-green-100 text-green-800 border-green-200"}:o>=75?{text:"Good",color:"bg-orange-100 text-orange-800 border-orange-200"}:{text:"Low",color:"bg-red-100 text-red-800 border-red-200"}}}const dt=new Np,wp=()=>{const i=es(),{showToast:o}=Be(),[m,d]=h.useState(!0),[u,b]=h.useState(null),[v,_]=h.useState(null);h.useEffect(()=>{f()},[]);const f=async()=>{try{d(!0);const[p,S]=await Promise.all([dt.getMyProfile(),dt.getMyAttendanceSummary()]);b(p),_(S)}catch(p){o(p.response?.data?.message||"Failed to load dashboard data","error")}finally{d(!1)}};if(m)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!u||!v)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ws,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Failed to load dashboard data"})]})});const R=v.overallStats.attendancePercentage,y=dt.getStatusBadge(R);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome, ",u.firstName," ",u.lastName]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track your attendance and academic progress"})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(Wx,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold",children:[u.firstName," ",u.lastName]}),e.jsxs("p",{className:"text-blue-100",children:["Roll No: ",u.rollNumber]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5 text-blue-200"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-200",children:"Program"}),e.jsx("p",{className:"font-semibold",children:u.section.program.name})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"w-5 h-5 text-blue-200"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-200",children:"College"}),e.jsx("p",{className:"font-semibold",children:u.section.college.name})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5 text-blue-200"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-200",children:"Section"}),e.jsx("p",{className:"font-semibold",children:u.section.name})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${y.color}`,children:y.text}),e.jsxs("p",{className:"text-3xl font-bold mt-2",children:[R.toFixed(1),"%"]}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Overall Attendance"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Ur,{title:"Total Classes",value:v.overallStats.totalClasses.toString(),subtitle:`${v.overallStats.present} Present`,icon:e.jsx(ht,{className:"w-6 h-6"}),color:"bg-blue-500",trend:`${R.toFixed(1)}%`}),e.jsx(Ur,{title:"Subjects Enrolled",value:v.subjectWiseStats.length.toString(),subtitle:`${u.section.semester} Semester`,icon:e.jsx(Ue,{className:"w-6 h-6"}),color:"bg-green-500"}),e.jsx(Ur,{title:"Present Days",value:v.overallStats.present.toString(),subtitle:`${v.overallStats.late} Late Arrivals`,icon:e.jsx(Pe,{className:"w-6 h-6"}),color:"bg-emerald-500"}),e.jsx(Ur,{title:"Absent Days",value:v.overallStats.absent.toString(),subtitle:`${v.overallStats.excused} Excused`,icon:e.jsx(Ps,{className:"w-6 h-6"}),color:"bg-red-500"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Subject-wise Attendance"}),e.jsxs("button",{onClick:()=>i("/student/attendance"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:["View Details",e.jsx(ef,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.subjectWiseStats.map(p=>{const S=p.stats.attendancePercentage,E=dt.getPercentageColor(S);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:p.subject.name}),e.jsx("p",{className:"text-sm text-gray-600",children:p.subject.code})]}),e.jsxs("div",{className:`text-2xl font-bold ${E}`,children:[S.toFixed(0),"%"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Present:"}),e.jsx("span",{className:"font-medium text-green-600",children:p.stats.present})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Absent:"}),e.jsx("span",{className:"font-medium text-red-600",children:p.stats.absent})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsx("span",{className:"font-medium text-gray-900",children:p.stats.totalClasses})]})]}),e.jsx("div",{className:"mt-3 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${S>=85?"bg-green-500":S>=75?"bg-orange-500":"bg-red-500"}`,style:{width:`${Math.min(S,100)}%`}})})]},p.subject._id)})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Br,{icon:e.jsx(Ue,{className:"w-5 h-5"}),label:"My Section",onClick:()=>i("/student/section")}),e.jsx(Br,{icon:e.jsx(ht,{className:"w-5 h-5"}),label:"Attendance Records",onClick:()=>i("/student/attendance")}),e.jsx(Br,{icon:e.jsx(wa,{className:"w-5 h-5"}),label:"Statistics",onClick:()=>i("/student/statistics")}),e.jsx(Br,{icon:e.jsx(De,{className:"w-5 h-5"}),label:"Classmates",onClick:()=>i("/student/classmates")})]})]})]})},Ur=({title:i,value:o,subtitle:m,icon:d,color:u,trend:b})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`${u} p-3 rounded-lg text-white`,children:d}),b&&e.jsx("span",{className:"text-sm font-semibold text-gray-900 bg-gray-100 px-2 py-1 rounded",children:b})]}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:i}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:o}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m})]}),Br=({icon:i,label:o,onClick:m})=>e.jsxs("button",{onClick:m,className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-gray-300 transition-all",children:[e.jsx("div",{className:"text-blue-600",children:i}),e.jsx("span",{className:"font-medium text-gray-900",children:o})]}),Sp=()=>{const i=es(),{showToast:o}=Be(),[m,d]=h.useState(!0),[u,b]=h.useState(null);h.useEffect(()=>{v()},[]);const v=async()=>{try{d(!0);const _=await dt.getMySectionDetails();b(_)}catch(_){o(_.response?.data?.message||"Failed to load section details","error")}finally{d(!1)}};return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):u?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>i("/student/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(fn,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Section Details"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View your section and subjects information"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Section Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(qr,{icon:e.jsx(De,{className:"w-5 h-5 text-blue-600"}),label:"Section",value:u.name}),e.jsx(qr,{icon:e.jsx(ht,{className:"w-5 h-5 text-green-600"}),label:"Academic Year",value:u.academicYear}),e.jsx(qr,{icon:e.jsx(Fe,{className:"w-5 h-5 text-purple-600"}),label:"Semester",value:u.semester}),e.jsx(qr,{icon:e.jsx(De,{className:"w-5 h-5 text-orange-600"}),label:"Students",value:`${u.enrolledStudents} / ${u.capacity}`})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Program Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Na,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Program Name"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.program.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Program Code"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.program.code})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(ht,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Duration"})]}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[u.program.duration," Years (",u.program.level,")"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"College Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"College Name"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.college.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Na,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"College Code"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.college.code})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"City"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.college.city})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Subjects (",u.subjects.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:u.subjects.map(_=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:_.name}),e.jsx("p",{className:"text-sm text-gray-600",children:_.code})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Credit Hours"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:_.creditHours})]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${_.type==="Theory"?"bg-blue-100 text-blue-700":_.type==="Lab"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:_.type})}),e.jsxs("div",{className:"border-t border-gray-200 pt-3 mt-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-600 mb-2",children:["Teachers (",_.teachers.length,")"]}),e.jsx("div",{className:"space-y-2",children:_.teachers.map(f=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-100",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[f.firstName," ",f.lastName]}),f.specialization&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[e.jsx(Na,{className:"w-3 h-3 inline mr-1"}),f.specialization]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-600",children:[f.email&&e.jsxs("a",{href:`mailto:${f.email}`,className:"flex items-center gap-1 hover:text-blue-600",children:[e.jsx(Wt,{className:"w-3 h-3"}),f.email]}),f.phone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(hn,{className:"w-3 h-3"}),f.phone]})]})]},f._id))})]})]},_._id))})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ws,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Failed to load section details"})]})})},qr=({icon:i,label:o,value:m})=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:i}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:o}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:m})]})]}),Cp=()=>{const i=es(),{showToast:o}=Be(),[m,d]=h.useState(!0),[u,b]=h.useState(null),[v,_]=h.useState(null),[f,R]=h.useState({page:1,limit:20});h.useEffect(()=>{y()},[]),h.useEffect(()=>{p()},[f]);const y=async()=>{try{const N=await dt.getMySectionDetails();_(N)}catch(N){o(N.response?.data?.message||"Failed to load section details","error")}},p=async()=>{try{d(!0);const N=await dt.getMyAttendance(f);b(N)}catch(N){o(N.response?.data?.message||"Failed to load attendance records","error")}finally{d(!1)}},S=(N,$)=>{R(P=>({...P,[N]:$,page:1}))},E=N=>{R($=>({...$,page:N}))},k=()=>{R({page:1,limit:20})},O=f.subject||f.startDate||f.endDate,w=N=>{switch(N){case"Present":return e.jsx(Pe,{className:"w-4 h-4"});case"Absent":return e.jsx(rt,{className:"w-4 h-4"});case"Late":return e.jsx(Ps,{className:"w-4 h-4"});case"Leave":case"Excused":return e.jsx(Ss,{className:"w-4 h-4"});default:return e.jsx(Ws,{className:"w-4 h-4"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>i("/student/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(fn,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Attendance Records"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View your detailed attendance history"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Sa,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),O&&e.jsxs("button",{onClick:k,className:"ml-auto text-sm text-red-600 hover:text-red-700 font-medium flex items-center gap-1",children:[e.jsx(gn,{className:"w-4 h-4"}),"Clear Filters"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),e.jsxs("select",{value:f.subject||"",onChange:N=>S("subject",N.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Subjects"}),v?.subjects.map(N=>e.jsxs("option",{value:N._id,children:[N.name," (",N.code,")"]},N._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:f.startDate||"",onChange:N=>S("startDate",N.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:f.endDate||"",onChange:N=>S("endDate",N.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Per Page"}),e.jsxs("select",{value:f.limit||20,onChange:N=>S("limit",parseInt(N.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Records ",u&&`(${u.pagination.total})`]})})}),m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):u&&u.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marked By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.data.map(N=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:dt.formatDate(N.date)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:["Period ",N.period]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.subject.name}),e.jsx("div",{className:"text-sm text-gray-500",children:N.subject.code})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold border ${dt.getStatusColor(N.status)}`,children:[w(N.status),N.status]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[N.markedBy.firstName," ",N.markedBy.lastName]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:N.remarks||"-"})})]},N._id))})]})}),u.pagination.pages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(u.pagination.page-1)*u.pagination.limit+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(u.pagination.page*u.pagination.limit,u.pagination.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:u.pagination.total})," ","results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>E(u.pagination.page-1),disabled:u.pagination.page===1,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Kr,{className:"w-5 h-5"})}),e.jsxs("span",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:["Page ",u.pagination.page," of ",u.pagination.pages]}),e.jsx("button",{onClick:()=>E(u.pagination.page+1),disabled:u.pagination.page===u.pagination.pages,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Fr,{className:"w-5 h-5"})})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(ht,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"No attendance records found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Try adjusting your filters"})]})]})]})},on={Present:"#10b981",Absent:"#ef4444",Late:"#f59e0b",Leave:"#3b82f6",Excused:"#8b5cf6"},Ap=()=>{const i=es(),{showToast:o}=Be(),[m,d]=h.useState(!0),[u,b]=h.useState(null),[v,_]=h.useState(null),[f,R]=h.useState("");h.useEffect(()=>{y()},[]);const y=async()=>{try{d(!0);const[w,N]=await Promise.all([dt.getMyAttendanceSummary(),dt.getMySectionDetails()]);b(w),_(N)}catch(w){o(w.response?.data?.message||"Failed to load statistics","error")}finally{d(!1)}};if(m)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!u||!v)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ws,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Failed to load statistics"})]})});const p=u.overallStats,S=f&&u.subjectWiseStats.find(w=>w.subject._id===f)?.stats||p,E=[{name:"Present",value:S.present,color:on.Present},{name:"Absent",value:S.absent,color:on.Absent},{name:"Late",value:S.late,color:on.Late},{name:"Leave",value:S.leave,color:on.Leave},{name:"Excused",value:S.excused,color:on.Excused}].filter(w=>w.value>0),k=dt.getPercentageColor(S.attendancePercentage),O=dt.getStatusBadge(S.attendancePercentage);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>i("/student/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(fn,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Attendance Statistics"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Detailed analysis of your attendance performance"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"View Statistics For"}),e.jsxs("select",{value:f,onChange:w=>R(w.target.value),className:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Overall (All Subjects)"}),u.subjectWiseStats.map(w=>e.jsxs("option",{value:w.subject._id,children:[w.subject.name," (",w.subject.code,")"]},w.subject._id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Yr,{title:"Total Classes",value:S.totalClasses.toString(),icon:e.jsx(ht,{className:"w-6 h-6"}),color:"bg-blue-500"}),e.jsx(Yr,{title:"Attendance Rate",value:`${S.attendancePercentage.toFixed(1)}%`,icon:e.jsx(wa,{className:"w-6 h-6"}),color:S.attendancePercentage>=85?"bg-green-500":S.attendancePercentage>=75?"bg-orange-500":"bg-red-500",badge:O.text}),e.jsx(Yr,{title:"Present",value:S.present.toString(),icon:e.jsx(Pe,{className:"w-6 h-6"}),color:"bg-green-500"}),e.jsx(Yr,{title:"Absent",value:S.absent.toString(),icon:e.jsx(rt,{className:"w-6 h-6"}),color:"bg-red-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status Distribution"}),E.length>0?e.jsx(Vr,{width:"100%",height:300,children:e.jsxs(wd,{children:[e.jsx(Sd,{data:E,cx:"50%",cy:"50%",labelLine:!1,label:({name:w,percent:N})=>`${w}: ${N?(N*100).toFixed(1):"0.0"}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:E.map((w,N)=>e.jsx(Cd,{fill:w.color},`cell-${N}`))}),e.jsx(Qr,{}),e.jsx(Ix,{})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px]",children:e.jsx("p",{className:"text-gray-500",children:"No data available"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detailed Breakdown"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(un,{icon:e.jsx(Pe,{className:"w-5 h-5 text-green-600"}),label:"Present",count:S.present,total:S.totalClasses,color:"bg-green-500"}),e.jsx(un,{icon:e.jsx(rt,{className:"w-5 h-5 text-red-600"}),label:"Absent",count:S.absent,total:S.totalClasses,color:"bg-red-500"}),e.jsx(un,{icon:e.jsx(Ps,{className:"w-5 h-5 text-yellow-600"}),label:"Late",count:S.late,total:S.totalClasses,color:"bg-yellow-500"}),e.jsx(un,{icon:e.jsx(Ss,{className:"w-5 h-5 text-blue-600"}),label:"Leave",count:S.leave,total:S.totalClasses,color:"bg-blue-500"}),e.jsx(un,{icon:e.jsx(Ss,{className:"w-5 h-5 text-purple-600"}),label:"Excused",count:S.excused,total:S.totalClasses,color:"bg-purple-500"})]})]})]}),!f&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Subject-wise Comparison"}),e.jsx("div",{className:"space-y-4",children:u.subjectWiseStats.map(w=>{const N=w.stats.attendancePercentage,$=dt.getPercentageColor(N);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:w.subject.name}),e.jsx("p",{className:"text-sm text-gray-600",children:w.subject.code})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-2xl font-bold ${$}`,children:[N.toFixed(1),"%"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[w.stats.present,"/",w.stats.totalClasses]})]})]}),e.jsx("div",{className:"mt-3 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${N>=85?"bg-green-500":N>=75?"bg-orange-500":"bg-red-500"}`,style:{width:`${Math.min(N,100)}%`}})}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-3 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Present"}),e.jsx("p",{className:"font-semibold text-green-600",children:w.stats.present})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Absent"}),e.jsx("p",{className:"font-semibold text-red-600",children:w.stats.absent})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Late"}),e.jsx("p",{className:"font-semibold text-yellow-600",children:w.stats.late})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Leave"}),e.jsx("p",{className:"font-semibold text-blue-600",children:w.stats.leave})]})]})]},w.subject._id)})})]}),e.jsx("div",{className:`rounded-xl p-6 border-2 ${S.attendancePercentage>=85?"bg-green-50 border-green-200":S.attendancePercentage>=75?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${S.attendancePercentage>=85?"bg-green-100 text-green-600":S.attendancePercentage>=75?"bg-orange-100 text-orange-600":"bg-red-100 text-red-600"}`,children:e.jsx(wa,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:S.attendancePercentage>=85?"Excellent Performance! ":S.attendancePercentage>=75?"Good Performance! ":"Needs Improvement "}),e.jsx("p",{className:"text-gray-700",children:S.attendancePercentage>=85?"Keep up the great work! Your attendance is outstanding.":S.attendancePercentage>=75?"You're doing well, but there's room for improvement to reach excellent status.":"Your attendance is below the recommended threshold. Please try to attend more classes."}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:`font-semibold ${k}`,children:["Current: ",S.attendancePercentage.toFixed(1),"%"]}),S.attendancePercentage<85&&e.jsxs("div",{className:"text-gray-600",children:["Target: 85% (Need"," ",Math.ceil((.85*S.totalClasses-S.present)/.15)," ","more present days)"]})]})]})]})})]})},Yr=({title:i,value:o,icon:m,color:d,badge:u})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`${d} p-3 rounded-lg text-white`,children:m}),u&&e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:u})]}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:i}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:o})]}),un=({icon:i,label:o,count:m,total:d,color:u})=>{const b=d>0?(m/d*100).toFixed(1):"0.0";return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i,e.jsx("span",{className:"font-medium text-gray-900",children:o})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[m," / ",d]}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900 min-w-[50px] text-right",children:[b,"%"]}),e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`${u} h-2 rounded-full`,style:{width:`${b}%`}})})]})]})},Dp=()=>{const i=es(),{showToast:o}=Be(),[m,d]=h.useState(!0),[u,b]=h.useState([]),[v,_]=h.useState("");h.useEffect(()=>{f()},[]);const f=async()=>{try{d(!0);const y=await dt.getMyClassmates();b(y)}catch(y){o(y.response?.data?.message||"Failed to load classmates","error")}finally{d(!1)}},R=u.filter(y=>y.firstName.toLowerCase().includes(v.toLowerCase())||y.lastName.toLowerCase().includes(v.toLowerCase())||y.rollNumber.toLowerCase().includes(v.toLowerCase())||y.email.toLowerCase().includes(v.toLowerCase()));return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>i("/student/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(fn,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Classmates"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View students in your section"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white/20 p-4 rounded-lg",children:e.jsx(De,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Total Classmates"}),e.jsx("p",{className:"text-3xl font-bold",children:u.length})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by name, roll number, or email...",value:v,onChange:y=>_(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),R.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(y=>e.jsx(kp,{classmate:y},y._id))}):e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:e.jsx("div",{className:"flex flex-col items-center justify-center",children:v?e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"No classmates found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Try searching with different keywords"})]}):e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"No classmates available"})]})})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ws,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"About Classmates"}),e.jsx("p",{children:"This list shows all students enrolled in your section. You can search by name, roll number, or email to find specific classmates."})]})]})})]})},kp=({classmate:i})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full flex-shrink-0",children:e.jsx(Wx,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:[i.firstName," ",i.lastName]}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1 mt-1",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Roll No: ",i.rollNumber]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${dt.getStatusColor(i.status)}`,children:i.status.charAt(0).toUpperCase()+i.status.slice(1)})}),e.jsxs("div",{className:"space-y-2 border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Wt,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("a",{href:`mailto:${i.email}`,className:"text-blue-600 hover:text-blue-700 truncate",children:i.email})]}),i.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(hn,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("a",{href:`tel:${i.phone}`,className:"text-gray-600 hover:text-gray-900 truncate",children:i.phone})]}),!i.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(hn,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Phone not available"})]})]})]}),Mp=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"404"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Page not found"})]})}),Ep=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"403"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Unauthorized Access"})]})}),Tp=Mg([{path:"/",element:e.jsx(Gr,{to:"/login",replace:!0})},{path:"/login",element:e.jsx(ff,{children:e.jsx(Nf,{})})},{path:"/unauthorized",element:e.jsx(Ep,{})},{path:"/sysadmin",element:e.jsx(cn,{allowedRoles:["SysAdmin"],children:e.jsx(dn,{})}),children:[{path:"dashboard",element:e.jsx(Df,{})},{path:"regions",element:e.jsx(dl,{children:e.jsx(Mf,{})})},{path:"district-heads",element:e.jsx(dl,{children:e.jsx(Rf,{})})},{path:"colleges",element:e.jsx(dl,{children:e.jsx(Of,{})})},{path:"teachers",element:e.jsx(dl,{children:e.jsx(Uf,{})})},{path:"students",element:e.jsx(dl,{children:e.jsx(Bf,{})})},{path:"subjects",element:e.jsx(dl,{children:e.jsx(qf,{})})},{path:"reports",element:e.jsx("div",{children:"Reports Page"})},{path:"settings",element:e.jsx("div",{children:"Settings Page"})}]},{path:"/districthead",element:e.jsx(cn,{allowedRoles:["DistrictHead"],children:e.jsx(dn,{})}),children:[{path:"dashboard",element:e.jsx(Yf,{})},{path:"colleges",element:e.jsx("div",{children:"Colleges Page"})},{path:"teachers",element:e.jsx("div",{children:"Teachers Page"})},{path:"students",element:e.jsx("div",{children:"Students Page"})},{path:"subjects",element:e.jsx("div",{children:"Subjects Page"})},{path:"reports",element:e.jsx("div",{children:"Reports Page"})},{path:"settings",element:e.jsx("div",{children:"Settings Page"})}]},{path:"/collegeadmin",element:e.jsx(cn,{allowedRoles:["CollegeAdmin"],children:e.jsx(dn,{})}),children:[{path:"dashboard",element:e.jsx(Hf,{})},{path:"teachers",element:e.jsx(Qf,{})},{path:"students",element:e.jsx(ep,{})},{path:"subjects",element:e.jsx(ap,{})},{path:"sections",element:e.jsx(ip,{})},{path:"teacher-assignments",element:e.jsx(op,{})},{path:"mark-attendance",element:e.jsx(mp,{})},{path:"attendance-statistics",element:e.jsx(hp,{})},{path:"reports",element:e.jsx("div",{children:"Reports Page"})},{path:"settings",element:e.jsx("div",{children:"Settings Page"})}]},{path:"/teacher",element:e.jsx(cn,{allowedRoles:["Teacher"],children:e.jsx(dn,{})}),children:[{path:"dashboard",element:e.jsx(fp,{})},{path:"my-classes",element:e.jsx(pp,{})},{path:"mark-attendance",element:e.jsx(bp,{})},{path:"attendance-records",element:e.jsx(yp,{})},{path:"statistics",element:e.jsx(vp,{})},{path:"reports",element:e.jsx("div",{children:"Reports Page"})},{path:"settings",element:e.jsx("div",{children:"Settings Page"})}]},{path:"/student",element:e.jsx(cn,{allowedRoles:["Student"],children:e.jsx(dn,{})}),children:[{path:"dashboard",element:e.jsx(wp,{})},{path:"section",element:e.jsx(Sp,{})},{path:"attendance",element:e.jsx(Cp,{})},{path:"statistics",element:e.jsx(Ap,{})},{path:"classmates",element:e.jsx(Dp,{})},{path:"settings",element:e.jsx("div",{children:"Settings Page"})}]},{path:"*",element:e.jsx(Mp,{})}]),zp=()=>{const i=Dd();h.useEffect(()=>{const o=localStorage.getItem("token"),m=localStorage.getItem("user"),d=localStorage.getItem("profile");if(o&&m&&d)try{const u=JSON.parse(m),b=JSON.parse(d);i(xf({user:u,profile:b,token:o}))}catch(u){console.error("Failed to parse stored auth data:",u),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("profile")}},[i])};function Rp(){return zp(),e.jsx(Eg,{router:Tp})}df.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(_g,{store:gf,children:e.jsx(Rp,{})})}));
